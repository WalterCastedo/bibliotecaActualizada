import { defineComponent, shallowRef, ref, computed, resolveComponent, openBlock, createElementBlock, normalizeClass, createElementVNode, withKeys, renderSlot, normalizeProps, guardReactiveProps, mergeProps, createBlock, createCommentVNode, toDisplayString, createVNode, normalizeStyle } from "vue";
import { p as pick_1 } from "../../../vendor.js";
import { u as useBem } from "../../composables/useBem.js";
import { u as useColors } from "../../composables/useColors.js";
import { u as useComponentPresetProp } from "../../composables/useComponentPreset.js";





import { u as useResizeObserver } from "../../composables/useResizeObserver.js";
import { u as useSyncProp } from "../../composables/useSyncProp.js";
import { u as useTextColor } from "../../composables/useTextColor.js";
import { a as useAccordionItem } from "../va-accordion/hooks/useAccordion.js";
import { g as generateUniqueId } from "../../utils/uuid.js";
import { V as VaIcon } from "../va-icon/index.js";
import { _ as _export_sfc } from "../../../plugin-vue_export-helper.js";
var VaCollapse_vue_vue_type_style_index_0_lang = /* @__PURE__ */ (() => ":root{--va-collapse-transition: all .3s linear;--va-collapse-popout-margin: .5rem -.5rem;--va-collapse-inset-margin: .5rem .5rem;--va-collapse-body-wrapper-transition: all .3s linear;--va-collapse-body-width: 100%;--va-collapse-header-content-display: flex;--va-collapse-header-content-justify-content: space-between;--va-collapse-header-content-cursor: pointer;--va-collapse-header-content-background-color: #f5f8f9;--va-collapse-header-content-box-shadow: var(--va-box-shadow);--va-collapse-header-content-border-radius: .375rem;--va-collapse-header-content-align-items: center;--va-collapse-header-content-padding-top: .75rem;--va-collapse-header-content-padding-bottom: .75rem;--va-collapse-header-content-padding-left: 1rem;--va-collapse-header-content-text-width: 100%;--va-collapse-header-content-text-font-weight: 600;--va-collapse-header-content-icon-min-width: 1.5rem;--va-collapse-header-content-icon-margin-left: .5rem;--va-collapse-header-content-icon-margin-right: .5rem;--va-collapse-header-content-icon-color: var(--va-background-element);--va-collapse-solid-box-shadow: var(--va-box-shadow);--va-collapse-solid-border-radius: .375rem;--va-collapse-solid-header-content-background-color: #f5f8f9;--va-collapse-solid-header-content-box-shadow: none;--va-collapse-solid-header-content-border-radius: .375rem;--va-collapse-solid-header-content-transition: background-color ease-in .3s;--va-collapse-solid-body-border-radius: 0 0 .375rem .375rem;--va-collapse-solid-body-margin-top: 0}.va-collapse{transition:var(--va-collapse-transition, var(--va-swing-transition));font-family:var(--va-font-family)}.va-collapse__body-wrapper{transition:var(--va-collapse-body-wrapper-transition);overflow:hidden}.va-collapse__body{top:0;left:0;width:var(--va-collapse-body-width)}.va-collapse__header{display:var(--va-collapse-header-content-display);justify-content:var(--va-collapse-header-content-justify-content);cursor:var(--va-collapse-header-content-cursor);background-color:var(--va-collapse-header-content-background-color);box-shadow:var(--va-collapse-header-content-box-shadow, var(--va-block-box-shadow));border-radius:var(--va-collapse-header-content-border-radius, var(--va-block-border-radius));align-items:var(--va-collapse-header-content-align-items);padding-top:var(--va-collapse-header-content-padding-top);padding-bottom:var(--va-collapse-header-content-padding-bottom);padding-left:var(--va-collapse-header-content-padding-left)}.va-collapse__header__text{width:var(--va-collapse-header-content-text-width);font-weight:var(--va-collapse-header-content-text-font-weight)}.va-collapse__header__icon{display:flex;justify-content:center;align-items:center;min-width:var(--va-collapse-header-content-icon-min-width);margin-left:var(--va-collapse-header-content-icon-margin-left);margin-right:var(--va-collapse-header-content-icon-margin-right);color:var(--va-collapse-header-content-icon-color)}.va-collapse__header:focus-visible{outline:2px solid var(--va-focus)!important;border-radius:var(--va-collapse-header-content-border-radius)}.va-collapse--solid{box-shadow:var(--va-collapse-solid-box-shadow);border-radius:var(--va-collapse-solid-border-radius)}.va-collapse--solid .va-collapse__header{border-radius:var(--va-collapse-solid-header-content-border-radius, var(--va-block-border-radius));transition:var(--va-collapse-solid-header-content-transition);box-shadow:var(--va-collapse-solid-header-content-box-shadow, var(--va-block-box-shadow));background-color:var(--va-collapse-solid-header-content-background-color)}.va-collapse--solid .va-collapse__body-wrapper{border-radius:var(--va-collapse-solid-border-radius)}.va-collapse--solid .va-collapse__body{border-radius:var(--va-collapse-solid-body-border-radius);margin-top:var(--va-collapse-solid-body-margin-top)}.va-collapse--popout{margin:var(--va-collapse-popout-margin)}.va-collapse--inset{margin:var(--va-collapse-inset-margin)}.va-collapse--flat .va-collapse__header{box-shadow:none;border:0;border-radius:0}.va-collapse--disabled{cursor:default;opacity:.4;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}\n")();
const _sfc_main = defineComponent({
  name: "VaCollapse",
  components: {
    VaIcon
  },
  props: {
    ...useComponentPresetProp,
    modelValue: { type: Boolean, default: void 0 },
    disabled: { type: Boolean, default: false },
    header: { type: String, default: "" },
    icon: { type: String, default: "" },
    solid: { type: Boolean, default: false },
    color: { type: String, default: "background-element" },
    textColor: { type: String, default: "" },
    colorAll: { type: Boolean, default: false },
    flat: { type: Boolean, default: false }
  },
  emits: ["update:modelValue"],
  setup(props, { emit, slots }) {
    const body = shallowRef();
    const [computedModelValue] = useSyncProp("modelValue", props, emit, false);
    const { getColor, getHoverColor } = useColors();
    const { accordionProps, toggle } = useAccordionItem(computedModelValue);
    const { textColorComputed } = useTextColor();
    const bodyHeight = ref();
    useResizeObserver([body], () => {
      var _a, _b;
      bodyHeight.value = (_b = (_a = body.value) == null ? void 0 : _a.clientHeight) != null ? _b : 0;
    });
    const height = computed(() => computedModelValue.value ? bodyHeight.value : 0);
    const getTransition = () => {
      const duration = height.value / 1e3 * 0.2;
      return `${duration > 0.2 ? duration : 0.2}s`;
    };
    const getBackground = () => {
      return props.color && props.colorAll ? getHoverColor(getColor(props.color)) : "";
    };
    const uniqueId = computed(generateUniqueId);
    const headerIdComputed = computed(() => `header-${uniqueId.value}`);
    const panelIdComputed = computed(() => `panel-${uniqueId.value}`);
    const tabIndexComputed = computed(() => props.disabled ? -1 : 0);
    const headerAttributes = computed(() => ({
      id: headerIdComputed.value,
      tabindex: tabIndexComputed.value,
      "aria-controls": panelIdComputed.value,
      "aria-expanded": computedModelValue.value,
      "aria-disabled": props.disabled,
      role: "button"
    }));
    const computedClasses = useBem("va-collapse", () => ({
      ...pick_1(props, ["disabled", "solid", "flat"]),
      expanded: computedModelValue.value,
      active: props.solid && computedModelValue.value,
      popout: !!(accordionProps.value.popout && computedModelValue.value),
      inset: !!(accordionProps.value.inset && computedModelValue.value)
    }));
    return {
      body,
      height,
      toggle,
      computedModelValue,
      headerIdComputed,
      headerAttributes,
      panelIdComputed,
      tabIndexComputed,
      textColorComputed,
      computedClasses,
      headerStyle: computed(() => ({
        paddingLeft: props.icon && 0,
        color: textColorComputed.value,
        backgroundColor: props.color ? getColor(props.color) : ""
      })),
      contentStyle: computed(() => {
        var _a;
        const hasContent = computedModelValue.value && !!((_a = slots.default) == null ? void 0 : _a.call(slots)[0]);
        return {
          visibility: hasContent ? "visible" : "hidden",
          height: `${height.value}px`,
          transitionDuration: getTransition(),
          background: hasContent ? getBackground() : ""
        };
      })
    };
  }
});
const _hoisted_1 = { class: "va-collapse__header__text" };
const _hoisted_2 = ["id", "aria-labelledby"];
function _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {
  const _component_va_icon = resolveComponent("va-icon");
  return openBlock(), createElementBlock("div", {
    class: normalizeClass(["va-collapse", _ctx.computedClasses])
  }, [
    createElementVNode("div", {
      class: "va-collapse__header-wrapper",
      onClick: _cache[0] || (_cache[0] = (...args) => _ctx.toggle && _ctx.toggle(...args)),
      onKeydown: [
        _cache[1] || (_cache[1] = withKeys((...args) => _ctx.toggle && _ctx.toggle(...args), ["enter"])),
        _cache[2] || (_cache[2] = withKeys((...args) => _ctx.toggle && _ctx.toggle(...args), ["space"]))
      ]
    }, [
      renderSlot(_ctx.$slots, "header", normalizeProps(guardReactiveProps({
        value: _ctx.computedModelValue,
        bind: _ctx.headerAttributes,
        attributes: _ctx.headerAttributes
      })), () => [
        createElementVNode("div", mergeProps(_ctx.headerAttributes, {
          class: "va-collapse__header",
          style: _ctx.headerStyle
        }), [
          _ctx.icon ? (openBlock(), createBlock(_component_va_icon, {
            key: 0,
            class: "va-collapse__header__icon",
            name: _ctx.icon,
            color: _ctx.textColorComputed
          }, null, 8, ["name", "color"])) : createCommentVNode("", true),
          renderSlot(_ctx.$slots, "header-content", normalizeProps(guardReactiveProps({ header: _ctx.header })), () => [
            createElementVNode("div", _hoisted_1, toDisplayString(_ctx.header), 1)
          ]),
          createVNode(_component_va_icon, {
            class: "va-collapse__header__icon",
            name: _ctx.computedModelValue ? "va-arrow-up" : "va-arrow-down",
            color: _ctx.textColorComputed
          }, null, 8, ["name", "color"])
        ], 16)
      ])
    ], 32),
    createElementVNode("div", {
      class: "va-collapse__body-wrapper",
      style: normalizeStyle(_ctx.contentStyle)
    }, [
      createElementVNode("div", {
        class: "va-collapse__body",
        ref: "body",
        role: "region",
        id: _ctx.panelIdComputed,
        "aria-labelledby": _ctx.headerIdComputed
      }, [
        renderSlot(_ctx.$slots, "default")
      ], 8, _hoisted_2)
    ], 4)
  ], 2);
}
var _VaCollapse = /* @__PURE__ */ _export_sfc(_sfc_main, [["render", _sfc_render]]);
export { _VaCollapse as _ };

import './VaCollapse.css';
//# sourceMappingURL=VaCollapse.js.map
