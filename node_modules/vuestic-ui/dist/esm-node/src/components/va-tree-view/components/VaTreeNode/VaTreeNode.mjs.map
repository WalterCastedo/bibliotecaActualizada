{"version":3,"file":"VaTreeNode.mjs","sources":["../../../../../../../src/components/va-tree-view/components/VaTreeNode/VaTreeNode.vue"],"sourcesContent":["<template>\n  <div\n    class=\"va-tree-node\"\n    :class=\"treeNodeClassComputed\"\n    role=\"treeitem\"\n    :aria-expanded=\"$props.node.expanded\"\n    :aria-disabled=\"$props.node.disabled\"\n    :aria-checked=\"!!$props.node.checked\"\n    :tabindex=\"tabIndexComputed\"\n    @keydown.right.stop.prevent=\"handleToggleNode($event, $props.node)\"\n    @keydown.left.stop.prevent=\"handleToggleNode($event, $props.node)\"\n  >\n    <div\n      class=\"va-tree-node-root\"\n      @click.stop=\"toggleNode($props.node)\"\n    >\n      <div class=\"va-tree-node-content\" :class=\"indentClassComputed\">\n        <div\n          v-if=\"$props.node.hasChildren\"\n          class=\"va-tree-node-content__item va-tree-node-content__item--leaf\"\n        >\n          <slot name=\"icon-toggle\" v-bind=\"$props.node\">\n            <va-icon\n              :name=\"isExpandedComputed ? 'keyboard_arrow_down' : 'keyboard_arrow_right'\"\n              size=\"20px\"\n            />\n          </slot>\n        </div>\n        <div\n          v-if=\"selectable\"\n          class=\"va-tree-node-content__item\"\n          @click.stop\n        >\n          <slot name=\"checkbox\" v-bind=\"$props.node\">\n            <va-checkbox\n              :model-value=\"$props.node.checked\"\n              :color=\"colorComputed\"\n              indeterminate\n              @update:model-value=\"(v) => toggleCheckbox($props.node, v)\"\n              class=\"va-tree-node__checkbox\"\n            />\n          </slot>\n        </div>\n        <div v-if=\"iconComputed\" class=\"va-tree-node-content__item\">\n          <slot name=\"icon\" v-bind=\"$props.node\">\n            <va-icon :name=\"iconComputed\" size=\"small\" />\n          </slot>\n        </div>\n        <div class=\"va-tree-node-content__body\">\n          <slot name=\"content\" v-bind=\"$props.node\">{{ labelComputed }}</slot>\n        </div>\n      </div>\n    </div>\n    <div\n      v-show=\"$props.node.hasChildren\"\n      role=\"group\"\n      :aria-hidden=\"!$props.node.expanded\"\n      class=\"va-tree-node-children\"\n      :class=\"expandedClassComputed\"\n    >\n      <va-tree-node\n        v-for=\"childNode in $props.node.children\"\n        :key=\"getTrackBy(childNode)\"\n        :node=\"childNode\"\n      >\n        <template v-for=\"(_, name) in $slots\" :key=\"name\" v-slot:[name]=\"slotScope\">\n          <slot :name=\"name\" v-bind=\"slotScope\" />\n        </template>\n      </va-tree-node>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, computed, PropType } from 'vue'\n\nimport { useBem, useStrictInject } from '../../../../composables'\n\nimport { VaIcon, VaCheckbox } from '../../../'\nimport { TreeViewKey, TreeNode } from '../../types'\n\nconst INJECTION_ERROR_MESSAGE = 'The VaTreeNode component should be used in the context of VaTreeView component'\n\nexport default defineComponent({\n  name: 'VaTreeNode',\n\n  props: {\n    node: {\n      type: Object as PropType<TreeNode>,\n      required: true,\n    },\n  },\n\n  components: { VaCheckbox, VaIcon },\n\n  setup: (props) => {\n    const {\n      iconBy,\n      selectable,\n      colorComputed,\n      getText,\n      getTrackBy,\n      toggleNode,\n      getNodeProperty,\n      toggleCheckbox,\n    } = useStrictInject(TreeViewKey, INJECTION_ERROR_MESSAGE)\n\n    const labelComputed = computed(() => getText(props.node) || '')\n    const isExpandedComputed = computed(() => !!props.node.expanded)\n    const iconComputed = computed(() => getNodeProperty(props.node, iconBy))\n\n    const treeNodeClassComputed = useBem('va-tree-node', () => ({\n      disabled: !!props.node.disabled,\n    }))\n\n    const expandedClassComputed = useBem('va-tree-node-children', () => ({\n      expanded: isExpandedComputed.value,\n    }))\n\n    const indentClassComputed = useBem('va-tree-node-content', () => ({\n      indent: props.node.hasChildren === false,\n    }))\n\n    const tabIndexComputed = computed(() => props.node.disabled ? -1 : 0)\n\n    const handleToggleNode = (event: Event, node: TreeNode) => {\n      if (node.expanded) {\n        (event.target as HTMLElement)?.blur()\n      } else {\n        toggleNode(node)\n      }\n    }\n\n    return {\n      selectable,\n\n      getText,\n      getTrackBy,\n      toggleNode,\n      handleToggleNode,\n      toggleCheckbox,\n\n      iconComputed,\n      labelComputed,\n      colorComputed,\n      tabIndexComputed,\n      indentClassComputed,\n      isExpandedComputed,\n      expandedClassComputed,\n      treeNodeClassComputed,\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import \"../../../../styles/resources/index\";\n@import 'variables';\n\n.va-tree-node {\n  &-root {\n    display: flex;\n    padding: var(--va-tree-node-padding);\n    position: relative;\n\n    &::before {\n      content: \"\";\n      background-color: var(--va-primary);\n      border-radius: var(--va-tree-node-border-radius);\n      bottom: 0;\n      left: 0;\n      opacity: 0;\n      pointer-events: none;\n      position: absolute;\n      right: 0;\n      top: 0;\n    }\n\n    &:hover::before {\n      opacity: var(--va-tree-node-interactive-bg-opacity);\n    }\n  }\n\n  &-content {\n    display: flex;\n    flex-wrap: nowrap;\n    align-items: center;\n    width: 100%;\n\n    &__item {\n      flex: var(--va-tree-node-content-item-flex);\n      min-width: var(--va-tree-node-indent);\n      line-height: 1;\n\n      &--leaf {\n        cursor: pointer;\n      }\n    }\n\n    &__body {\n      flex: var(--va-tree-node-content-body-item-flex);\n      width: 100%;\n    }\n\n    &--indent {\n      margin-left: var(--va-tree-node-indent);\n    }\n  }\n\n  &-children {\n    display: none;\n    background: var(--va-tree-node-children-background);\n    padding-left: var(--va-tree-node-indent);\n    width: 100%;\n\n    &--expanded {\n      display: block;\n    }\n  }\n\n  &__checkbox {\n    --va-checkbox-input-padding: 0;\n  }\n\n  &--disabled {\n    @include va-disabled;\n\n    .va-tree-node-content__item--leaf {\n      cursor: pointer;\n      pointer-events: all;\n    }\n  }\n\n  &:focus-visible > .va-tree-node-root {\n    @include focus-outline;\n\n    &::before {\n      opacity: var(--va-tree-node-interactive-bg-opacity);\n    }\n  }\n}\n</style>\n"],"names":["_createElementBlock","_normalizeClass","_withKeys","_withModifiers","_createElementVNode","_openBlock","_renderSlot","_normalizeProps","_guardReactiveProps","_createVNode","_createTextVNode","_toDisplayString","_Fragment","_renderList","_createBlock","_createSlots","_withCtx","_vShow"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiFA,MAAM,0BAA0B;AAEhC,MAAK,YAAa,gBAAa;AAAA,EAC7B,MAAM;AAAA,EAEN,OAAO;AAAA,IACL,MAAM;AAAA,MACJ,MAAM;AAAA,MACN,UAAU;AAAA,IACZ;AAAA,EACF;AAAA,EAEA,YAAY,EAAE,YAAY,OAAO;AAAA,EAEjC,OAAO,CAAC,UAAU;AACV,UAAA;AAAA,MACJ;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,QACE,gBAAgB,aAAa,uBAAuB;AAExD,UAAM,gBAAgB,SAAS,MAAM,QAAQ,MAAM,IAAI,KAAK,EAAE;AAC9D,UAAM,qBAAqB,SAAS,MAAM,CAAC,CAAC,MAAM,KAAK,QAAQ;AAC/D,UAAM,eAAe,SAAS,MAAM,gBAAgB,MAAM,MAAM,MAAM,CAAC;AAEjE,UAAA,wBAAwB,OAAO,gBAAgB,MAAO;AAAA,MAC1D,UAAU,CAAC,CAAC,MAAM,KAAK;AAAA,IACvB,EAAA;AAEI,UAAA,wBAAwB,OAAO,yBAAyB,MAAO;AAAA,MACnE,UAAU,mBAAmB;AAAA,IAC7B,EAAA;AAEI,UAAA,sBAAsB,OAAO,wBAAwB,MAAO;AAAA,MAChE,QAAQ,MAAM,KAAK,gBAAgB;AAAA,IACnC,EAAA;AAEF,UAAM,mBAAmB,SAAS,MAAM,MAAM,KAAK,WAAW,KAAK,CAAC;AAE9D,UAAA,mBAAmB,CAAC,OAAc,SAAmB;;AACzD,UAAI,KAAK,UAAU;AAChB,oBAAM,WAAN,mBAA8B;AAAA,MAAK,OAC/B;AACL,mBAAW,IAAI;AAAA,MACjB;AAAA,IAAA;AAGK,WAAA;AAAA,MACL;AAAA,MAEA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MAEA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IAAA;AAAA,EAEJ;AACF,CAAC;;;;EArIS,OAAM;;;;EAwBiB,OAAM;;AAK1B,MAAA,aAAA,EAAA,OAAM;;;;;;sBA/CjBA,mBAqEM,OAAA;AAAA,IApEJ,OAAKC,eAAC,CAAA,gBACE,KAAqB,qBAAA,CAAA;AAAA,IAC7B,MAAK;AAAA,IACJ,iBAAe,YAAO,KAAK;AAAA,IAC3B,iBAAe,YAAO,KAAK;AAAA,IAC3B,gBAAY,CAAI,CAAA,KAAA,OAAO,KAAK;AAAA,IAC5B,UAAU,KAAA;AAAA,IACV,WAAO;AAAA,MAAqB,OAAA,MAAA,QAAA,KAAAC,SAAAC,cAAA,CAAA,WAAA,KAAA,iBAAiB,QAAQ,KAAA,OAAO,IAAI,GAAA,CAAA,QAAA,SAAA,CAAA,GAAA,CAAA,OAAA,CAAA;AAAA,MACrC,OAAA,MAAA,QAAA,KAAAD,SAAAC,cAAA,CAAA,WAAA,KAAA,iBAAiB,QAAQ,KAAA,OAAO,IAAI,GAAA,CAAA,QAAA,SAAA,CAAA,GAAA,CAAA,MAAA,CAAA;AAAA,IAAA;AAAA;IAEhEC,mBAwCM,OAAA;AAAA,MAvCJ,OAAM;AAAA,MACL,SAAK,OAAA,MAAA,QAAA,KAAAD,cAAA,CAAA,WAAO,KAAW,WAAA,KAAA,OAAO,IAAI,GAAA,CAAA,MAAA,CAAA;AAAA,IAAA,GAAA;AAAA,MAEnCC,mBAmCM,OAAA;AAAA,QAnCD,OAAKH,eAAC,CAAA,wBAA+B,KAAmB,mBAAA,CAAA;AAAA,MAAA,GAAA;AAAA,QAEnD,KAAA,OAAO,KAAK,cAAAI,WAAA,GADpBL,mBAUM,OAVN,YAUM;AAAA,UANJM,WAKO,KAAA,QAAA,eAAAC,eAAAC,mBAL0B,KAAO,OAAA,IAAI,IAA5C,MAKO;AAAA,YAJLC,YAGE,oBAAA;AAAA,cAFC,MAAM,KAAkB,qBAAA,wBAAA;AAAA,cACzB,MAAK;AAAA,YAAA,GAAA,MAAA,GAAA,CAAA,MAAA,CAAA;AAAA;;QAKH,KAAA,aAAAJ,cADRL,mBAcM,OAAA;AAAA,UAAA,KAAA;AAAA,UAZJ,OAAM;AAAA,UACL,SAAK,OAAN,MAAA,QAAA,KAAAG,cAAA,MAAA;AAAA,UAAA,GAAW,CAAA,MAAA,CAAA;AAAA,QAAA,GAAA;AAAA,UAEXG,WAQO,KARuB,QAAA,YAAAC,eAAAC,mBAAA,KAAA,OAAO,IAAI,CAAA,GAAzC,MAQO;AAAA,YAPLC,YAME,wBAAA;AAAA,cALC,eAAa,YAAO,KAAK;AAAA,cACzB,OAAO,KAAA;AAAA,cACR,eAAA;AAAA,cACC,uBAAkB,OAAG,MAAA,QAAA,KAAA,CAAA,MAAM,KAAe,eAAA,KAAA,OAAO,MAAM,CAAC;AAAA,cACzD,OAAM;AAAA,YAAA,GAAA,MAAA,GAAA,CAAA,eAAA,OAAA,CAAA;AAAA;;QAID,KAAX,eAAAJ,WAAA,GAAAL,mBAIM,OAJN,YAIM;AAAA,UAHJM,WAEO,KAAA,QAAA,QAAAC,eAAAC,mBAFmB,KAAO,OAAA,IAAI,IAArC,MAEO;AAAA,YADLC,YAA6C,oBAAA;AAAA,cAAnC,MAAM,KAAA;AAAA,cAAc,MAAK;AAAA,YAAA,GAAA,MAAA,GAAA,CAAA,MAAA,CAAA;AAAA;;QAGvCL,mBAEM,OAFN,YAEM;AAAA,UADJE,WAAoE,KAAA,QAAA,WAAAC,eAAAC,mBAAvC,KAAO,OAAA,IAAI,IAAxC,MAAoE;AAAA,YAAAE,gBAAAC,gBAAvB,KAAa,aAAA,GAAA,CAAA;AAAA,UAAA,CAAA;AAAA;;;mBAIhEP,mBAgBM,OAAA;AAAA,MAdJ,MAAK;AAAA,MACJ,eAAW,CAAG,KAAA,OAAO,KAAK;AAAA,MAC3B,OAAKH,eAAC,CAAA,yBACE,KAAqB,qBAAA,CAAA;AAAA,IAAA,GAAA;AAAA,MAE7BI,WAAA,IAAA,GAAAL,mBAQeY,UAPO,MAAAC,WAAA,KAAA,OAAO,KAAK,UAAQ,CAAjC,cAAS;4BADlBC,YAQe,yBAAA;AAAA,UANZ,KAAK,gBAAW,SAAS;AAAA,UACzB,MAAM;AAAA,QAAA,GAAAC,YAAA,EAAA,GAAA,KAAA;AAAA,qBAEuB,KAAM,QAAA,CAAlB,GAAG,SAAI;;;cACvB,IAAAC,QAAA,CAD+D,cAAS;AAAA,gBACxEV,WAAwC,KAAA,QAA3B,MAAIC,eAAAC,mBAAU,SAAS,CAAA,CAAA;AAAA,cAAA,CAAA;AAAA;;;;;MAZhC,CAAAS,OAAA,KAAA,OAAO,KAAK,WAAW;AAAA,IAAA,CAAA;AAAA;;;;"}