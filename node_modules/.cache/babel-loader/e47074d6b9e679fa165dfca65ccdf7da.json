{"ast":null,"code":"import { defineComponent, ref, computed, watch, openBlock, createElementBlock, renderSlot, createCommentVNode, createElementVNode, normalizeStyle, withDirectives, vShow } from \"vue\";\nimport { u as useComponentPresetProp } from \"../../composables/useComponentPreset.js\";\nimport { _ as _export_sfc } from \"../../../plugin-vue_export-helper.js\";\n\nvar VaImage_vue_vue_type_style_index_0_lang = /* @__PURE__ */(() => \":root{--va-image-overflow: hidden;--va-image-position: relative;--va-image-img-background-position: 50% 50%;--va-image-img-background-repeat: no-repeat}.va-image{overflow:var(--va-image-overflow);position:var(--va-image-position);font-family:var(--va-font-family)}.va-image img{height:100%;width:100%}.va-image__img,.va-image__loader,.va-image__error,.va-image__overlay{position:absolute;top:0;right:0;bottom:0;left:0}.va-image__loader,.va-image__error,.va-image__overlay{display:flex;justify-content:center;align-items:center}\\n\")();\n\nconst _sfc_main = defineComponent({\n  name: \"VaImage\",\n  emits: [\"loaded\", \"error\"],\n  props: { ...useComponentPresetProp,\n    ratio: {\n      type: Number,\n      default: 1\n    },\n    contain: {\n      type: Boolean,\n      default: false\n    },\n    src: {\n      type: String,\n      required: true\n    },\n    alt: {\n      type: String,\n      default: \"\"\n    },\n    draggable: {\n      type: Boolean,\n      default: true\n    }\n  },\n\n  setup(props, {\n    emit\n  }) {\n    const loading = ref(false);\n    const loadingError = ref(false);\n    const imageStyles = computed(() => ({\n      objectFit: props.contain ? \"contain\" : \"cover\"\n    }));\n    const paddingStyles = computed(() => ({\n      paddingBottom: `${1 / props.ratio * 100}%`\n    }));\n\n    const handleLoad = () => {\n      loading.value = false;\n      emit(\"loaded\", props.src);\n    };\n\n    const handleError = err => {\n      loadingError.value = true;\n      loading.value = false;\n      emit(\"error\", err);\n    };\n\n    watch(() => props.src, () => {\n      loading.value = true;\n      loadingError.value = false;\n    });\n    return {\n      loading,\n      loadingError,\n      imageStyles,\n      paddingStyles,\n      handleLoad,\n      handleError\n    };\n  }\n\n});\n\nconst _hoisted_1 = {\n  class: \"va-image\",\n  \"aria-live\": \"polite\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"va-image__error\"\n};\nconst _hoisted_3 = {\n  class: \"va-image__img\"\n};\nconst _hoisted_4 = [\"src\", \"alt\", \"draggable\"];\nconst _hoisted_5 = {\n  class: \"va-image__overlay\"\n};\nconst _hoisted_6 = {\n  key: 1,\n  class: \"va-image__loader\"\n};\n\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", _hoisted_1, [_ctx.loadingError ? (openBlock(), createElementBlock(\"div\", _hoisted_2, [renderSlot(_ctx.$slots, \"error\")])) : createCommentVNode(\"\", true), createElementVNode(\"div\", {\n    style: normalizeStyle(_ctx.paddingStyles)\n  }, null, 4), withDirectives(createElementVNode(\"div\", _hoisted_3, [createElementVNode(\"img\", {\n    style: normalizeStyle(_ctx.imageStyles),\n    src: _ctx.$props.src,\n    alt: _ctx.$props.alt,\n    draggable: _ctx.$props.draggable,\n    onError: _cache[0] || (_cache[0] = (...args) => _ctx.handleError && _ctx.handleError(...args)),\n    onLoad: _cache[1] || (_cache[1] = (...args) => _ctx.handleLoad && _ctx.handleLoad(...args))\n  }, null, 44, _hoisted_4)], 512), [[vShow, !_ctx.loadingError && !_ctx.loading]]), createElementVNode(\"div\", _hoisted_5, [renderSlot(_ctx.$slots, \"default\")]), _ctx.loading ? (openBlock(), createElementBlock(\"div\", _hoisted_6, [renderSlot(_ctx.$slots, \"loader\")])) : createCommentVNode(\"\", true)]);\n}\n\nvar _VaImage = /* @__PURE__ */_export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\n\nexport { _VaImage as _ };\nimport './VaImage.css';","map":{"version":3,"mappings":";;;;;;AAuCA,MAAKA,YAAaC,gBAAa;EAC7BC,MAAM,SADuB;EAE7BC,OAAO,CAAC,QAAD,EAAW,OAAX,CAFsB;EAG7BC,OAAO,EACL,GAAGC,sBADE;IAELC,OAAO;MAAEC,MAAMC,MAAR;MAAgBC,SAAS;IAAzB,CAFF;IAGLC,SAAS;MAAEH,MAAMI,OAAR;MAAiBF,SAAS;IAA1B,CAHJ;IAILG,KAAK;MAAEL,MAAMM,MAAR;MAAgBC,UAAU;IAA1B,CAJA;IAKLC,KAAK;MAAER,MAAMM,MAAR;MAAgBJ,SAAS;IAAzB,CALA;IAMLO,WAAW;MAAET,MAAMI,OAAR;MAAiBF,SAAS;IAA1B;EANN,CAHsB;;EAW7BQ,MAAOb,KAAP,EAAc;IAAEc;EAAF,CAAd,EAAwB;IAChB,gBAAUC,IAAI,KAAJ,CAAV;IACA,qBAAeA,IAAI,KAAJ,CAAf;IAEA,oBAAcC,SAAS,OAAO;MAClCC,WAAWjB,MAAMM,OAAN,GAAgB,SAAhB,GAAqC;IADd,CAAP,CAAT,CAAd;IAIA,sBAAgBU,SAAS,OAAO;MACpCE,eAAe,GAAG,IAAIlB,MAAME,KAAV,GAAkB;IADA,CAAP,CAAT,CAAhB;;IAIN,MAAMiB,aAAa,MAAM;MACvBC,QAAQC,KAAR,GAAgB,KAAhB;MACKP,eAAUd,MAAMQ,GAAhB;IAAmB,CAF1B;;IAKM,oBAAec,GAAD,IAAgB;MAClCC,aAAaF,KAAb,GAAqB,IAArB;MACAD,QAAQC,KAAR,GAAgB,KAAhB;MACAP,KAAK,OAAL,EAAcQ,GAAd;IAAiB,CAHb;;IAMAE,YAAMxB,MAAMQ,GAAZ,EAAiB,MAAM;MAC3BY,QAAQC,KAAR,GAAgB,IAAhB;MACAE,aAAaF,KAAb,GAAqB,KAArB;IACD,CAHK;IAKC;MACLD,OADK;MAELG,YAFK;MAGLE,WAHK;MAILC,aAJK;MAKLP,UALK;MAMLQ;IANK;EAQT;;AA/C6B,CAAb,CAAlB;;;EAtCOC,OAAM;EAAW,aAAU;;;;EAG5BA,OAAM;;AAQN;EAAAA,OAAM;AAAN;;AAWG;EAAAA,OAAM;AAAN;;;EAKHA,OAAM;;;;EA3BV,uCA+BM,KA/BNC,cA+BM,CA7BIC,kCADRD,mBAKM,KALNA,cAKM,CADJE,WAAqBD,WAArBC,EAAqB,OAArBA,CACI,CALNF,CACQ,IAGeG,4BA0BnB,EAvBJC,mBAA8B,KAA9BA,EAA8B;IAAxBC,OAAKC,eAAEL,KAAaJ,aAAfS;EAAmB,CAA9BF,EAA0B,IAA1BA,EAA0B,CAA1BA,CAuBI,EAtBJG,kCAYM,KAZNH,cAYM,CARJA,mBAOE,KAPFA,EAOE;IANCC,OAAKC,eAAEL,KAAWL,WAAbU,CAMN;IALC3B,KAAKsB,KAAOO,MAAP,CAAO7B,GAKb;IAJCG,KAAKmB,KAAOO,MAAP,CAAO1B,GAIb;IAHCC,WAAWkB,KAAOO,MAAP,CAAOzB,SAGnB;IAFC0B,SAAKC,OAAE,CAAF,MAAEA,sEAAF,CAEN;IADCC,QAAID,OAAE,CAAF,MAAEA,oEAAF;EACL,CAPFN,EAMS,IANTA,EAMS,EANTA,EAMSQ,UANTR,CAQI,CAZNA,EAUW,GAVXA,GAUW,CATA,8BAAY,CAAKH,KAAOV,OAAxB,CASA,CAVXgB,CAsBI,EATJH,mBAEM,KAFNA,cAEM,CADJF,WAAQD,WAARC,EAAQ,SAARA,CACI,CAFNE,CASI,EALIH,KADRV,OACQ,IADRsB,gCAKM,KALNb,cAKM,CADJE,WAAsBD,WAAtBC,EAAsB,QAAtBA,CACI,CALNF,CACQ,IAGgBG,4BAEpB,CA/BNH","names":["_sfc_main","defineComponent","name","emits","props","useComponentPresetProp","ratio","type","Number","default","contain","Boolean","src","String","required","alt","draggable","setup","emit","ref","computed","objectFit","paddingBottom","handleLoad","loading","value","err","loadingError","watch","imageStyles","paddingStyles","handleError","class","_createElementBlock","_ctx","_renderSlot","_createCommentVNode","_createElementVNode","style","_normalizeStyle","_withDirectives","$props","onError","_cache","onLoad","_hoisted_4","_openBlock"],"sources":["../../../../../src/components/va-image/VaImage.vue"],"sourcesContent":["<template>\n  <div class=\"va-image\" aria-live=\"polite\">\n    <div\n      v-if=\"loadingError\"\n      class=\"va-image__error\"\n    >\n      <slot name=\"error\" />\n    </div>\n\n    <div :style=\"paddingStyles\" />\n    <div\n      v-show=\"!loadingError && !loading\"\n      class=\"va-image__img\"\n    >\n      <img\n        :style=\"imageStyles\"\n        :src=\"$props.src\"\n        :alt=\"$props.alt\"\n        :draggable=\"$props.draggable\"\n        @error=\"handleError\"\n        @load=\"handleLoad\"\n      />\n    </div>\n    <div class=\"va-image__overlay\">\n      <slot />\n    </div>\n    <div\n      v-if=\"loading\"\n      class=\"va-image__loader\"\n    >\n      <slot name=\"loader\" />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, computed, watch, ref } from 'vue'\nimport { useComponentPresetProp } from '../../composables/useComponentPreset'\n\nexport default defineComponent({\n  name: 'VaImage',\n  emits: ['loaded', 'error'],\n  props: {\n    ...useComponentPresetProp,\n    ratio: { type: Number, default: 1 },\n    contain: { type: Boolean, default: false },\n    src: { type: String, required: true },\n    alt: { type: String, default: '' },\n    draggable: { type: Boolean, default: true },\n  },\n  setup (props, { emit }) {\n    const loading = ref(false)\n    const loadingError = ref(false)\n\n    const imageStyles = computed(() => ({\n      objectFit: props.contain ? 'contain' as const : 'cover' as const,\n    }))\n\n    const paddingStyles = computed(() => ({\n      paddingBottom: `${1 / props.ratio * 100}%`,\n    }))\n\n    const handleLoad = () => {\n      loading.value = false\n      emit('loaded', props.src)\n    }\n\n    const handleError = (err: Event) => {\n      loadingError.value = true\n      loading.value = false\n      emit('error', err)\n    }\n\n    watch(() => props.src, () => {\n      loading.value = true\n      loadingError.value = false\n    })\n\n    return {\n      loading,\n      loadingError,\n      imageStyles,\n      paddingStyles,\n      handleLoad,\n      handleError,\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import \"../../styles/resources\";\n@import \"variables\";\n\n.va-image {\n  overflow: var(--va-image-overflow);\n  position: var(--va-image-position);\n  font-family: var(--va-font-family);\n\n  img {\n    height: 100%;\n    width: 100%;\n  }\n\n  &__img,\n  &__loader,\n  &__error,\n  &__overlay {\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n  }\n\n  &__loader,\n  &__error,\n  &__overlay {\n    @include flex-center();\n  }\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}