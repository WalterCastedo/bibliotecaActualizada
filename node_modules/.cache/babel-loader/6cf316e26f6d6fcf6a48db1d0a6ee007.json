{"ast":null,"code":"import { defineComponent, shallowRef, ref, computed, onMounted, resolveComponent, openBlock, createBlock, Transition, withCtx, withDirectives, createElementVNode, normalizeClass, normalizeStyle, createElementBlock, toDisplayString, createCommentVNode, vShow, createVNode, withModifiers, withKeys } from \"vue\";\nimport { u as useColors } from \"../../composables/useColors.js\";\nimport { u as useComponentPresetProp } from \"../../composables/useComponentPreset.js\";\nimport { u as useTextColor } from \"../../composables/useTextColor.js\";\nimport { u as useTimer } from \"../../composables/useTimer.js\";\nimport { u as useTranslation } from \"../../composables/useTranslation.js\";\nimport { V as VaIcon } from \"../va-icon/VaIcon.js\";\nimport { _ as _export_sfc } from \"../../../plugin-vue_export-helper.js\";\n\nvar VaToast_vue_vue_type_style_index_0_lang = /* @__PURE__ */(() => \":root{--va-toast-display: flex;--va-toast-width: 330px;--va-toast-padding: 14px 26px 14px 13px;--va-toast-border-radius: 8px;--va-toast-border: 1px solid var(--va-background-secondary);--va-toast-background-color: var(--va-background-secondary);--va-toast-border-color: var(--va-background-secondary);--va-toast-box-shadow: 0 2px 12px 0 var(--va-shadow);--va-toast-transition: opacity .3s, transform .3s, left .3s, right .3s, top .4s, bottom .3s;--va-toast-z-index: calc(var(--va-z-index-teleport-overlay) + 100);--va-toast-group-margin-left: 13px;--va-toast-group-margin-right: 8px;--va-toast-title-font-weight: bold;--va-toast-title-font-size: 1rem;--va-toast-title-color: #303133;--va-toast-title-margin: 0 0 6px;--va-toast-content-font-size: 1rem;--va-toast-content-line-height: 1.3125;--va-toast-content-padding-right: 20px;--va-toast-icon-height: 24px;--va-toast-icon-width: 24px;--va-toast-icon-font-size: 24px;--va-toast-close-icon-top: 18px;--va-toast-close-icon-right: 15px;--va-toast-close-icon-font-size: 1rem;--va-toast-hover-color: #909399}.va-toast{position:fixed;box-sizing:border-box;width:var(--va-toast-width);padding:var(--va-toast-padding);display:flex;align-items:center;border-radius:var(--va-toast-border-radius);border:1px solid var(--va-toast-border-color);background-color:var(--va-toast-background-color);box-shadow:var(--va-toast-box-shadow);transition:var(--va-toast-transition);overflow:hidden;z-index:var(--va-toast-z-index);font-family:var(--va-font-family)}.va-toast--multiline{min-height:70px}.va-toast--right{right:16px}.va-toast--left{left:16px}.va-toast__group{margin-left:var(--va-toast-group-margin-left);margin-right:var(--va-toast-group-margin-right)}.va-toast__title{font-weight:var(--va-toast-title-font-weight);font-size:var(--va-toast-title-font-size);color:var(--va-toast-title-color);margin:var(--va-toast-title-margin)}.va-toast__content{font-size:var(--va-toast-content-font-size);line-height:var(--va-toast-content-line-height);padding-right:var(--va-toast-content-padding-right)}.va-toast__content p,.va-toast__content div{margin:0}.va-toast__icon{height:var(--va-toast-icon-height);width:var(--va-toast-icon-width);font-size:var(--va-toast-icon-font-size)}.va-toast__close-icon{position:absolute;top:50%;right:var(--va-toast-close-icon-right);cursor:pointer;transform:translateY(-50%);font-size:var(--va-toast-close-icon-font-siz);opacity:.7}.va-toast__close-icon:hover{opacity:1}.va-toast-fade-enter.right{right:0;transform:translate(100%)}.va-toast-fade-enter.left{left:0;transform:translate(-100%)}.va-toast-fade-leave-active{opacity:0}\\n\")();\n\nconst VaToastRenderer = defineComponent({\n  name: \"VaToastRenderer\",\n  props: {\n    render: {\n      type: Function,\n      required: true\n    }\n  },\n  setup: props => () => props.render()\n});\n\nconst _sfc_main = defineComponent({\n  name: \"VaToast\",\n  components: {\n    VaIcon,\n    VaToastRenderer\n  },\n  emits: [\"on-click\", \"on-close\"],\n  props: { ...useComponentPresetProp,\n    title: {\n      type: String,\n      default: \"\"\n    },\n    offsetY: {\n      type: Number,\n      default: 16\n    },\n    offsetX: {\n      type: Number,\n      default: 16\n    },\n    message: {\n      type: [String, Function],\n      default: \"\"\n    },\n    dangerouslyUseHtmlString: {\n      type: Boolean,\n      default: false\n    },\n    icon: {\n      type: String,\n      default: \"close\"\n    },\n    customClass: {\n      type: String,\n      default: \"\"\n    },\n    duration: {\n      type: Number,\n      default: 5e3\n    },\n    color: {\n      type: String,\n      default: \"\"\n    },\n    closeable: {\n      type: Boolean,\n      default: true\n    },\n    onClose: {\n      type: Function\n    },\n    onClick: {\n      type: Function\n    },\n    multiLine: {\n      type: Boolean,\n      default: false\n    },\n    position: {\n      type: String,\n      default: \"top-right\",\n      validator: value => [\"top-right\", \"top-left\", \"bottom-right\", \"bottom-left\"].includes(value)\n    },\n    render: {\n      type: Function\n    }\n  },\n\n  setup(props, {\n    emit\n  }) {\n    const rootElement = shallowRef();\n    const {\n      getColor\n    } = useColors();\n    const {\n      textColorComputed\n    } = useTextColor();\n    const visible = ref(false);\n    const positionX = computed(() => {\n      return props.position.includes(\"right\") ? \"right\" : \"left\";\n    });\n    const positionY = computed(() => {\n      return props.position.includes(\"top\") ? \"top\" : \"bottom\";\n    });\n    const toastClasses = computed(() => [props.customClass, props.multiLine ? \"va-toast--multiline\" : \"\"]);\n    const toastStyles = computed(() => ({\n      [positionY.value]: `${props.offsetY}px`,\n      [positionX.value]: `${props.offsetX}px`,\n      backgroundColor: getColor(props.color),\n      color: textColorComputed.value\n    }));\n    const computedMessage = computed(() => typeof props.message === \"function\" ? props.message() : props.message);\n\n    const destroyElement = () => {\n      var _a, _b;\n\n      (_a = rootElement.value) == null ? void 0 : _a.removeEventListener(\"transitionend\", destroyElement);\n      (_b = rootElement.value) == null ? void 0 : _b.remove();\n    };\n\n    const onToastClick = () => {\n      if (typeof props.onClick === \"function\") {\n        props.onClick();\n      } else {\n        emit(\"on-click\");\n      }\n    };\n\n    const onToastClose = () => {\n      var _a;\n\n      visible.value = false;\n      (_a = rootElement.value) == null ? void 0 : _a.addEventListener(\"transitionend\", destroyElement);\n\n      if (typeof props.onClose === \"function\") {\n        props.onClose();\n      } else {\n        emit(\"on-close\");\n      }\n    };\n\n    const timer = useTimer();\n    const clearTimer = timer.clear;\n\n    const startTimer = () => {\n      if (props.duration > 0) {\n        timer.start(() => visible.value && onToastClose(), props.duration);\n      }\n    };\n\n    onMounted(() => {\n      visible.value = true;\n      startTimer();\n    });\n    return { ...useTranslation(),\n      visible,\n      toastClasses,\n      toastStyles,\n      computedMessage,\n      onToastClick,\n      onToastClose,\n      startTimer,\n      clearTimer\n    };\n  }\n\n});\n\nconst _hoisted_1 = [\"role\"];\nconst _hoisted_2 = {\n  class: \"va-toast__group\"\n};\nconst _hoisted_3 = [\"textContent\"];\nconst _hoisted_4 = {\n  class: \"va-toast__content\"\n};\nconst _hoisted_5 = [\"innerHTML\"];\nconst _hoisted_6 = [\"textContent\"];\nconst _hoisted_7 = {\n  key: 1,\n  class: \"va-toast__content\"\n};\n\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_VaToastRenderer = resolveComponent(\"VaToastRenderer\");\n\n  const _component_va_icon = resolveComponent(\"va-icon\");\n\n  return openBlock(), createBlock(Transition, {\n    name: \"va-toast-fade\"\n  }, {\n    default: withCtx(() => [withDirectives(createElementVNode(\"div\", {\n      ref: \"rootElement\",\n      role: _ctx.$props.closeable ? \"alertdialog\" : \"alert\",\n      class: normalizeClass([\"va-toast\", _ctx.toastClasses]),\n      style: normalizeStyle(_ctx.toastStyles),\n      onMouseenter: _cache[0] || (_cache[0] = (...args) => _ctx.clearTimer && _ctx.clearTimer(...args)),\n      onMouseleave: _cache[1] || (_cache[1] = (...args) => _ctx.startTimer && _ctx.startTimer(...args)),\n      onClick: _cache[2] || (_cache[2] = (...args) => _ctx.onToastClick && _ctx.onToastClick(...args))\n    }, [createElementVNode(\"div\", _hoisted_2, [_ctx.$props.title ? (openBlock(), createElementBlock(\"h2\", {\n      key: 0,\n      class: \"va-toast__title\",\n      textContent: toDisplayString(_ctx.$props.title)\n    }, null, 8, _hoisted_3)) : createCommentVNode(\"\", true), withDirectives(createElementVNode(\"div\", _hoisted_4, [_ctx.$props.dangerouslyUseHtmlString ? (openBlock(), createElementBlock(\"div\", {\n      key: 0,\n      innerHTML: _ctx.computedMessage\n    }, null, 8, _hoisted_5)) : (openBlock(), createElementBlock(\"p\", {\n      key: 1,\n      textContent: toDisplayString(_ctx.computedMessage)\n    }, null, 8, _hoisted_6))], 512), [[vShow, _ctx.$props.message]]), _ctx.$props.render ? (openBlock(), createElementBlock(\"div\", _hoisted_7, [createVNode(_component_VaToastRenderer, {\n      render: _ctx.$props.render\n    }, null, 8, [\"render\"])])) : createCommentVNode(\"\", true), _ctx.$props.closeable ? (openBlock(), createBlock(_component_va_icon, {\n      key: 2,\n      class: \"va-toast__close-icon\",\n      role: \"button\",\n      \"aria-label\": _ctx.t(\"closeToast\"),\n      tabindex: \"0\",\n      size: \"small\",\n      name: _ctx.$props.icon,\n      onClick: withModifiers(_ctx.onToastClose, [\"stop\"]),\n      onKeydown: withKeys(withModifiers(_ctx.onToastClose, [\"stop\"]), [\"enter\"])\n    }, null, 8, [\"aria-label\", \"name\", \"onClick\", \"onKeydown\"])) : createCommentVNode(\"\", true)])], 46, _hoisted_1), [[vShow, _ctx.visible]])]),\n    _: 1\n  });\n}\n\nvar _VaToast = /* @__PURE__ */_export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\n\nexport { _VaToast as _ };\nimport './VaToast.css';","map":{"version":3,"mappings":";;;;;;;;;;;AAkDA,MAAMA,kBAAkBC,gBAAgB;EACtCC,MAAM,iBADgC;EAEtCC,OAAO;IACLC,QAAQ;MAAEC,MAAMC,QAAR;MAAkBC,UAAU;IAA5B;EADH,CAF+B;EAKtCC,OAAQL,KAAD,IAAW,MAAMA,MAAMC,MAAN;AALc,CAAhB,CAAxB;;AAQA,MAAKK,YAAaR,gBAAa;EAC7BC,MAAM,SADuB;EAE7BQ,YAAY;IAAEC,MAAF;IAAUX;EAAV,CAFiB;EAG7BY,OAAO,CAAC,UAAD,EAAa,UAAb,CAHsB;EAI7BT,OAAO,EACL,GAAGU,sBADE;IAELC,OAAO;MAAET,MAAMU,MAAR;MAAgBC,SAAS;IAAzB,CAFF;IAGLC,SAAS;MAAEZ,MAAMa,MAAR;MAAgBF,SAAS;IAAzB,CAHJ;IAILG,SAAS;MAAEd,MAAMa,MAAR;MAAgBF,SAAS;IAAzB,CAJJ;IAKLI,SAAS;MAAEf,MAAM,CAACU,MAAD,EAAST,QAAT,CAAR;MAA4BU,SAAS;IAArC,CALJ;IAMLK,0BAA0B;MAAEhB,MAAMiB,OAAR;MAAiBN,SAAS;IAA1B,CANrB;IAOLO,MAAM;MAAElB,MAAMU,MAAR;MAAgBC,SAAS;IAAzB,CAPD;IAQLQ,aAAa;MAAEnB,MAAMU,MAAR;MAAgBC,SAAS;IAAzB,CARR;IASLS,UAAU;MAAEpB,MAAMa,MAAR;MAAgBF,SAAS;IAAzB,CATL;IAULU,OAAO;MAAErB,MAAMU,MAAR;MAAgBC,SAAS;IAAzB,CAVF;IAWLW,WAAW;MAAEtB,MAAMiB,OAAR;MAAiBN,SAAS;IAA1B,CAXN;IAYLY,SAAS;MAAEvB,MAAMC;IAAR,CAZJ;IAaLuB,SAAS;MAAExB,MAAMC;IAAR,CAbJ;IAcLwB,WAAW;MAAEzB,MAAMiB,OAAR;MAAiBN,SAAS;IAA1B,CAdN;IAeLe,UAAU;MACR1B,MAAMU,MADE;MAERC,SAAS,WAFD;MAGRgB,WAAYC,KAAD,IAAmB,CAAC,WAAD,EAAc,UAAd,EAA0B,cAA1B,EAA0C,aAA1C,EAAyDC,QAAzD,CAAkED,KAAlE;IAHtB,CAfL;IAoBL7B,QAAQ;MAAEC,MAAMC;IAAR;EApBH,CAJsB;;EA0B7BE,MAAOL,KAAP,EAAc;IAAEgC;EAAF,CAAd,EAAwB;IACtB,MAAMC,cAAcC,YAApB;IAEM;MAAEC;IAAF,IAAeC,WAAf;IAEA;MAAEC;IAAF,IAAwBC,cAAxB;IAEA,gBAAUC,IAAI,KAAJ,CAAV;IAEA,kBAAYC,SAAS,MAAM;MAC/B,OAAOxC,MAAM4B,QAAN,CAAeG,QAAf,CAAwB,OAAxB,IAAmC,OAAnC,GAA6C,MAApD;IACD,CAFiB,CAAZ;IAIA,kBAAYS,SAAS,MAAM;MAC/B,OAAOxC,MAAM4B,QAAN,CAAeG,QAAf,CAAwB,KAAxB,IAAiC,KAAjC,GAAyC,QAAhD;IACD,CAFiB,CAAZ;IAIA,qBAAeS,SAAS,MAAM,CAClCxC,MAAMqB,WAD4B,EAElCrB,MAAM2B,SAAN,GAAkB,qBAAlB,GAA0C,EAFR,CAAf,CAAf;IAKA,oBAAca,SAAS,OAAO;MAClC,CAACC,UAAUX,KAAX,GAAmB,GAAG9B,MAAMc,WADM;MAElC,CAAC4B,UAAUZ,KAAX,GAAmB,GAAG9B,MAAMgB,WAFM;MAGlC2B,iBAAiBR,SAASnC,MAAMuB,KAAf,CAHiB;MAIlCA,OAAOc,kBAAkBP;IAJS,CAAP,CAAT,CAAd;IAOA,wBAAkBU,SAAS,MAAO,OAAOxC,MAAMiB,OAAb,KAAyB,UAAzB,GAAuCjB,MAAMiB,OAAN,EAAvC,GAAyDjB,MAAMiB,OAA/E,CAAlB;;IAEN,MAAM2B,iBAAiB,MAAM;;;MACf,+CAAOC,mBAAP,CAA2B,eAA3B,EAA4CD,cAA5C;MAEZ,kBAAYd,KAAZ,wBAAmBgB,MAAnB;IAA0B,CAH5B;;IAMA,MAAMC,eAAe,MAAM;MACrB,WAAO/C,MAAM0B,OAAb,KAAyB,UAAzB,EAAqC;QACvC1B,MAAM0B,OAAN;MAAc,CADZ,MAEG;QACLM,KAAK,UAAL;MACF;IAAA,CALF;;IAQA,MAAMgB,eAAe,MAAM;;;MACzBC,QAAQnB,KAAR,GAAgB,KAAhB;MAEY,+CAAOoB,gBAAP,CAAwB,eAAxB,EAAyCN,cAAzC;;MAER,WAAO5C,MAAMyB,OAAb,KAAyB,UAAzB,EAAqC;QACvCzB,MAAMyB,OAAN;MAAc,CADZ,MAEG;QACLO,KAAK,UAAL;MACF;IAAA,CATF;;IAYA,MAAMmB,QAAQC,UAAd;IACA,MAAMC,aAAaF,MAAMG,KAAzB;;IACA,MAAMC,aAAa,MAAM;MACnB,UAAMjC,QAAN,GAAiB,CAAjB,EAAoB;QACtB6B,MAAMK,KAAN,CAAY,MAAMP,QAAQnB,KAAR,IAAiBkB,cAAnC,EAAmDhD,MAAMsB,QAAzD;MACF;IAAA,CAHF;;IAMAmC,UAAU,MAAM;MACdR,QAAQnB,KAAR,GAAgB,IAAhB;MAEWyB;IACZ,CAJD;IAMO,SACL,GAAGG,gBADE;MAELT,OAFK;MAGLU,YAHK;MAILC,WAJK;MAKLC,eALK;MAMLd,YANK;MAOLC,YAPK;MAQLO,UARK;MASLF;IATK;EAWT;;AA5G6B,CAAb,CAAlB;;;AA7CW;EAAAS,OAAM;AAAN;;AAGE;EAAAA,OAAM;AAAN;;;;;EAKAA,OAAM;;;;;;;;sBApBjBC,YAqCaC,UArCbD,EAqCa;IArCDhE,MAAK;EAqCJ,CArCbgE,EAAgC;IAAAlD,iBAC9B,MAmCM,gBAnCNoD,mBAmCM,KAnCNA,EAmCM;MAjCJ1B,KAAI,aAiCA;MAhCH2B,MAAMC,YAAO3C,SAAP,GAAgB,aAAhB,GAAgB,OAgCnB;MA/BJsC,OAAKM,eAAC,aACED,KAAYR,YADd,CAADS,CA+BD;MA7BHC,OAAKC,eAAEH,KAAWP,WAAbU,CA6BF;MA5BHC,cAAUC,OAAE,CAAF,MAAEA,oEAAF,CA4BP;MA3BHC,cAAUD,OAAE,CAAF,MAAEA,oEAAF,CA2BP;MA1BH9C,SAAK8C,OAAE,CAAF,MAAEA,wEAAF;IA0BF,CAnCNP,EASU,CAERA,mBAuBM,KAvBNA,cAuBM,CAtBME,YAAOxD,KAAP,IAAO+D,aAAjBC,mBAAwE,IAAxEA,EAAwE;MAAAC;MAAhDd,OAAM,iBAA0C;MAAxBe,6BAAQV,KAAaW,MAAb,CAAOnE,KAAfoE;IAAwB,CAAxEJ,EAAoE,IAApEA,EAAoE,CAApEA,EAAoEK,UAApEL,CAAU,IAA0DM,4BAsBhE,EApBJC,kCAGM,KAHNjB,cAGM,CAFOE,YAAOjD,wBAAP,IAAOwD,aAAlBC,mBAAuE,KAAvEA,EAAuE;MAAAC;MAA3BO,WAAQhB;IAAmB,CAAvEQ,EAAoD,IAApDA,EAAoD,CAApDA,EAAoDS,UAApDT,CAAW,KAAyCU,aACpDV,mBAAqC,GAArCA,EAAqC;MAAAC;MAA3BC,6BAAQV,KAAgBN,eAAxBkB;IAA2B,CAArCJ,EAAiC,IAAjCA,EAAiC,CAAjCA,EAAiCW,UAAjCX,CADW,CAEP,CAHNV,EAEmC,GAFnCA,GAEmC,CAFI,oBAAOhD,OAAP,CAEJ,CAFnCiE,CAoBI,EAfiCf,KAAOW,MAAP,CAAO7E,MAAP,IAAOoF,aAA5CV,mBAEM,KAFNA,cAEM,CADJY,YAA2CC,0BAA3CD,EAA2C;MAAzBtF,QAAQkE,KAAOW,MAAP,CAAO7E;IAAU,CAA3CsF,EAAiC,IAAjCA,EAAiC,CAAjCA,EAAiC,UAAjCA,CACI,CAFNZ,CAAqC,IACFc,4BAc/B,EAVItB,YAAO3C,SAAP,IAAOkD,aADfX,YAUE2B,kBAVF3B,EAUE;MAAAa;MARAd,OAAM,sBAQN;MAPAI,MAAK,QAOL;MANC,cAAYC,KAACwB,CAAD,CAAC,YAAD,CAMb;MALAC,UAAS,GAKT;MAJAC,MAAK,OAIL;MAHC9F,MAAMoE,KAAOW,MAAP,CAAO1D,IAGd;MAFCM,SAAKoE,cAAO3B,KAAYnB,YAAnB8C,EAAmB,QAAnBA,CAEN;MADCC,WAAOC,uBAAa7B,KAAYnB,YAAzBgD,EAAyB,QAAzBA,GAAyB,SAAzBA;IACR,CAVFjC,EASmC,IATnCA,EASmC,CATnCA,EASmC,8CATnCA,CACQ,IAQ2BkB,4BAE/B,CAvBNhB,CAFQ,CATVA,iBAmCMiB,WAlCIf,KAAOlB,SAkCXiC,EApCwBe;;EAAA,CAAhClC","names":["VaToastRenderer","defineComponent","name","props","render","type","Function","required","setup","_sfc_main","components","VaIcon","emits","useComponentPresetProp","title","String","default","offsetY","Number","offsetX","message","dangerouslyUseHtmlString","Boolean","icon","customClass","duration","color","closeable","onClose","onClick","multiLine","position","validator","value","includes","emit","rootElement","shallowRef","getColor","useColors","textColorComputed","useTextColor","ref","computed","positionY","positionX","backgroundColor","destroyElement","removeEventListener","remove","onToastClick","onToastClose","visible","addEventListener","timer","useTimer","clearTimer","clear","startTimer","start","onMounted","useTranslation","toastClasses","toastStyles","computedMessage","class","_createBlock","_Transition","_createElementVNode","role","_ctx","_normalizeClass","style","_normalizeStyle","onMouseenter","_cache","onMouseleave","openBlock","_createElementBlock","key","textContent","$props","_toDisplayString","_hoisted_3","_createCommentVNode","_withDirectives","innerHTML","_hoisted_5","_openBlock","_hoisted_6","_createVNode","_component_VaToastRenderer","createCommentVNode","_component_va_icon","t","tabindex","size","_withModifiers","onKeydown","_withKeys","_withCtx"],"sources":["../../../../../src/components/va-toast/VaToast.vue"],"sourcesContent":["<template>\n  <transition name=\"va-toast-fade\">\n    <div\n      v-show=\"visible\"\n      ref=\"rootElement\"\n      :role=\"$props.closeable ? 'alertdialog' : 'alert'\"\n      class=\"va-toast\"\n      :class=\"toastClasses\"\n      :style=\"toastStyles\"\n      @mouseenter=\"clearTimer\"\n      @mouseleave=\"startTimer\"\n      @click=\"onToastClick\"\n    >\n      <div class=\"va-toast__group\">\n        <h2 v-if=\"$props.title\" class=\"va-toast__title\" v-text=\"$props.title\" />\n\n        <div class=\"va-toast__content\" v-show=\"$props.message\">\n          <div v-if=\"$props.dangerouslyUseHtmlString\" v-html=\"computedMessage\" />\n          <p v-else v-text=\"computedMessage\" />\n        </div>\n\n        <div class=\"va-toast__content\" v-if=\"$props.render\">\n          <VaToastRenderer :render=\"$props.render\" />\n        </div>\n\n        <va-icon\n          v-if=\"$props.closeable\"\n          class=\"va-toast__close-icon\"\n          role=\"button\"\n          :aria-label=\"t('closeToast')\"\n          tabindex=\"0\"\n          size=\"small\"\n          :name=\"$props.icon\"\n          @click.stop=\"onToastClose\"\n          @keydown.enter.stop=\"onToastClose\"\n        />\n      </div>\n    </div>\n  </transition>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType, ref, computed, onMounted, shallowRef } from 'vue'\n\nimport { useComponentPresetProp, useColors, useTimer, useTextColor, useTranslation } from '../../composables'\n\nimport { ToastPosition } from './types'\n\nimport VaIcon from '../va-icon/VaIcon.vue'\n\nconst VaToastRenderer = defineComponent({\n  name: 'VaToastRenderer',\n  props: {\n    render: { type: Function, required: true },\n  },\n  setup: (props) => () => props.render(),\n})\n\nexport default defineComponent({\n  name: 'VaToast',\n  components: { VaIcon, VaToastRenderer },\n  emits: ['on-click', 'on-close'],\n  props: {\n    ...useComponentPresetProp,\n    title: { type: String, default: '' },\n    offsetY: { type: Number, default: 16 },\n    offsetX: { type: Number, default: 16 },\n    message: { type: [String, Function], default: '' },\n    dangerouslyUseHtmlString: { type: Boolean, default: false },\n    icon: { type: String, default: 'close' },\n    customClass: { type: String, default: '' },\n    duration: { type: Number, default: 5000 },\n    color: { type: String, default: '' },\n    closeable: { type: Boolean, default: true },\n    onClose: { type: Function },\n    onClick: { type: Function },\n    multiLine: { type: Boolean, default: false },\n    position: {\n      type: String as PropType<ToastPosition>,\n      default: 'top-right',\n      validator: (value: string) => ['top-right', 'top-left', 'bottom-right', 'bottom-left'].includes(value),\n    },\n    render: { type: Function },\n  },\n  setup (props, { emit }) {\n    const rootElement = shallowRef<HTMLElement>()\n\n    const { getColor } = useColors()\n\n    const { textColorComputed } = useTextColor()\n\n    const visible = ref(false)\n\n    const positionX = computed(() => {\n      return props.position.includes('right') ? 'right' : 'left'\n    })\n\n    const positionY = computed(() => {\n      return props.position.includes('top') ? 'top' : 'bottom'\n    })\n\n    const toastClasses = computed(() => [\n      props.customClass,\n      props.multiLine ? 'va-toast--multiline' : '',\n    ])\n\n    const toastStyles = computed(() => ({\n      [positionY.value]: `${props.offsetY}px`,\n      [positionX.value]: `${props.offsetX}px`,\n      backgroundColor: getColor(props.color),\n      color: textColorComputed.value,\n    }))\n\n    const computedMessage = computed(() => (typeof props.message === 'function') ? props.message() : props.message)\n\n    const destroyElement = () => {\n      rootElement.value?.removeEventListener('transitionend', destroyElement)\n\n      rootElement.value?.remove()\n    }\n\n    const onToastClick = () => {\n      if (typeof props.onClick === 'function') {\n        props.onClick()\n      } else {\n        emit('on-click')\n      }\n    }\n\n    const onToastClose = () => {\n      visible.value = false\n\n      rootElement.value?.addEventListener('transitionend', destroyElement)\n\n      if (typeof props.onClose === 'function') {\n        props.onClose()\n      } else {\n        emit('on-close')\n      }\n    }\n\n    const timer = useTimer()\n    const clearTimer = timer.clear\n    const startTimer = () => {\n      if (props.duration > 0) {\n        timer.start(() => visible.value && onToastClose(), props.duration)\n      }\n    }\n\n    onMounted(() => {\n      visible.value = true\n\n      startTimer()\n    })\n\n    return {\n      ...useTranslation(),\n      visible,\n      toastClasses,\n      toastStyles,\n      computedMessage,\n      onToastClick,\n      onToastClose,\n      startTimer,\n      clearTimer,\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import \"../../styles/resources\";\n@import \"variables\";\n\n.va-toast {\n  position: fixed;\n  box-sizing: border-box;\n  width: var(--va-toast-width);\n  padding: var(--va-toast-padding);\n  display: flex;\n  align-items: center;\n  border-radius: var(--va-toast-border-radius);\n  border: 1px solid var(--va-toast-border-color);\n  background-color: var(--va-toast-background-color);\n  box-shadow: var(--va-toast-box-shadow);\n  transition: var(--va-toast-transition);\n  overflow: hidden;\n  z-index: var(--va-toast-z-index);\n  font-family: var(--va-font-family);\n\n  &--multiline {\n    min-height: 70px;\n  }\n\n  &--right {\n    right: 16px;\n  }\n\n  &--left {\n    left: 16px;\n  }\n\n  &__group {\n    margin-left: var(--va-toast-group-margin-left);\n    margin-right: var(--va-toast-group-margin-right);\n  }\n\n  &__title {\n    font-weight: var(--va-toast-title-font-weight);\n    font-size: var(--va-toast-title-font-size);\n    color: var(--va-toast-title-color);\n    margin: var(--va-toast-title-margin);\n  }\n\n  &__content {\n    font-size: var(--va-toast-content-font-size);\n    line-height: var(--va-toast-content-line-height);\n    padding-right: var(--va-toast-content-padding-right);\n\n    p,\n    div {\n      margin: 0;\n    }\n  }\n\n  &__icon {\n    height: var(--va-toast-icon-height);\n    width: var(--va-toast-icon-width);\n    font-size: var(--va-toast-icon-font-size);\n  }\n\n  &__close-icon {\n    position: absolute;\n    top: 50%;\n    right: var(--va-toast-close-icon-right);\n    cursor: pointer;\n    transform: translateY(-50%);\n    font-size: var(--va-toast-close-icon-font-siz);\n    opacity: 0.7;\n\n    &:hover {\n      opacity: 1;\n    }\n  }\n}\n\n.va-toast-fade-enter {\n  &.right {\n    right: 0;\n    transform: translateX(100%);\n  }\n\n  &.left {\n    left: 0;\n    transform: translateX(-100%);\n  }\n}\n\n.va-toast-fade-leave-active {\n  opacity: 0;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}