{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { Bar } from 'vue-chartjs';\nimport { Chart as ChartJS, Title, ArcElement, Tooltip, Legend, BarElement, CategoryScale, LinearScale, LineElement, PointElement } from 'chart.js';\nimport { Doughnut } from 'vue-chartjs';\nimport { Line as LineM } from 'vue-chartjs';\nChartJS.register(Title, ArcElement, Tooltip, Legend, BarElement, CategoryScale, LinearScale, LineElement, PointElement);\nimport axios from \"axios\";\nexport const RUTA_SERVIDOR_ALUMNOS = process.env.VUE_APP_RUTA_API_ALUMNOS;\nexport const RUTA_SERVIDOR_LIBROS = process.env.VUE_APP_RUTA_API_LIBROS;\nexport default {\n  name: \"ListarEstadisticas\",\n  components: {\n    Bar,\n    Doughnut,\n    LineM // modalPrestamo,\n    // Loading\n    // CrearLibro,\n    // Carousel,\n    // Slide\n\n  },\n\n  data() {\n    return {\n      fechaInicio: \"\",\n      fechaFin: \"\",\n      estado: -1,\n      solicitudes: [],\n      materiales: [],\n      preTitulo: {},\n      solicitudesFiltradas: [],\n      NombreSolicitate: [],\n      busquedaCodigo: \"\",\n      subsede: localStorage.getItem(\"idSubsede\"),\n      acceso: localStorage.getItem(\"acceso\"),\n      chartDataL: {\n        labels: [],\n        datasets: [{\n          backgroundColor: ['#41B883', '#E46651', '#00D8FF', '#DD1B16', '#E412351', '#45D8FF', '#aa1B16'],\n          data: []\n        }]\n      },\n      chartDataP: {\n        labels: [],\n        datasets: [{\n          backgroundColor: ['#41B883', '#E46651', '#00D8FF', '#DD1B16', '#E412351', '#45D8FF', '#aa1B16'],\n          data: []\n        }]\n      },\n      totalesM: 0,\n      totalesD: 0,\n      dataBar: {\n        labels: [],\n        datasets: [{\n          backgroundColor: '#33C4FF',\n          label: [],\n          data: []\n        }, {\n          backgroundColor: '#54FF7E',\n          label: [],\n          data: []\n        }]\n      },\n      chartOptions: {\n        maintainAspectRatio: true,\n        responsive: true,\n        plugins: {\n          chartAreaBorder: {\n            borderColor: 'red',\n            borderWidth: 2,\n            borderDash: [5, 5],\n            borderDashOffset: 2\n          }\n        }\n      },\n      chartOptionsBar: {\n        indexAxis: 'y',\n        maintainAspectRatio: true,\n        responsive: true\n      },\n      //////\n      chartDataMeses: {\n        labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],\n        datasets: [{\n          label: 'Data One',\n          backgroundColor: '#f87979',\n          data: [40, 39, 10, 40, 39, 80, 40]\n        }]\n      },\n      chartOptionsMeses: {\n        responsive: true,\n        maintainAspectRatio: false\n      }\n    };\n  },\n\n  mounted() {\n    this.obtenersolicitudes();\n  },\n\n  methods: {\n    obtenersolicitudes() {\n      fetch(RUTA_SERVIDOR_LIBROS + \"/prestamo/\" + localStorage.getItem(\"idSubsede\")).then(respuesta => respuesta.json()).then(datosRespuesta => {\n        this.solicitudes = datosRespuesta.reverse();\n      }).then(() => {\n        for (let index = 0; index < this.solicitudes.length; index++) {\n          this.asignarNombre(this.solicitudes[index].codigoUsuario, this.solicitudes[index].id);\n        }\n      }).catch(console.log);\n    },\n\n    asignarNombre(codigoAlumnon, index) {\n      if (this.NombreSolicitate[index] == undefined) {\n        fetch(RUTA_SERVIDOR_ALUMNOS + \"/alumno/\" + codigoAlumnon).then(respuesta => respuesta.json()).then(datosRespuesta => {\n          this.filtrarSolicitudes();\n          this.NombreSolicitate[index] = datosRespuesta.nombre + \" \" + datosRespuesta.ap_paterno + \" \" + datosRespuesta.ap_materno;\n        });\n      } else {\n        return;\n      }\n    },\n\n    filtrarSolicitudes() {\n      // Filtrar por estado\n      let solicitudesFiltradas = this.solicitudes.filter(solicitud => {\n        return this.estado == -1 || solicitud.estado === parseInt(this.estado);\n      });\n\n      if (this.fechaInicio !== \"\" && this.fechaFin !== \"\") {\n        solicitudesFiltradas = solicitudesFiltradas.filter(solicitud => {\n          return solicitud.fechaPrestamo >= this.fechaInicio && solicitud.fechaPrestamo <= this.fechaFin;\n        });\n      } // Filtrar por fecha de préstamo si se proporcionan fechas válidas\n\n\n      if (this.fechaInicio !== \"\" && this.fechaFin !== \"\") {\n        solicitudesFiltradas = solicitudesFiltradas.filter(solicitud => {\n          return solicitud.fechaPrestamo >= this.fechaInicio && solicitud.fechaPrestamo <= this.fechaFin;\n        });\n      } // Filtrar por código de usuario (coincidencia parcial)\n\n\n      if (this.busquedaCodigo !== \"\") {\n        solicitudesFiltradas = solicitudesFiltradas.filter(solicitud => {\n          // Comprobar si el código de usuario o el título contiene la cadena de búsqueda\n          return solicitud.codigoUsuario.includes(this.busquedaCodigo) || solicitud.titulo.includes(this.busquedaCodigo);\n        }); // No es necesario repetir el bloque de fecha aquí\n      } else {// Si no hay cadena de búsqueda, mantener los filtros anteriores\n        // (no es necesario cambiar nada aquí)\n      } // El resto del código permanece igual\n\n\n      this.solicitudesFiltradas = solicitudesFiltradas;\n      this.consultarCantidad();\n    },\n\n    consultarCantidad() {\n      this.totalesM = 0;\n      const repetir = {};\n      const nombresUnicos = []; // Un arreglo para almacenar los nombres únicos\n\n      for (let i = 0; i < this.solicitudesFiltradas.length; i++) {\n        const obj = this.solicitudesFiltradas[i];\n        const nombre = obj.titulo;\n\n        if (repetir[nombre]) {\n          repetir[nombre]++;\n        } else {\n          repetir[nombre] = 1;\n          nombresUnicos.push(nombre); // Agregar el nombre único al arreglo\n        }\n\n        this.totalesM++;\n      }\n\n      this.chartDataL.datasets[0].data = [];\n      this.chartDataL.labels = [];\n      this.chartDataL.datasets[0].backgroundColor = [];\n      const coloresAleatorios = this.generarColoresAleatorios(nombresUnicos.length); // Limpia el array de labels antes de agregar el nuevo resultado\n\n      this.chartDataL.labels = nombresUnicos.map(nombre => `${nombre}: ${repetir[nombre]}`); // Almacena los nombres únicos\n\n      this.chartDataL.datasets[0].data = nombresUnicos.map(nombre => repetir[nombre]); // Almacena la cantidad de repeticiones para cada nombre\n\n      this.chartDataL.datasets[0].backgroundColor = coloresAleatorios;\n    },\n\n    generarColoresAleatorios(cantidad) {\n      const colores = [];\n\n      for (let i = 0; i < cantidad; i++) {\n        const r = Math.floor(Math.random() * 100) + 155; // Componente rojo en el rango de 155 a 255\n\n        const g = Math.floor(Math.random() * 100) + 155; // Componente verde en el rango de 155 a 255\n\n        const b = Math.floor(Math.random() * 100) + 155; // Componente azul en el rango de 155 a 255\n\n        const color = `rgb(${r},${g},${b})`;\n        colores.push(color);\n      }\n\n      return colores;\n    }\n\n  }\n};","map":{"version":3,"mappings":";AAgIA;AACA;AACA;AACA;AACAA;AAGA;AACA;AACA;AACA;EACAC,0BADA;EAGAC;IACAC,GADA;IAEAC,QAFA;IAGAC,KAHA,CAKA;IACA;IACA;IACA;IACA;;EATA,CAHA;;EAgBAC;IACA;MAAAC;MACAC,YADA;MAEAC,UAFA;MAGAC,eAHA;MAIAC,cAJA;MAKAC,aALA;MAOAC,wBAPA;MAQAC,oBARA;MASAC,kBATA;MAUAC,0CAVA;MAWAC,sCAXA;MAYAC;QACAC,UADA;QAEAC;UAAAC;UAAAf;QAAA;MAFA,CAZA;MAgBAgB;QACAH,UADA;QAEAC;UAAAC;UAAAf;QAAA;MAFA,CAhBA;MAqBAiB,WArBA;MAsBAC,WAtBA;MAuBAC;QACAN,UADA;QAEAC;UACAC,0BADA;UAEAK,SAFA;UAGApB;QAHA,GAKA;UACAe,0BADA;UAEAK,SAFA;UAGApB;QAHA,CALA;MAFA,CAvBA;MAuCAqB;QACAC,yBADA;QAEAC,gBAFA;QAGAC;UACAC;YACAC,kBADA;YAEAC,cAFA;YAGAC,kBAHA;YAIAC;UAJA;QADA;MAHA,CAvCA;MAmDAC;QACAC,cADA;QAEAT,yBAFA;QAGAC;MAHA,CAnDA;MAyDA;MACAS;QACAnB,SACA,SADA,EAEA,UAFA,EAGA,OAHA,EAIA,OAJA,EAKA,KALA,EAMA,MANA,EAOA,MAPA,CADA;QAUAC,WACA;UACAM,iBADA;UAEAL,0BAFA;UAGAf;QAHA,CADA;MAVA,CA1DA;MA4EAiC;QACAV,gBADA;QAEAD;MAFA;IA5EA;EAiFA,CAlGA;;EAoGAY;IAEA;EAEA,CAxGA;;EA2GAC;IAEAC;MACAC,MACAC,uEADA,EAGAC,IAHA,CAGAC,6BAHA,EAIAD,IAJA,CAIAE;QACA;MACA,CANA,EAOAF,IAPA,CAOA;QACA;UACA,mBACA,qCADA,EAEA,0BAFA;QAIA;MACA,CAdA,EAeAG,KAfA,CAeAC,WAfA;IAgBA,CAnBA;;IAqBAC;MACA;QACAP,0DACAE,IADA,CACAC,6BADA,EAEAD,IAFA,CAEAE;UACA;UACA,+BACAA,wBACA,GADA,GAEAA,yBAFA,GAGA,GAHA,GAIAA,yBALA;QAMA,CAVA;MAWA,CAZA,MAYA;QACA;MACA;IACA,CArCA;;IAuCAI;MACA;MACA;QACA;MACA,CAFA;;MAIA;QACAtC;UACA,OACAuC,+CACAA,wCAFA;QAIA,CALA;MAMA,CAbA,CAcA;;;MACA;QACAvC;UACA,OACAuC,+CACAA,wCAFA;QAIA,CALA;MAMA,CAtBA,CAwBA;;;MACA;QACAvC;UACA;UACA,OACAuC,yDACAA,8CAFA;QAIA,CANA,EADA,CAQA;MACA,CATA,MASA,CACA;QACA;MACA,CArCA,CAuCA;;;MACA;MAEA;IAEA,CAnFA;;IAsFAC;MACA;MAEA;MACA,yBAJA,CAIA;;MAEA;QACA;QACA;;QAEA;UACAC;QACA,CAFA,MAEA;UACAA;UACAC,2BAFA,CAEA;QACA;;QACA;MACA;;MACA;MACA;MACA;MACA,8EArBA,CAuBA;;MACA,sFAxBA,CAwBA;;MACA,gFAzBA,CAyBA;;MAGA;IAEA,CApHA;;IAqHAC;MACA;;MACA;QACA,gDADA,CACA;;QACA,gDAFA,CAEA;;QACA,gDAHA,CAGA;;QAEA;QACAC;MACA;;MAEA;IACA;;EAjIA;AA3GA","names":["ChartJS","name","components","Bar","Doughnut","LineM","data","fechaInicio","fechaFin","estado","solicitudes","materiales","preTitulo","solicitudesFiltradas","NombreSolicitate","busquedaCodigo","subsede","acceso","chartDataL","labels","datasets","backgroundColor","chartDataP","totalesM","totalesD","dataBar","label","chartOptions","maintainAspectRatio","responsive","plugins","chartAreaBorder","borderColor","borderWidth","borderDash","borderDashOffset","chartOptionsBar","indexAxis","chartDataMeses","chartOptionsMeses","mounted","methods","obtenersolicitudes","fetch","RUTA_SERVIDOR_LIBROS","then","respuesta","datosRespuesta","catch","console","asignarNombre","filtrarSolicitudes","solicitud","consultarCantidad","repetir","nombresUnicos","generarColoresAleatorios","colores"],"sourceRoot":"src/components","sources":["ListarEstadisticasSolicitudes.vue"],"sourcesContent":["<template>\n    <div class=\"px-md-5 px-2\">\n <br/>\n    <div class=\"form-group\" align=\"center\">\n      <b-row cols=\"2\">\n        <b-col>\n      <label>Seleccione el estado del prestamo</label>\n      <br/>\n      <select\n        v-model=\"estado\"\n        @change=\"filtrarSolicitudes()\"\n        class=\"custom-select p-1 px-5\"\n        name=\"\"\n        id=\"\"\n        \n      >\n        <option align=\"center\" value=\"-1\">Todos los estados</option>\n        <option align=\"center\" value=\"0\">Solicitud rechazada</option>\n        <option align=\"center\" value=\"1\">Pendiente de respuesta</option>\n        <option align=\"center\" value=\"2\">Solicitud aceptada</option>\n        <option align=\"center\" value=\"3\">Material devuelto</option>\n        <option align=\"center\" value=\"4\">Pendiente de devolucion</option>\n        <option align=\"center\" value=\"5\">Retrasado</option>\n      </select>\n    </b-col>\n      <br/>\n      <b-col>\n      <label>Buscar por codigo</label>\n      <input\n        v-model=\"busquedaCodigo\"\n        @keyup=\"filtrarSolicitudes()\"\n        type=\"text\"\n        class=\"form-control\"\n        placeholder=\"Buscar por Codigo\"\n      />\n    </b-col>\n      </b-row>\n      <br />\n\n      <label>Seleccione el rango de fechas</label><br />\n      <b-row cols=\"2\">\n        <b-col>\n          <input\n            type=\"date\"\n            v-model=\"fechaInicio\"\n            @change=\"filtrarSolicitudes()\"\n            class=\"form-control\"\n            name=\"\"\n            id=\"\"\n          />\n        </b-col>\n        <b-col>\n          <input\n            type=\"date\"\n            v-model=\"fechaFin\"\n            @change=\"filtrarSolicitudes()\"\n            class=\"form-control\"\n            name=\"\"\n            id=\"\"\n          />\n        </b-col>\n      </b-row>\n      <br />\n    </div>\n\n  \n    <button\n      type=\"button\"\n      class=\"btn\"\n      @click=\"imprimirSolicitudes()\"\n    >\n    <img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAACXBIWXMAAAsTAAALEwEAmpwYAAAChklEQVR4nO2Z22vTcBTH+08UrcpASE1SrQ1ug9i5sU1l4pQpE2XTubeBoOANxSdFUcELClNURGhZH0TFMh+com4Im+iDQ0HmEPVBENKbcfSS3tav/H5j6VYzy1zSVsmBz0M5/NJPT8/v5JfWYjGjROFkWafLzvXojcA4dugq6mK4g4KdhyEw3IV/Q9TOw8VwF3UXvSNUYaB6yYIY9t6G/8QhrF3B5WXt/HldRUdqbJBE64JIjY4gfvcWBqttcM+UZfhLFSkqiVZ9ZY0UlfSUNVpU0pAVGP5yRYpKmrLcybKLKk8fINzV9Bsvt9WhlnVMyw6VXfRPsblxQ2WIBltXIrR9zZy0OCqkolIRWljWFIVZ0fmE2aOiuZl4dTyFO9ZBedGvEvNdQ6i9Rt1UyjO/mks88mHi9H4E6peq+fDe5lnrCfLxbv3H0499bfQuQm6FRCTzdRy5eBSh9lqax2QWqbfDSPi9SL56jlxSQebTBwQ3sTQvH+mcWv/4Hl1PkA93GCcaahPoa1KtbOA7Yp4rqujEmQP5Cu5yY1KOQHlyf5ZocKPd2IFfKCq5FyH77QvivuuaopJoRbT3FHKpJP1Q06JkfaB5OYVcwzDRmPcqojfOIvV6EMikae/NJSof65qq4pZVqujMCHfWGyea+TyG9Md3dDNEelpVKWhV9OY55JQEpDqbKkquE+leTwk0LCvBV18ACkSJSC76Ewm/p8w9qiGaHhullU6/f0PbgpxDaS+WUjS0U6SjR+uNCImHHponxPp6IR/dA8m9OD8Fdjcg0d+HQGOVecyDeXAWzRO+1XxmEhY6nvT42XGgCE16zNESM/R/ijoN+rPBVYTVDLt1XqJmWP4ufgGVhSpkgRcCwgAAAABJRU5ErkJggg==\">  </button> \n     <button\n      type=\"button\"\n      class=\"btn\"\n      @click=\"exportarAExcel()\"\n    >\n    <img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAACTUlEQVR4nO2ZW0sUYRjH5xvkRcieRnfNPZhtuTNBalgNaemaRUWQ6a5p2slq14Uyd6edGTpQKBFhRQXiTV0pXnQhEmLuTF/E+h7/eN+VocBK2Tks8v7hf/E+8w48v3kON8NxTExMu1/id61X1NWfoqGhUtc+Tc45DiDo2g8rkieukSXUFKTnjgKIFiVvAjgNIdoB4CSEaBeA7BCErQCyAxC2A8g2QzgCINsI4RiAbBOElQB7n3T/F2JPQVKrFqBpKbMtiNoXfXNVCbATcwxgU6wCBmuhyrRrW2jfs0vgJ07hwMIEPTd/Gqfn2MdRxBey4DOd2D9/8493Di7lUD/VC//YMfivH0d45op7APHFLDypVgQLfRB0FYG7J2liiVUZzZ/vwDN4BLH3I+Z9csc32kEdfTOE6OwQwi8H3F2jDdoFChGe6acJN83fKFdjC4CWr3ka4zNdENaK7rcQTWolD+9wO4Won0ya8a0AiEm1SNw31oHI6xTEkuIuwKEvD+BJt8Gbbit/2ZL6TwBxXaEx/60T9HlIPusigK6i7n4PfMNHEZlNlxN+e/XvAOtK2WQevhURuC3Bm2qls+EKQOzDNZpk5NWgOcQEJrEyZQLU5U4jpJ2nJpspMC6hcbofjdOXaeX4bJdLFSgpCBXPIZg/g8TaI3ONBieTiL4bQXwxR2fid5MVSoaerFf+XicaHl9Ey/JDd2fATnMMYFOsAgZrocrEWshgLVSZWAsZrIWq5xfTdi0Y6gZnlQ7rWo+TEIKhbiRKSrdlAExMTFzV6hfz8wpqDZBppQAAAABJRU5ErkJggg==\">\n    </button>\n    <br />\n    <br /> \n\n\n  \n        <div class=\"row\">\n            <div class=\"col-4\">\n              \n                <div class=\"col-12\">\n                    {{totalesM}}\n                </div>\n                <div class=\"col-12\">\n                    material fisico Total\n                </div>\n            </div>\n        </div>\n\n\n\n      <div class=\"row\">\n  \n        <div class=\"col-sm-6 col-md-6\">\n          <div align=\"center\">Prestamos totales : {{totalesM}}</div>\n          <Doughnut \n          v-if=\"chartDataL.labels.length\"\n          id=\"my-chart-id\"\n          :options=\"chartOptions\"\n          :data=\"chartDataL\"\n          \n          />\n        </div>\n        \n        <div class=\"col-6\">\n          <LineM\n    :chart-options=\"chartOptionsMeses\"\n    :chart-data=\"chartDataMeses\" \n    \n    \n  />\n        </div>\n      \n        \n        \n      </div>\n    </div>\n    </template>\n\n    <script>\n\nimport { Bar } from 'vue-chartjs'\nimport { Chart as ChartJS,Title, ArcElement, Tooltip, Legend,BarElement, CategoryScale, LinearScale,  LineElement, PointElement } from 'chart.js'\nimport { Doughnut } from 'vue-chartjs'\nimport { Line as LineM } from 'vue-chartjs'\nChartJS.register(Title, ArcElement, Tooltip, Legend, BarElement, CategoryScale, LinearScale,LineElement, PointElement)\n\n\nimport axios from \"axios\";\nexport const RUTA_SERVIDOR_ALUMNOS = process.env.VUE_APP_RUTA_API_ALUMNOS;\nexport const RUTA_SERVIDOR_LIBROS = process.env.VUE_APP_RUTA_API_LIBROS;\nexport default {\n  name: \"ListarEstadisticas\",\n\n  components: {\n    Bar,\n    Doughnut,\n    LineM\n\n    // modalPrestamo,\n    // Loading\n    // CrearLibro,\n    // Carousel,\n    // Slide\n  },\n\n\n  data() {\n    return {fechaInicio: \"\",\n      fechaFin: \"\",\n      estado: -1,\n      solicitudes: [],\n      materiales: [],\n      preTitulo: {},\n\n      solicitudesFiltradas: [],\n      NombreSolicitate: [],\n      busquedaCodigo: \"\",\n        subsede:localStorage.getItem(\"idSubsede\"),\n        acceso: localStorage.getItem(\"acceso\"),\n        chartDataL: {\n        labels: [],\n        datasets: [ {backgroundColor: ['#41B883', '#E46651', '#00D8FF', '#DD1B16','#E412351', '#45D8FF', '#aa1B16'], data: [] } ]\n      },\n      chartDataP: {\n        labels: [],\n        datasets: [ {backgroundColor: ['#41B883', '#E46651', '#00D8FF', '#DD1B16','#E412351', '#45D8FF', '#aa1B16'], data: [] } ]\n      },\n\n      totalesM:0,\n      totalesD:0,\n      dataBar:{\n        labels: [],\n        datasets: [{\n          backgroundColor: '#33C4FF',\n        label: [],\n        data:[]\n      },\n      {\n        backgroundColor: '#54FF7E',\n        label: [],\n        data:[]\n      },\n      \n    ],\n      },\n      \n      chartOptions: {\n        maintainAspectRatio: true,\n        responsive: true,\n        plugins: {\n      chartAreaBorder: {\n        borderColor: 'red',\n        borderWidth: 2,\n        borderDash: [5, 5],\n        borderDashOffset: 2,\n      }\n    }\n      },\n      chartOptionsBar: {\n        indexAxis: 'y',\n        maintainAspectRatio: true,\n        responsive: true\n\n      },\n     //////\n     chartDataMeses: {\n        labels: [\n          'January',\n          'February',\n          'March',\n          'April',\n          'May',\n          'June',\n          'July'\n        ],\n        datasets: [\n          {\n            label: 'Data One',\n            backgroundColor: '#f87979',\n            data: [40, 39, 10, 40, 39, 80, 40]\n          }\n        ]\n      },\n      chartOptionsMeses: {\n        responsive: true,\n        maintainAspectRatio: false\n      }\n    }\n  },\n  \n  mounted() {\n    \n    this.obtenersolicitudes();\n   \n  },\n\n\n  methods: {\n\n    obtenersolicitudes() {\n      fetch(\n        RUTA_SERVIDOR_LIBROS + \"/prestamo/\" + localStorage.getItem(\"idSubsede\")\n      )\n        .then((respuesta) => respuesta.json())\n        .then((datosRespuesta) => {\n          this.solicitudes = datosRespuesta.reverse();\n        })\n        .then(() => {\n          for (let index = 0; index < this.solicitudes.length; index++) {\n            this.asignarNombre(\n              this.solicitudes[index].codigoUsuario,\n              this.solicitudes[index].id\n            );\n          }\n        })\n        .catch(console.log);\n    },\n\n    asignarNombre(codigoAlumnon, index) {\n      if (this.NombreSolicitate[index] == undefined) {\n        fetch(RUTA_SERVIDOR_ALUMNOS + \"/alumno/\" + codigoAlumnon)\n          .then((respuesta) => respuesta.json())\n          .then((datosRespuesta) => {\n            this.filtrarSolicitudes();\n            this.NombreSolicitate[index] =\n              datosRespuesta.nombre +\n              \" \" +\n              datosRespuesta.ap_paterno +\n              \" \" +\n              datosRespuesta.ap_materno;\n          });\n      } else {\n        return;\n      }\n    },\n\n    filtrarSolicitudes() {\n      // Filtrar por estado\n      let solicitudesFiltradas = this.solicitudes.filter((solicitud) => {\n        return this.estado == -1 || solicitud.estado === parseInt(this.estado);\n      });\n\n      if (this.fechaInicio !== \"\" && this.fechaFin !== \"\") {\n        solicitudesFiltradas = solicitudesFiltradas.filter((solicitud) => {\n          return (\n            solicitud.fechaPrestamo >= this.fechaInicio &&\n            solicitud.fechaPrestamo <= this.fechaFin\n          );\n        });\n      }\n      // Filtrar por fecha de préstamo si se proporcionan fechas válidas\n      if (this.fechaInicio !== \"\" && this.fechaFin !== \"\") {\n        solicitudesFiltradas = solicitudesFiltradas.filter((solicitud) => {\n          return (\n            solicitud.fechaPrestamo >= this.fechaInicio &&\n            solicitud.fechaPrestamo <= this.fechaFin\n          );\n        });\n      }\n     \n      // Filtrar por código de usuario (coincidencia parcial)\n      if (this.busquedaCodigo !== \"\") {\n  solicitudesFiltradas = solicitudesFiltradas.filter((solicitud) => {\n    // Comprobar si el código de usuario o el título contiene la cadena de búsqueda\n    return (\n      solicitud.codigoUsuario.includes(this.busquedaCodigo) ||\n      solicitud.titulo.includes(this.busquedaCodigo)\n    );\n  });\n  // No es necesario repetir el bloque de fecha aquí\n} else {\n  // Si no hay cadena de búsqueda, mantener los filtros anteriores\n  // (no es necesario cambiar nada aquí)\n}\n\n// El resto del código permanece igual\nthis.solicitudesFiltradas = solicitudesFiltradas;\n\nthis.consultarCantidad()\n\n},\n    \n\nconsultarCantidad() {\n  this.totalesM=0\n  \n    const repetir = {};\n    const nombresUnicos = []; // Un arreglo para almacenar los nombres únicos\n\nfor (let i = 0; i < this.solicitudesFiltradas.length; i++) {\n  const obj = this.solicitudesFiltradas[i];\n  const nombre = obj.titulo;\n\n  if (repetir[nombre]) {\n    repetir[nombre]++;\n  } else {\n    repetir[nombre] = 1;\n    nombresUnicos.push(nombre); // Agregar el nombre único al arreglo\n  }\n  this.totalesM++\n}\nthis.chartDataL.datasets[0].data=[]\n  this.chartDataL.labels=[]\n  this.chartDataL.datasets[0].backgroundColor = []\nconst coloresAleatorios = this.generarColoresAleatorios(nombresUnicos.length);\n\n// Limpia el array de labels antes de agregar el nuevo resultado\nthis.chartDataL.labels = nombresUnicos.map(nombre =>`${nombre}: ${repetir[nombre]}`) // Almacena los nombres únicos\nthis.chartDataL.datasets[0].data  = nombresUnicos.map(nombre =>repetir[nombre]); // Almacena la cantidad de repeticiones para cada nombre\n\n \nthis.chartDataL.datasets[0].backgroundColor = coloresAleatorios;\n\n},\n generarColoresAleatorios(cantidad) {\n  const colores = [];\n  for (let i = 0; i < cantidad; i++) {\n    const r = Math.floor(Math.random() * 100) + 155; // Componente rojo en el rango de 155 a 255\n    const g = Math.floor(Math.random() * 100) + 155; // Componente verde en el rango de 155 a 255\n    const b = Math.floor(Math.random() * 100) + 155; // Componente azul en el rango de 155 a 255\n\n    const color = `rgb(${r},${g},${b})`;\n    colores.push(color);\n  }\n\n  return colores;\n}\n    \n  }\n\n}\n\n\n\n\n\n    </script>\n"]},"metadata":{},"sourceType":"module"}