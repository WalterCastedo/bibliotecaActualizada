{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n//import Vue from 'vue'\nexport const RUTA_SERVIDOR_ALUMNOS = process.env.VUE_APP_RUTA_API_ALUMNOS;\nexport const RUTA_SERVIDOR_LIBROS = process.env.VUE_APP_RUTA_API_LIBROS;\nexport default {\n  name: \"loginComponent\",\n\n  data() {\n    return {\n      usuario: {\n        cod_alum: \"\",\n        ci_pasaporte: \"\",\n        carrera: \"\",\n        facultad: \"\",\n        subsede: \"\"\n      }\n    };\n  },\n\n  methods: {\n    login() {\n      fetch(RUTA_SERVIDOR_ALUMNOS + \"/alumno/\" + this.usuario.cod_alum + \"/\" + this.usuario.ci_pasaporte).then(respuesta => respuesta.json()).then(datosRespuesta => {\n        if (datosRespuesta != \"\") {\n          localStorage.setItem(\"acceso\", 1);\n          localStorage.setItem(\"cod_alum\", datosRespuesta.cod_alum);\n          localStorage.setItem(\"ci_pasaporte\", datosRespuesta.ci_pasaporte);\n          localStorage.setItem(\"nombre\", datosRespuesta.nombre);\n          localStorage.setItem(\"ap_paterno\", datosRespuesta.ap_paterno);\n          localStorage.setItem(\"ap_materno\", datosRespuesta.ap_materno);\n          localStorage.setItem(\"sede\", datosRespuesta.sede);\n          localStorage.setItem(\"id\", 0);\n          this.usuario.carrera = datosRespuesta.id_carrera;\n        }\n      }).then(() => {\n        fetch(RUTA_SERVIDOR_ALUMNOS + \"/carrera/\" + this.usuario.carrera).then(respuesta => respuesta.json()).then(datosRespuesta => {\n          this.usuario.facultad = datosRespuesta[0].id_facultad;\n        }).then(() => {\n          fetch(RUTA_SERVIDOR_ALUMNOS + \"/facultad/\" + this.usuario.facultad).then(respuesta => respuesta.json()).then(datosRespuesta => {\n            this.usuario.subsede = datosRespuesta[0].id_subsede;\n          }).then(() => {\n            fetch(RUTA_SERVIDOR_ALUMNOS + \"/subsede/\" + this.usuario.subsede).then(respuesta => respuesta.json()).then(datosRespuesta => {\n              console.log(datosRespuesta);\n              localStorage.setItem(\"idCarrera\", this.usuario.carrera);\n              localStorage.setItem(\"idFacultad\", this.usuario.facultad);\n              localStorage.setItem(\"idSubsede\", datosRespuesta[0].id);\n              localStorage.setItem(\"Subsede\", datosRespuesta[0].subsede);\n            }).then(() => {\n              location.reload();\n              this.$router.push({\n                name: \"libros\"\n              });\n            });\n          });\n        });\n      }).catch(fetch(RUTA_SERVIDOR_LIBROS + \"/empleado/\" + this.usuario.cod_alum + \"/\" + this.usuario.ci_pasaporte).then(respuesta => respuesta.json()).then(datosRespuesta => {\n        if (datosRespuesta != \"\") {\n          localStorage.setItem(\"acceso\", 2);\n          localStorage.setItem(\"cod_alum\", datosRespuesta.cod_alum);\n          localStorage.setItem(\"ci_pasaporte\", datosRespuesta.ci_pasaporte);\n          localStorage.setItem(\"nombre\", datosRespuesta.nombre);\n          localStorage.setItem(\"ap_paterno\", datosRespuesta.ap_paterno);\n          localStorage.setItem(\"ap_materno\", datosRespuesta.ap_materno);\n          localStorage.setItem(\"sede\", datosRespuesta.sede);\n          localStorage.setItem(\"idSubsede\", datosRespuesta.idSubsede);\n          localStorage.setItem(\"id\", datosRespuesta.id);\n        }\n      }).then(() => {\n        fetch(RUTA_SERVIDOR_ALUMNOS + \"/subsede/\" + localStorage.getItem(\"idSubsede\")).then(respuesta => respuesta.json()).then(datosRespuesta => {\n          localStorage.setItem(\"Subsede\", datosRespuesta[0].subsede);\n        }).then(() => {\n          location.reload();\n          this.$router.push({\n            name: \"libros\"\n          });\n        });\n      }).catch(console.log));\n    }\n\n  }\n};","map":{"version":3,"mappings":";AAmFA;AACA;AACA;AAEA;EACAA,sBADA;;EAEAC;IACA;MACAC;QACAC,YADA;QAEAC,gBAFA;QAGAC,WAHA;QAIAC,YAJA;QAKAC;MALA;IADA;EASA,CAZA;;EAcAC;IACAC;MACAC,MACAC,qCACA,qBADA,GAEA,GAFA,GAGA,yBAJA,EAMAC,IANA,CAMAC,6BANA,EAOAD,IAPA,CAOAE;QACA;UACAC;UACAA;UACAA;UACAA;UACAA;UACAA;UACAA;UACAA;UACA;QAEA;MACA,CApBA,EAoBAH,IApBA,CAoBA;QACAF,MACAC,sCACA,oBAFA,EAGAC,IAHA,CAGAC,6BAHA,EAIAD,IAJA,CAIAE;UAEA;QACA,CAPA,EAOAF,IAPA,CAOA;UACAF,MACAC,uCACA,qBAFA,EAGAC,IAHA,CAGAC,6BAHA,EAIAD,IAJA,CAIAE;YACA;UACA,CANA,EAOAF,IAPA,CAOA;YACAF,MACAC,sCACA,oBAFA,EAGAC,IAHA,CAGAC,6BAHA,EAIAD,IAJA,CAIAE;cACAE;cACAD;cACAA;cACAA;cACAA;YAGA,CAZA,EAaAH,IAbA,CAaA;cACAK;cACA;gBAAAjB;cAAA;YACA,CAhBA;UAkBA,CA1BA;QA2BA,CAnCA;MAsCA,CA3DA,EA6DAkB,KA7DA,CA8DAR,MACAS,sCACA,qBADA,GAEA,GAFA,GAGA,yBAJA,EAMAP,IANA,CAMAC,6BANA,EAOAD,IAPA,CAOAE;QACA;UACAC;UACAA;UACAA;UACAA;UACAA;UACAA;UACAA;UACAA;UACAA;QAGA;MACA,CArBA,EAqBAH,IArBA,CAqBA;QACAF,MACAC,sCACAI,iCAFA,EAGAH,IAHA,CAGAC,6BAHA,EAIAD,IAJA,CAIAE;UAEAC;QAGA,CATA,EAUAH,IAVA,CAUA;UACAK;UACA;YAAAjB;UAAA;QACA,CAbA;MAeA,CArCA,EAsCAkB,KAtCA,CAsCAF,WAtCA,CA9DA;IAuGA;;EAzGA;AAdA","names":["name","data","usuario","cod_alum","ci_pasaporte","carrera","facultad","subsede","methods","login","fetch","RUTA_SERVIDOR_ALUMNOS","then","respuesta","datosRespuesta","localStorage","console","location","catch","RUTA_SERVIDOR_LIBROS"],"sourceRoot":"src/components","sources":["loginComponent.vue"],"sourcesContent":["<template>\n  <div>\n    <div class=\"container m-5\" >\n      <div class=\"todo\">\n        <div class=\"user_card\">\n          <div class=\"d-flex justify-content-center\">\n            <div class=\"brand_logo_container\">\n              <img\n                src=\"../img/image.webp\"\n                class=\"brand_logo\"\n                alt=\"Logo\"\n              />\n            </div>\n          </div>\n          <div class=\"d-flex justify-content-center form_container\">\n            <form v-on:submit.prevent=\"login\" class=\"col-sm-9\">\n              <div class=\"input-group mb-3\">\n                <div class=\"input-group-append\">\n                  <span class=\"input-group-text\"\n                    ><svg\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      width=\"16\"\n                      height=\"16\"\n                      fill=\"currentColor\"\n                      class=\"bi bi-person-circle\"\n                      viewBox=\"0 0 16 16\"\n                    >\n                      <path d=\"M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z\" />\n                      <path\n                        fill-rule=\"evenodd\"\n                        d=\"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z\"\n                      /></svg>\n                      </span>\n                </div>\n                <input\n                  v-model=\"usuario.cod_alum\"\n                  type=\"text\"\n                  name=\"cod_alum\"\n                  class=\"form-control input_user\"\n                  value=\"\"\n                  placeholder=\"Codigo de Alumno\"\n                />\n              </div>\n              <div class=\"input-group mb-2\">\n                <div class=\"input-group-append\">\n                  <span class=\"input-group-text\"\n                    ><svg\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      width=\"16\"\n                      height=\"16\"\n                      fill=\"currentColor\"\n                      class=\"bi bi-key-fill\"\n                      viewBox=\"0 0 16 16\"\n                    >\n                      <path\n                        d=\"M3.5 11.5a3.5 3.5 0 1 1 3.163-5H14L15.5 8 14 9.5l-1-1-1 1-1-1-1 1-1-1-1 1H6.663a3.5 3.5 0 0 1-3.163 2zM2.5 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2z\"/></svg></span>\n                </div>\n                <input\n                  v-model=\"usuario.ci_pasaporte\"\n                  type=\"password\"\n                  name=\"ca\"\n                  class=\"form-control input_pass\"\n                  value=\"\"\n                  placeholder=\"Ci/Password\"\n                />\n              </div>\n\n              <div class=\"d-flex justify-content-center mt-3 login_container\">\n                <button text=\"Iniciar sesión\" id=\"login\" type=\"submit\" name=\"button\" class=\"btn login_btn mt-4\">\n                  Iniciar sesión\n                </button>\n              </div>\n            </form>\n          </div>\n\n          <div class=\"mt-4\"></div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n//import Vue from 'vue'\nexport const RUTA_SERVIDOR_ALUMNOS = process.env.VUE_APP_RUTA_API_ALUMNOS;\nexport const RUTA_SERVIDOR_LIBROS = process.env.VUE_APP_RUTA_API_LIBROS;\n\nexport default {\n  name: \"loginComponent\",\n  data() {\n    return {\n      usuario: {\n        cod_alum: \"\",\n        ci_pasaporte: \"\",\n        carrera: \"\",\n        facultad: \"\",\n        subsede: \"\",\n      },\n    };\n  },\n\n  methods: {\n    login() {\n      fetch(\n        RUTA_SERVIDOR_ALUMNOS+\"/alumno/\" +\n          this.usuario.cod_alum +\n          \"/\" +\n          this.usuario.ci_pasaporte\n      )\n        .then((respuesta) => respuesta.json())\n        .then((datosRespuesta) => {\n          if (datosRespuesta != \"\") {\n            localStorage.setItem(\"acceso\", 1);\n            localStorage.setItem(\"cod_alum\", datosRespuesta.cod_alum);\n            localStorage.setItem(\"ci_pasaporte\", datosRespuesta.ci_pasaporte);\n            localStorage.setItem(\"nombre\", datosRespuesta.nombre);\n            localStorage.setItem(\"ap_paterno\", datosRespuesta.ap_paterno);\n            localStorage.setItem(\"ap_materno\", datosRespuesta.ap_materno);\n            localStorage.setItem(\"sede\", datosRespuesta.sede);\n            localStorage.setItem(\"id\", 0);\n            this.usuario.carrera = datosRespuesta.id_carrera;\n           \n          }\n        }).then(() => {\n          fetch(\n            RUTA_SERVIDOR_ALUMNOS+\"/carrera/\" +\n          this.usuario.carrera )\n            .then((respuesta) => respuesta.json())\n            .then((datosRespuesta) => {\n              \n              this.usuario.facultad = datosRespuesta[0].id_facultad;\n            }) .then(() => {\n          fetch(\n            RUTA_SERVIDOR_ALUMNOS+\"/facultad/\" +\n          this.usuario.facultad )\n            .then((respuesta) => respuesta.json())\n            .then((datosRespuesta) => {\n              this.usuario.subsede = datosRespuesta[0].id_subsede;\n            })\n            .then(() => {\n          fetch(\n            RUTA_SERVIDOR_ALUMNOS+\"/subsede/\" +\n          this.usuario.subsede )\n            .then((respuesta) => respuesta.json())\n            .then((datosRespuesta) => {\n              console.log(datosRespuesta);\n              localStorage.setItem(\"idCarrera\", this.usuario.carrera);\n              localStorage.setItem(\"idFacultad\", this.usuario.facultad);\n              localStorage.setItem(\"idSubsede\", datosRespuesta[0].id);\n              localStorage.setItem(\"Subsede\", datosRespuesta[0].subsede);\n             \n              \n            })\n            .then(() => {\n              location.reload();\n              this.$router.push({ name: \"libros\" }); \n            })\n            \n        })\n        })\n        \n            \n        })\n        \n        .catch(\n          fetch(\n        RUTA_SERVIDOR_LIBROS+\"/empleado/\" +\n          this.usuario.cod_alum +\n          \"/\" +\n          this.usuario.ci_pasaporte\n      )\n        .then((respuesta) => respuesta.json())\n        .then((datosRespuesta) => {\n          if (datosRespuesta != \"\") {\n            localStorage.setItem(\"acceso\", 2);\n            localStorage.setItem(\"cod_alum\", datosRespuesta.cod_alum);\n            localStorage.setItem(\"ci_pasaporte\", datosRespuesta.ci_pasaporte);\n            localStorage.setItem(\"nombre\", datosRespuesta.nombre);\n            localStorage.setItem(\"ap_paterno\", datosRespuesta.ap_paterno);\n            localStorage.setItem(\"ap_materno\", datosRespuesta.ap_materno);\n            localStorage.setItem(\"sede\", datosRespuesta.sede);\n            localStorage.setItem(\"idSubsede\", datosRespuesta.idSubsede);\n            localStorage.setItem(\"id\", datosRespuesta.id);\n             \n           \n          }\n        }).then(() => {\n          fetch(\n            RUTA_SERVIDOR_ALUMNOS+\"/subsede/\" +\n          localStorage.getItem(\"idSubsede\"))\n            .then((respuesta) => respuesta.json())\n            .then((datosRespuesta) => {\n             \n              localStorage.setItem(\"Subsede\", datosRespuesta[0].subsede);\n             \n              \n            })\n            .then(() => {\n              location.reload();\n              this.$router.push({ name: \"libros\" }); \n            })\n            \n        })\n        .catch(console.log)\n        );\n        \n    },\n  },\n};\n</script>\n\n<style>\n.container{\n  position: relative;\n}\n.todo{\n  width: 50px;\n  height: 50px;\n  /* centrar vertical y horizontalmente */\n  position: absolute;\n  top: 50%;\n  left: 60%;\n  margin: -25px 0 0 -25px;\n}\n\n\n.user_card {\n  height: 400px;\n  width: 350px;\n  margin-top: auto;\n  margin-bottom: auto;\n  background: rgb(51, 92, 116);\n  position: relative;\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n \n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n  -webkit-box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2),\n    0 6px 20px 0 rgba(0, 0, 0, 0.19);\n  -moz-box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2),\n    0 6px 20px 0 rgba(0, 0, 0, 0.19);\n  border-radius: 5px;\n}\n.brand_logo_container {\n  position: absolute;\n  height: 170px;\n  width: 170px;\n  top: -75px;\n  border-radius: 50%;\n  background: #074366;\n  padding: 10px;\n  text-align: center;\n}\n.brand_logo {\n  height: 150px;\n  width: 150px;\n  border-radius: 50%;\n  border: 2px solid white;\n}\n.form_container {\n  margin-top: 100px;\n}\n.login_btn {\n  width: 100%;\n  background: #074366 !important;\n  color: white !important;\n}\n.login_btn:focus {\n  box-shadow: none !important;\n  outline: 0px !important;\n}\n.login_container {\n  padding: 0 2rem;\n}\n.input-group-text {\n  background: #074366 !important;\n  color: white !important;\n  border: 0 !important;\n  border-radius: 0.25rem 0 0 0.25rem !important;\n  height: 100%;\n}\n.input_user,\n.input_pass:focus {\n  box-shadow: none !important;\n  outline: 0px !important;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}