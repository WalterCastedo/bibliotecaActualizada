{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { Bar } from 'vue-chartjs';\nimport { Chart as ChartJS, Title, ArcElement, Tooltip, Legend, BarElement, CategoryScale, LinearScale } from 'chart.js';\nimport { Doughnut } from 'vue-chartjs';\nChartJS.register(Title, ArcElement, Tooltip, Legend, BarElement, CategoryScale, LinearScale);\nexport const RUTA_SERVIDOR_ALUMNOS = process.env.VUE_APP_RUTA_API_ALUMNOS;\nexport const RUTA_SERVIDOR_LIBROS = process.env.VUE_APP_RUTA_API_LIBROS;\nexport default {\n  name: \"ListarEstadisticas\",\n  components: {\n    Bar,\n    Doughnut // modalPrestamo,\n    // Loading\n    // CrearLibro,\n    // Carousel,\n    // Slide\n\n  },\n\n  data() {\n    return {\n      chartDataL: {\n        labels: [],\n        datasets: [{\n          backgroundColor: ['#41B883', '#E46651', '#00D8FF', '#DD1B16', '#E412351', '#45D8FF', '#aa1B16'],\n          data: []\n        }]\n      },\n      chartDataP: {\n        labels: [],\n        datasets: [{\n          backgroundColor: ['#41B883', '#E46651', '#00D8FF', '#DD1B16', '#E412351', '#45D8FF', '#aa1B16'],\n          data: []\n        }]\n      },\n      totalesL: 0,\n      totalesD: 0,\n      dataBar: {\n        labels: [],\n        datasets: [{\n          backgroundColor: '#33C4FF',\n          label: [],\n          data: []\n        }, {\n          backgroundColor: '#54FF7E',\n          label: [],\n          data: []\n        }]\n      },\n      chartOptions: {\n        maintainAspectRatio: true,\n        responsive: true\n      }\n    };\n  },\n\n  async mounted() {\n    await this.consultarCantidad();\n  },\n\n  methods: {\n    consultarCantidad() {\n      fetch(RUTA_SERVIDOR_LIBROS + \"/cantidadLibros/\" + this.subsede).then(respuesta => respuesta.json()).then(datosRespuesta => {\n        if (typeof datosRespuesta[0].success === \"undefined\") {\n          for (let index = 0; index < datosRespuesta[1].length; index++) {\n            this.chartDataL.labels.push(datosRespuesta[1][index][0] + ' : ' + datosRespuesta[1][index][1]);\n            this.chartDataL.datasets[0].data.push(datosRespuesta[1][index][1]);\n            this.totalesL += datosRespuesta[1][index][1];\n            this.totalesD += datosRespuesta[2][index][1];\n            this.dataBar.labels.push(datosRespuesta[1][index][0]);\n            this.dataBar.datasets[0].data.push(datosRespuesta[1][index][1]);\n            this.dataBar.datasets[1].data.push(datosRespuesta[2][index][1]);\n          } // this.data.labels.push(datosRespuesta[1][index][0]+ ' : '+datosRespuesta[1][index][1] )\n\n\n          for (let index = 0; index < datosRespuesta[0].length; index++) {\n            this.chartDataP.labels.push(datosRespuesta[0][index][0] + ' : ' + datosRespuesta[0][index][1]);\n            this.chartDataP.datasets[0].data.push(datosRespuesta[0][index][1]);\n          }\n        }\n\n        this.dataBar.datasets[0].label.push('Libros Totales : ' + this.totalesL);\n        this.dataBar.datasets[1].label.push('Libros Disponibles : ' + this.totalesD);\n      }).catch(console.log);\n    }\n\n  }\n};","map":{"version":3,"mappings":";AAwCA;AACA;AACA;AACAA;AACA;AACA;AAEA;EACAC,0BADA;EAGAC;IACAC,GADA;IAEAC,QAFA,CAGA;IACA;IACA;IACA;IACA;;EAPA,CAHA;;EAaAC;IACA;MACAC;QACAC,UADA;QAEAC;UAAAC;UAAAJ;QAAA;MAFA,CADA;MAKAK;QACAH,UADA;QAEAC;UAAAC;UAAAJ;QAAA;MAFA,CALA;MAUAM,WAVA;MAWAC,WAXA;MAYAC;QACAN,UADA;QAEAC;UACAC,0BADA;UAEAK,SAFA;UAGAT;QAHA,GAKA;UACAI,0BADA;UAEAK,SAFA;UAGAT;QAHA,CALA;MAFA,CAZA;MA2BAU;QACAC,yBADA;QAEAC;MAFA;IA3BA;EAiCA,CA/CA;;EAgDA;IAEA;EAGA,CArDA;;EAuDAC;IACAC;MACAC,gEACAC,IADA,CACAC,6BADA,EAEAD,IAFA,CAEAE;QAEA;UAEA;YACA;YACA;YAGA;YACA;YACA;YAGA;YACA;UACA,CAdA,CAeA;;;UACA;YACA;YACA;UAEA;QAAA;;QACA;QACA;MAEA,CA5BA,EA6BAC,KA7BA,CA6BAC,WA7BA;IA8BA;;EAhCA;AAvDA","names":["ChartJS","name","components","Bar","Doughnut","data","chartDataL","labels","datasets","backgroundColor","chartDataP","totalesL","totalesD","dataBar","label","chartOptions","maintainAspectRatio","responsive","methods","consultarCantidad","fetch","then","respuesta","datosRespuesta","catch","console"],"sourceRoot":"src/components","sources":["ListarEstadisticas.vue"],"sourcesContent":["<template>\n\n    <div class=\"align-items-center \" >\n  \n      <div class=\"row\">\n  \n        <div class=\"col-sm-12 col-md-3\">\n          <div align=\"center\">Libros Fisicos : {{totalesL}}</div>\n          <Doughnut \n          v-if=\"chartDataL.labels.length\"\n          id=\"my-chart-id\"\n          :options=\"chartOptions\"\n          :data=\"chartDataL\"\n          \n          />\n        </div>\n        <div class=\"col-sm-12 col-md-3\">\n          <div align=\"center\">Libros Virtuales</div>\n          <Doughnut \n          v-if=\"chartDataP.labels.length\"\n          id=\"my-chart-id\"\n          :options=\"chartOptions\"\n          :data=\"chartDataP\"\n          \n          />\n        </div>\n      \n        <div  v-if=\"dataBar.datasets[0].data.length\" class=\"col-sm-12 col-md-6\">\n          <div align=\"center\">Libros Totales / Disponible</div>\n          <Bar\n  \n      :options=\"chartOptions\"\n      :data=\"dataBar\"\n    />\n        </div>\n      </div>\n    </div>\n    </template>\n    <script>\n\nimport { Bar } from 'vue-chartjs'\nimport { Chart as ChartJS,Title, ArcElement, Tooltip, Legend,BarElement, CategoryScale, LinearScale } from 'chart.js'\nimport { Doughnut } from 'vue-chartjs'\nChartJS.register(Title, ArcElement, Tooltip, Legend, BarElement, CategoryScale, LinearScale)\nexport const RUTA_SERVIDOR_ALUMNOS = process.env.VUE_APP_RUTA_API_ALUMNOS;\nexport const RUTA_SERVIDOR_LIBROS = process.env.VUE_APP_RUTA_API_LIBROS;\n\nexport default {\n  name: \"ListarEstadisticas\",\n\n  components: {\n    Bar,\n    Doughnut,\n    // modalPrestamo,\n    // Loading\n    // CrearLibro,\n    // Carousel,\n    // Slide\n  },\n\n  data() {\n    return {\n        chartDataL: {\n        labels: [],\n        datasets: [ {backgroundColor: ['#41B883', '#E46651', '#00D8FF', '#DD1B16','#E412351', '#45D8FF', '#aa1B16'], data: [] } ]\n      },\n      chartDataP: {\n        labels: [],\n        datasets: [ {backgroundColor: ['#41B883', '#E46651', '#00D8FF', '#DD1B16','#E412351', '#45D8FF', '#aa1B16'], data: [] } ]\n      },\n\n      totalesL:0,\n      totalesD:0,\n      dataBar:{\n        labels: [],\n        datasets: [{\n          backgroundColor: '#33C4FF',\n        label: [],\n        data:[]\n      },\n      {\n        backgroundColor: '#54FF7E',\n        label: [],\n        data:[]\n      },\n    ],\n      },\n      \n      chartOptions: {\n        maintainAspectRatio: true,\n        responsive: true\n      }\n     \n    }\n  },\n  async mounted() {\n   \n   await  this.consultarCantidad();\n     \n    \n  },\n\n  methods: {\n    consultarCantidad() {\n      fetch(RUTA_SERVIDOR_LIBROS+\"/cantidadLibros/\"+ this.subsede)\n        .then((respuesta) => respuesta.json())\n        .then((datosRespuesta) => {\n          \n          if (typeof datosRespuesta[0].success === \"undefined\") {      \n         \n          for (let index = 0; index < datosRespuesta[1].length; index++) {\n            this.chartDataL.labels.push(datosRespuesta[1][index][0]+ ' : '+datosRespuesta[1][index][1] )\n            this.chartDataL.datasets[0].data.push(datosRespuesta[1][index][1])\n\n\n            this.totalesL+=datosRespuesta[1][index][1]\n            this.totalesD+=datosRespuesta[2][index][1]\n            this.dataBar.labels.push(datosRespuesta[1][index][0] )\n\n\n             this.dataBar.datasets[0].data.push(datosRespuesta[1][index][1] )\n             this.dataBar.datasets[1].data.push(datosRespuesta[2][index][1] )\n          }\n          // this.data.labels.push(datosRespuesta[1][index][0]+ ' : '+datosRespuesta[1][index][1] )\n          for (let index = 0; index < datosRespuesta[0].length; index++) {\n            this.chartDataP.labels.push(datosRespuesta[0][index][0]+ ' : '+datosRespuesta[0][index][1] )\n            this.chartDataP.datasets[0].data.push(datosRespuesta[0][index][1])\n            \n          }}\n            this.dataBar.datasets[0].label.push('Libros Totales : '+ this.totalesL);\n            this.dataBar.datasets[1].label.push('Libros Disponibles : '+ this.totalesD);\n\n        })\n        .catch(console.log);\n    },\n  }\n\n}\n\n\n\n\n\n    </script>\n"]},"metadata":{},"sourceType":"module"}