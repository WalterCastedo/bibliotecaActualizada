{"ast":null,"code":"export const RUTA_SERVIDOR_ALUMNOS = process.env.VUE_APP_RUTA_API_ALUMNOS;\nexport const RUTA_SERVIDOR_LIBROS = process.env.VUE_APP_RUTA_API_LIBROS;\nimport { jsPDF } from \"jspdf\";\nimport \"jspdf-autotable\";\nimport axios from \"axios\";\nexport default {\n  name: \"ListarEditorial\",\n\n  data() {\n    return {\n      totalEditoriales: [],\n      nombreEditorial: \"\",\n      editoriales: [],\n      elementosPorPagina: 10,\n      datosPaginados: [],\n      paginaActual: 1,\n      editorialEditar: {\n        nombre: \"\",\n        id: 0\n      }\n    };\n  },\n\n  created: function () {\n    this.consultarEditoriales();\n  },\n\n  mounted() {\n    this.ObtenerDatosPag(1);\n  },\n\n  methods: {\n    consultarEditoriales() {\n      fetch(RUTA_SERVIDOR_LIBROS + \"/editoriales\").then(respuesta => respuesta.json()).then(datosRespuesta => {\n        this.libros = [];\n\n        if (typeof datosRespuesta[0].success === \"undefined\") {\n          datosRespuesta.sort((a, b) => {\n            if (a.nombreEditorial.toUpperCase() == b.nombreEditorial.toUpperCase()) {\n              return 0;\n            }\n\n            if (a.nombreEditorial.toUpperCase() > b.nombreEditorial.toUpperCase()) {\n              return 1;\n            }\n\n            if (a.nombreEditorial.toUpperCase() < b.nombreEditorial.toUpperCase()) {\n              return -1;\n            }\n          });\n          this.editoriales = datosRespuesta;\n          this.filtrarEditoriales();\n        }\n      }).catch(console.log);\n    },\n\n    filtrarEditoriales() {\n      this.totalEditoriales = [];\n\n      for (let index = 0; index < this.editoriales.length; index++) {\n        if (this.editoriales[index].activo === 1 && this.editoriales[index].nombreEditorial.toUpperCase().includes(this.nombreEditorial.toUpperCase())) {\n          this.totalEditoriales = this.totalEditoriales.concat(this.editoriales[index]);\n          this.ObtenerDatosPag(1);\n        }\n      }\n\n      if (this.totalEditoriales.length === 0) {\n        this.paginaPrevia(); //this.paginaActual=0;\n      }\n    },\n\n    eliminar(editorial) {\n      const confirmacion = window.confirm('¿Estás seguro de que deseas eliminar esta editorial?');\n\n      if (confirmacion) {\n        axios.put(RUTA_SERVIDOR_LIBROS + \"/editoriales/\" + editorial.id, {\n          nombreEditorial: editorial.nombreEditorial,\n          idEmpleado: editorial.idEmpleado,\n          activo: 0\n        }).then(function (response) {\n          console.log(response);\n          location.reload();\n        }).catch(function (error) {\n          console.log(error); // console.log(this.libro);\n        });\n      }\n    },\n\n    cambiarRegistrosPorPagina() {\n      this.paginaActual = 1;\n      this.ObtenerDatosPag(this.paginaActual);\n    },\n\n    totalPaginas() {\n      if (this.elementosPorPagina === -1) {\n        return 1; // Mostrar todo en una sola página\n      }\n\n      return Math.ceil(this.totalEditoriales.length / this.elementosPorPagina);\n    },\n\n    ObtenerDatosPag(noPag) {\n      this.paginaActual = noPag;\n      this.datosPaginados = [];\n      let ini = noPag * this.elementosPorPagina - this.elementosPorPagina;\n      let fin = noPag * this.elementosPorPagina;\n      this.datosPaginados = this.totalEditoriales.slice(ini, fin);\n    },\n\n    paginaPrevia() {\n      if (this.paginaActual > 1) {\n        this.paginaActual--;\n      }\n\n      this.ObtenerDatosPag(this.paginaActual);\n    },\n\n    paginaSiguiente() {\n      if (this.paginaActual < this.totalPaginas()) {\n        this.paginaActual++;\n      }\n\n      this.ObtenerDatosPag(this.paginaActual);\n    },\n\n    activo(noPoag) {\n      return noPoag === this.paginaActual ? \"active\" : \"\";\n    },\n\n    obtenerAutor(idEditorial) {\n      this.editorialEditar.nombre = idEditorial.nombreEditorial;\n      this.editorialEditar.id = idEditorial.id;\n    },\n\n    actualizar() {\n      if (this.editorialEditar.nombre.trim() === \"\") {\n        alert('Por favor, el campo de nombre no pueden estar vacio.');\n        return;\n      }\n\n      axios.put(RUTA_SERVIDOR_LIBROS + \"/editoriales/\" + this.editorialEditar.id, {\n        nombreEditorial: this.editorialEditar.nombre,\n        idEmpleado: parseInt(localStorage.getItem('id')),\n        activo: 1\n      }).then(function (response) {\n        console.log(response);\n        location.reload();\n      }).then(alert(\"La editorial se actualizo correctamente\")).catch(function (error) {\n        console.log(error); // console.log(this.libro);\n      });\n    },\n\n    exportarAExcel() {\n      // Crear una tabla HTML con los datos que deseas exportar\n      const tabla = document.createElement('table');\n      const tbody = tabla.createTBody(); // Agregar el título \"Editoriales\"\n      // Agregar la cabecera de la columna \"nombre\"\n\n      const cabeceraFila = document.createElement('tr');\n      const cabeceraCelda = document.createElement('th');\n      cabeceraCelda.innerText = 'Editoriales Nombre';\n      cabeceraFila.appendChild(cabeceraCelda);\n      tbody.appendChild(cabeceraFila); // Agregar filas de datos a la tabla\n\n      this.datosPaginados.forEach(editorial => {\n        const fila = tbody.insertRow();\n        const nombreEditorialCell = fila.insertCell(0); // 0 es la primera columna\n\n        nombreEditorialCell.innerText = editorial.nombreEditorial;\n      }); // Crear un archivo Blob para la tabla HTML\n\n      const blob = new Blob([tabla.outerHTML], {\n        type: 'application/vnd.ms-excel'\n      }); // Crear un enlace para descargar el archivo Excel\n\n      const link = document.createElement('a');\n      link.href = URL.createObjectURL(blob);\n      link.download = 'editoriales.xls'; // Simular un clic en el enlace para iniciar la descarga\n\n      link.click();\n    },\n\n    imprimirEditoriales() {\n      // Crear un nuevo documento PDF\n      var doc = new jsPDF(); //  Agregar la imagen en la esquina derecha\n      //  var imgRight = new Image();\n      // imgRight.src = '.../imglogo2.jpg'; // Reemplaza 'url_de_la_imagen' con la URL de tu imagen\n      // imgRight.onload = function () {\n      //   var imgWidth = 50; // Ancho de la imagen\n      //   var imgHeight = (imgRight.height * imgWidth) / imgRight.width;\n      //   var pageWidth = doc.internal.pageSize.getWidth();\n      //   var x = pageWidth - imgWidth - 10; // Ajusta la posición según tu preferencia\n      //   doc.addImage(imgRight, 'JPEG', x, 10, imgWidth, imgHeight);\n      // }\n      //titulo\n\n      doc.setFontSize(16);\n      var title = \"Editoriales\";\n      var titleWidth = doc.getStringUnitWidth(title) * doc.internal.getFontSize() / doc.internal.scaleFactor;\n      var pageWidth = doc.internal.pageSize.getWidth();\n      var x = (pageWidth - titleWidth) / 2;\n      doc.text(title, x, 10); // Obtener la tabla visible\n\n      var table = document.querySelector('.tableMb'); // Configurar los estilos de la tabla\n\n      var styles = {\n        overflow: 'linebreak',\n        fontSize: 8,\n        // Tamaño de fuente reducido\n        lineWidth: 0.1,\n        lineColor: [0, 0, 0],\n        // Color de las líneas\n        font: 'helvetica',\n        fontStyle: 'normal',\n        halign: 'center',\n        // Alineación horizontal\n        valign: 'middle',\n        // Alineación vertical\n        cellPadding: 2,\n        tableWidth: 'auto',\n        tableBorder: 1,\n        tableLineColor: [0, 0, 0],\n        // Color del borde de la tabla\n        tableFillColor: [255, 255, 255],\n        // Color de fondo de la tabla\n        textColor: 0,\n        cellWidth: 'auto' // Ajustar el ancho de la celda automáticamente\n\n      }; // Ocultar la última columna (Acción) antes de agregar la tabla al documento PDF\n\n      var actionColumn = table.querySelector('th:last-child, td:last-child');\n\n      if (actionColumn) {\n        actionColumn.style.display = 'none';\n      } // Agregar la tabla al documento PDF\n\n\n      doc.autoTable({\n        html: table,\n        startY: 20,\n        styles\n      }); // Mostrar la última columna nuevamente\n\n      if (actionColumn) {\n        actionColumn.style.display = 'table-cell';\n      } // Guardar el PDF\n\n\n      doc.save('editoriales.pdf');\n    },\n\n    closeModal() {\n      this.$refs.modalCenter.hide();\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA8HA;AACA;AACA;AACA;AACA;AAEA;EACAA,uBADA;;EAEAC;IACA;MACAC,oBADA;MAEAC,mBAFA;MAGAC,eAHA;MAIAC,sBAJA;MAKAC,kBALA;MAMAC,eANA;MAOAC;QACAC,UADA;QAEAC;MAFA;IAPA;EAYA,CAfA;;EAiBAC;IACA;EACA,CAnBA;;EAoBAC;IACA;EACA,CAtBA;;EAuBAC;IACAC;MACAC,6CACAC,IADA,CACAC,6BADA,EAEAD,IAFA,CAEAE;QACA;;QACA;UACAA;YACA,IACAC,mCACAC,+BAFA,EAGA;cACA;YACA;;YACA,IACAD,kCACAC,+BAFA,EAGA;cACA;YACA;;YACA,IACAD,kCACAC,+BAFA,EAGA;cACA;YACA;UACA,CAnBA;UAoBA;UACA;QACA;MACA,CA5BA,EA6BAC,KA7BA,CA6BAC,WA7BA;IA8BA,CAhCA;;IAkCAC;MACA;;MACA;QACA,IACA,wCACA,wCACAC,WADA,GAEAC,QAFA,CAEA,kCAFA,CAFA,EAKA;UACA,qDACA,uBADA;UAGA;QACA;MACA;;MACA;QACA,oBADA,CAEA;MACA;IACA,CArDA;;IAuDAC;MACA,oCACA,sDADA;;MAIA;QACAC,MACAC,GADA,CACAC,qDADA,EACA;UACA1B,0CADA;UAEA2B,gCAFA;UAGAC;QAHA,CADA,EAMAf,IANA,CAMA;UACAM;UACAU;QACA,CATA,EAUAX,KAVA,CAUA;UACAC,mBADA,CAEA;QACA,CAbA;MAaA;IACA,CA3EA;;IA6EAW;MACA;MACA;IACA,CAhFA;;IAiFAC;MACA;QACA,SADA,CACA;MACA;;MACA,iBACA,sDADA;IAGA,CAxFA;;IAyFAC;MACA;MACA;MAGA;MACA;MACA;IAEA,CAlGA;;IAoGAC;MACA;QACA;MACA;;MACA;IACA,CAzGA;;IA0GAC;MACA;QACA;MACA;;MACA;IACA,CA/GA;;IAgHAN;MACA;IACA,CAlHA;;IAoHAO;MACA;MACA;IACA,CAvHA;;IAwHAC;MACA,IACA,yCADA,EAGA;QACAC;QACA;MACA;;MACAb,MACAC,GADA,CAEAC,gEAFA,EAGA;QACA1B,4CADA;QAEA2B,gDAFA;QAGAC;MAHA,CAHA,EASAf,IATA,CASA;QACAM;QACAU;MACA,CAZA,EAaAhB,IAbA,CAaAwB,gDAbA,EAcAnB,KAdA,CAcA;QACAC,mBADA,CAEA;MACA,CAjBA;IAkBA,CAlJA;;IAoJAmB;MACA;MACA;MACA,kCAHA,CAKA;MAGA;;MACA;MACA;MACAC;MACAC;MACAC,gCAbA,CAeA;;MACA;QACA;QACA,+CAFA,CAEA;;QACAC;MACA,CAJA,EAhBA,CAsBA;;MACA;QAAAC;MAAA,GAvBA,CAyBA;;MACA;MACAC;MACAA,kCA5BA,CA8BA;;MACAA;IACA,CApLA;;IAqLAC;MACA;MACA,sBAFA,CAIA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;MACAC;MACA;MACA;MACA;MACA;MACAA,uBApBA,CAqBA;;MACA,+CAtBA,CAwBA;;MACA;QACAC,qBADA;QAEAC,WAFA;QAEA;QACAC,cAHA;QAIAC,oBAJA;QAIA;QACAC,iBALA;QAMAC,mBANA;QAOAC,gBAPA;QAOA;QACAC,gBARA;QAQA;QACAC,cATA;QAUAC,kBAVA;QAWAC,cAXA;QAYAC,yBAZA;QAYA;QACAC,+BAbA;QAaA;QACAC,YAdA;QAeAC,iBAfA,CAeA;;MAfA,EAzBA,CA2CA;;MACA;;MACA;QACAC;MACA,CA/CA,CAiDA;;;MACAhB;QAAAiB;QAAAC;QAAAC;MAAA,GAlDA,CAoDA;;MACA;QACAH;MACA,CAvDA,CAyDA;;;MACAhB;IACA,CAhPA;;IAiPAoB;MACA;IACA;;EAnPA;AAvBA","names":["name","data","totalEditoriales","nombreEditorial","editoriales","elementosPorPagina","datosPaginados","paginaActual","editorialEditar","nombre","id","created","mounted","methods","consultarEditoriales","fetch","then","respuesta","datosRespuesta","a","b","catch","console","filtrarEditoriales","toUpperCase","includes","eliminar","axios","put","RUTA_SERVIDOR_LIBROS","idEmpleado","activo","location","cambiarRegistrosPorPagina","totalPaginas","ObtenerDatosPag","paginaPrevia","paginaSiguiente","obtenerAutor","actualizar","alert","exportarAExcel","cabeceraCelda","cabeceraFila","tbody","nombreEditorialCell","type","link","imprimirEditoriales","doc","overflow","fontSize","lineWidth","lineColor","font","fontStyle","halign","valign","cellPadding","tableWidth","tableBorder","tableLineColor","tableFillColor","textColor","cellWidth","actionColumn","html","startY","styles","closeModal"],"sourceRoot":"src/components","sources":["ListarEditorial.vue"],"sourcesContent":["<template class=\"fondo\">\n  <div class=\"row align-items-center\">\n    <div class=\"col\">\n      <div class=\" align-items-center\">\n        <div class=\"form-group text-center\">\n          <label for=\"\">Ingresa el nombre de la editorial</label>\n          <br>\n          <input\n            v-on:keyup=\"filtrarEditoriales()\"\n            v-model=\"nombreEditorial\"\n            type=\"text\"\n            class=\"form-control text-center\"\n            placeholder=\"Nombre de la editorial\"\n          />\n        </div> <label>Registros por página</label>\n    <select v-model=\"elementosPorPagina\" @change=\"cambiarRegistrosPorPagina\">\n      <option value=\"5\" selected>5</option>\n      <option value=\"10\">10</option>\n      <option value=\"20\">20</option>\n      <option value=\"999999\">Todos</option>\n    </select>\n    <button\n      type=\"button\"\n      class=\"btn\"\n      @click=\"imprimirEditoriales()\"\n    >\n    <img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAACXBIWXMAAAsTAAALEwEAmpwYAAAChklEQVR4nO2Z22vTcBTH+08UrcpASE1SrQ1ug9i5sU1l4pQpE2XTubeBoOANxSdFUcELClNURGhZH0TFMh+com4Im+iDQ0HmEPVBENKbcfSS3tav/H5j6VYzy1zSVsmBz0M5/NJPT8/v5JfWYjGjROFkWafLzvXojcA4dugq6mK4g4KdhyEw3IV/Q9TOw8VwF3UXvSNUYaB6yYIY9t6G/8QhrF3B5WXt/HldRUdqbJBE64JIjY4gfvcWBqttcM+UZfhLFSkqiVZ9ZY0UlfSUNVpU0pAVGP5yRYpKmrLcybKLKk8fINzV9Bsvt9WhlnVMyw6VXfRPsblxQ2WIBltXIrR9zZy0OCqkolIRWljWFIVZ0fmE2aOiuZl4dTyFO9ZBedGvEvNdQ6i9Rt1UyjO/mks88mHi9H4E6peq+fDe5lnrCfLxbv3H0499bfQuQm6FRCTzdRy5eBSh9lqax2QWqbfDSPi9SL56jlxSQebTBwQ3sTQvH+mcWv/4Hl1PkA93GCcaahPoa1KtbOA7Yp4rqujEmQP5Cu5yY1KOQHlyf5ZocKPd2IFfKCq5FyH77QvivuuaopJoRbT3FHKpJP1Q06JkfaB5OYVcwzDRmPcqojfOIvV6EMikae/NJSof65qq4pZVqujMCHfWGyea+TyG9Md3dDNEelpVKWhV9OY55JQEpDqbKkquE+leTwk0LCvBV18ACkSJSC76Ewm/p8w9qiGaHhullU6/f0PbgpxDaS+WUjS0U6SjR+uNCImHHponxPp6IR/dA8m9OD8Fdjcg0d+HQGOVecyDeXAWzRO+1XxmEhY6nvT42XGgCE16zNESM/R/ijoN+rPBVYTVDLt1XqJmWP4ufgGVhSpkgRcCwgAAAABJRU5ErkJggg==\">  </button> \n     <button\n      type=\"button\"\n      class=\"btn\"\n      @click=\"exportarAExcel()\"\n    >\n    <img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAACTUlEQVR4nO2ZW0sUYRjH5xvkRcieRnfNPZhtuTNBalgNaemaRUWQ6a5p2slq14Uyd6edGTpQKBFhRQXiTV0pXnQhEmLuTF/E+h7/eN+VocBK2Tks8v7hf/E+8w48v3kON8NxTExMu1/id61X1NWfoqGhUtc+Tc45DiDo2g8rkieukSXUFKTnjgKIFiVvAjgNIdoB4CSEaBeA7BCErQCyAxC2A8g2QzgCINsI4RiAbBOElQB7n3T/F2JPQVKrFqBpKbMtiNoXfXNVCbATcwxgU6wCBmuhyrRrW2jfs0vgJ07hwMIEPTd/Gqfn2MdRxBey4DOd2D9/8493Di7lUD/VC//YMfivH0d45op7APHFLDypVgQLfRB0FYG7J2liiVUZzZ/vwDN4BLH3I+Z9csc32kEdfTOE6OwQwi8H3F2jDdoFChGe6acJN83fKFdjC4CWr3ka4zNdENaK7rcQTWolD+9wO4Won0ya8a0AiEm1SNw31oHI6xTEkuIuwKEvD+BJt8Gbbit/2ZL6TwBxXaEx/60T9HlIPusigK6i7n4PfMNHEZlNlxN+e/XvAOtK2WQevhURuC3Bm2qls+EKQOzDNZpk5NWgOcQEJrEyZQLU5U4jpJ2nJpspMC6hcbofjdOXaeX4bJdLFSgpCBXPIZg/g8TaI3ONBieTiL4bQXwxR2fid5MVSoaerFf+XicaHl9Ey/JDd2fATnMMYFOsAgZrocrEWshgLVSZWAsZrIWq5xfTdi0Y6gZnlQ7rWo+TEIKhbiRKSrdlAExMTFzV6hfz8wpqDZBppQAAAABJRU5ErkJggg==\">\n    </button>\n<br>\n<nav aria-label=\"Page navigation example\" class=\"pagination-nav\">\n      <ul class=\"pagination\">\n        <li class=\"page-item\" v-on:click=\"paginaPrevia()\">\n          <a class=\"page-link\" href=\"#\">anterior</a>\n        </li>\n        <li\n          v-for=\"paginaE in totalPaginas()\"\n          :key=\"paginaE\"\n          class=\"page-item\"\n          v-bind:class=\"activo(paginaE)\"\n        >\n          <a class=\"page-link\" href=\"#\" v-on:click=\"ObtenerDatosPag(paginaE)\">{{\n            paginaE\n          }}</a>\n        </li>\n        <li class=\"page-item\" v-on:click=\"paginaSiguiente()\">\n          <a class=\"page-link\" href=\"#\">siguiente</a>\n        </li>\n      </ul>\n    </nav>\n\n        <div class=\"d-md-block table-responsive\">\n          <table class=\"table table-striped border text-center tableMb\">\n            <thead>\n              <tr>\n                <!-- <th>ID</th> -->\n                <th>NOMBRE</th>\n                <th>ACCIONES</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr v-for=\"editorial in datosPaginados\" :key=\"editorial.id\">\n                <!-- <td>{{ libro.id }}</td> -->\n                <td>{{ editorial.nombreEditorial }}</td>\n                <!-- <td>{{ libro.codigo }}</td>\n                    <td>{{ libro.copias }}</td>\n                    <td>{{ libro.categoria }}</td>\n                    <td>{{ libro.edicion }}</td>\n                    <td>{{ autor[[libro.idAutor] - 1].nombre }}</td>\n                    <td>{{ editoriales[[libro.idEditorial] - 1].nombreEditorial }}</td>\n                    <td>{{ carreras[[libro.idCarrera] - 1].nombreCarrera }}</td>\n                    <td>{{ libro.observacion }}</td> -->\n                <td>\n                  <div class=\"btn-group\" role=\"group\" aria-label=\"\">\n                    <button\n                      v-b-modal.modal-center\n                      @click=\"obtenerAutor(editorial)\"\n                      class=\"btn btn-info\"\n                    >\n                    <font-awesome-icon icon=\"fa-solid fa-pen-to-square\" />\n                    </button>\n                    <button\n                      type=\"button\"\n                      @click=\"eliminar(editorial)\"\n                      class=\"btn btn-danger\"\n                    >\n                    <font-awesome-icon icon=\"fa-solid fa-trash-can\"  />\n                    </button>\n                  </div>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n\n   \n\n    <b-modal id=\"modal-center\" ref=\"modalCenter\" centered title=\"Modificar editorial\" hide-footer hide-close-button> \n      <template #modal-title>\n    <button @click=\"closeModal\" class=\"btn btn-sm btn-danger close-button\">X</button>\n    <h5 class=\"modal-title\">Modificar Editorial</h5>\n  </template>\n      <div class=\"form-group d-flex flex-column\">\n        <label for=\"\">nombre de la editorial</label>\n        <input\n          v-model=\"editorialEditar.nombre\"\n          type=\"text\"\n          class=\"form-control\"\n          placeholder=\"Nombre\"\n          aria-describedby=\"helpId\"\n        />\n        <br>\n        <button class=\"btn align-items-center btn-info\" @click=\"actualizar()\">Actualizar</button>\n     </div>\n    </b-modal>\n  </div>\n</template>\n\n<script>\n  export const RUTA_SERVIDOR_ALUMNOS = process.env.VUE_APP_RUTA_API_ALUMNOS;\nexport const RUTA_SERVIDOR_LIBROS = process.env.VUE_APP_RUTA_API_LIBROS;\nimport { jsPDF } from \"jspdf\";\nimport \"jspdf-autotable\";\nimport axios from \"axios\";\n\nexport default {\n  name: \"ListarEditorial\",\n  data() {\n    return {\n      totalEditoriales: [],\n      nombreEditorial: \"\",\n      editoriales: [],\n      elementosPorPagina: 10,\n      datosPaginados: [],\n      paginaActual: 1,\n      editorialEditar: {\n        nombre: \"\",\n        id: 0,\n      },\n    };\n  },\n\n  created: function () {\n    this.consultarEditoriales();\n  },\n  mounted() {\n    this.ObtenerDatosPag(1);\n  },\n  methods: {\n    consultarEditoriales() {\n      fetch(RUTA_SERVIDOR_LIBROS+\"/editoriales\")\n        .then((respuesta) => respuesta.json())\n        .then((datosRespuesta) => {\n          this.libros = [];\n          if (typeof datosRespuesta[0].success === \"undefined\") {\n            datosRespuesta.sort((a, b) => {\n              if (\n                a.nombreEditorial.toUpperCase() ==\n                b.nombreEditorial.toUpperCase()\n              ) {\n                return 0;\n              }\n              if (\n                a.nombreEditorial.toUpperCase() >\n                b.nombreEditorial.toUpperCase()\n              ) {\n                return 1;\n              }\n              if (\n                a.nombreEditorial.toUpperCase() <\n                b.nombreEditorial.toUpperCase()\n              ) {\n                return -1;\n              }\n            });\n            this.editoriales = datosRespuesta;\n            this.filtrarEditoriales();\n          }\n        })\n        .catch(console.log);\n    },\n\n    filtrarEditoriales() {\n      this.totalEditoriales = [];\n      for (let index = 0; index < this.editoriales.length; index++) {\n        if (\n          this.editoriales[index].activo === 1 &&\n          this.editoriales[index].nombreEditorial\n            .toUpperCase()\n            .includes(this.nombreEditorial.toUpperCase())\n        ) {\n          this.totalEditoriales = this.totalEditoriales.concat(\n            this.editoriales[index]\n          );\n          this.ObtenerDatosPag(1);\n        }\n      }\n      if (this.totalEditoriales.length === 0) {\n        this.paginaPrevia();\n        //this.paginaActual=0;\n      }\n    },\n\n    eliminar(editorial) {\n      const confirmacion = window.confirm(\n    '¿Estás seguro de que deseas eliminar esta editorial?'\n  );\n\n  if (confirmacion) {\n      axios\n        .put(RUTA_SERVIDOR_LIBROS+\"/editoriales/\" + editorial.id, {\n          nombreEditorial: editorial.nombreEditorial,\n          idEmpleado: editorial.idEmpleado,\n          activo: 0,\n        })\n        .then(function (response) {\n          console.log(response);\n          location.reload();\n        })\n        .catch(function (error) {\n          console.log(error);\n          // console.log(this.libro);\n        });}\n    },\n\n    cambiarRegistrosPorPagina() {\n      this.paginaActual=1\n      this.ObtenerDatosPag(this.paginaActual);\n    },\n    totalPaginas() {\n      if (this.elementosPorPagina === -1) {\n        return 1; // Mostrar todo en una sola página\n      }\n      return Math.ceil(\n        this.totalEditoriales.length / this.elementosPorPagina\n      );\n    },\n    ObtenerDatosPag(noPag) {\n  this.paginaActual = noPag;\n  this.datosPaginados = [];\n\n \n    let ini = noPag * this.elementosPorPagina - this.elementosPorPagina;\n    let fin = noPag * this.elementosPorPagina;\n    this.datosPaginados = this.totalEditoriales.slice(ini, fin);\n  \n},\n\n    paginaPrevia() {\n      if (this.paginaActual > 1) {\n        this.paginaActual--;\n      }\n      this.ObtenerDatosPag(this.paginaActual);\n    },\n    paginaSiguiente() {\n      if (this.paginaActual < this.totalPaginas()) {\n        this.paginaActual++;\n      }\n      this.ObtenerDatosPag(this.paginaActual);\n    },\n    activo(noPoag) {\n      return noPoag === this.paginaActual ? \"active\" : \"\";\n    },\n\n    obtenerAutor(idEditorial) {\n      this.editorialEditar.nombre = idEditorial.nombreEditorial;\n      this.editorialEditar.id = idEditorial.id;\n    },\n    actualizar() {\n      if (\n        this.editorialEditar.nombre.trim() === \"\" \n  \n  ) {\n    alert('Por favor, el campo de nombre no pueden estar vacio.');\n    return;\n  }\n      axios\n        .put(\n          RUTA_SERVIDOR_LIBROS+\"/editoriales/\" + this.editorialEditar.id,\n          {\n            nombreEditorial: this.editorialEditar.nombre,\n           idEmpleado: parseInt(localStorage.getItem('id')),\n            activo: 1,\n          }\n        )\n        .then(function (response) {\n          console.log(response);\n          location.reload();\n        })\n        .then(alert(\"La editorial se actualizo correctamente\"))\n        .catch(function (error) {\n          console.log(error);\n          // console.log(this.libro);\n        });\n    },\n\n    exportarAExcel() {\n  // Crear una tabla HTML con los datos que deseas exportar\n  const tabla = document.createElement('table');\n  const tbody = tabla.createTBody();\n\n  // Agregar el título \"Editoriales\"\n  \n\n  // Agregar la cabecera de la columna \"nombre\"\n  const cabeceraFila = document.createElement('tr');\n  const cabeceraCelda = document.createElement('th');\n  cabeceraCelda.innerText = 'Editoriales Nombre';\n  cabeceraFila.appendChild(cabeceraCelda);\n  tbody.appendChild(cabeceraFila);\n\n  // Agregar filas de datos a la tabla\n  this.datosPaginados.forEach(editorial => {\n    const fila = tbody.insertRow();\n    const nombreEditorialCell = fila.insertCell(0); // 0 es la primera columna\n    nombreEditorialCell.innerText = editorial.nombreEditorial;\n  });\n\n  // Crear un archivo Blob para la tabla HTML\n  const blob = new Blob([tabla.outerHTML], { type: 'application/vnd.ms-excel' });\n\n  // Crear un enlace para descargar el archivo Excel\n  const link = document.createElement('a');\n  link.href = URL.createObjectURL(blob);\n  link.download = 'editoriales.xls';\n\n  // Simular un clic en el enlace para iniciar la descarga\n  link.click();\n},\nimprimirEditoriales() {\n  // Crear un nuevo documento PDF\n  var doc = new jsPDF();\n\n  //  Agregar la imagen en la esquina derecha\n  //  var imgRight = new Image();\n  // imgRight.src = '.../imglogo2.jpg'; // Reemplaza 'url_de_la_imagen' con la URL de tu imagen\n  // imgRight.onload = function () {\n  //   var imgWidth = 50; // Ancho de la imagen\n  //   var imgHeight = (imgRight.height * imgWidth) / imgRight.width;\n  //   var pageWidth = doc.internal.pageSize.getWidth();\n  //   var x = pageWidth - imgWidth - 10; // Ajusta la posición según tu preferencia\n  //   doc.addImage(imgRight, 'JPEG', x, 10, imgWidth, imgHeight);\n  // }\n  //titulo\n  doc.setFontSize(16);\n  var title = \"Editoriales\";\n  var titleWidth = doc.getStringUnitWidth(title) * doc.internal.getFontSize() / doc.internal.scaleFactor;\n  var pageWidth = doc.internal.pageSize.getWidth();\n  var x = (pageWidth - titleWidth) / 2;\n  doc.text(title, x, 10);\n  // Obtener la tabla visible\n  var table = document.querySelector('.tableMb');\n\n  // Configurar los estilos de la tabla\n  var styles = {\n    overflow: 'linebreak',\n    fontSize: 8, // Tamaño de fuente reducido\n    lineWidth: 0.1,\n    lineColor: [0, 0, 0], // Color de las líneas\n    font: 'helvetica',\n    fontStyle: 'normal',\n    halign: 'center', // Alineación horizontal\n    valign: 'middle', // Alineación vertical\n    cellPadding: 2,\n    tableWidth: 'auto',\n    tableBorder: 1,\n    tableLineColor: [0, 0, 0], // Color del borde de la tabla\n    tableFillColor: [255, 255, 255], // Color de fondo de la tabla\n    textColor: 0,\n    cellWidth: 'auto', // Ajustar el ancho de la celda automáticamente\n  };\n\n  // Ocultar la última columna (Acción) antes de agregar la tabla al documento PDF\n  var actionColumn = table.querySelector('th:last-child, td:last-child');\n  if (actionColumn) {\n    actionColumn.style.display = 'none';\n  }\n\n  // Agregar la tabla al documento PDF\n  doc.autoTable({ html: table, startY: 20, styles });\n\n  // Mostrar la última columna nuevamente\n  if (actionColumn) {\n    actionColumn.style.display = 'table-cell';\n  }\n\n  // Guardar el PDF\n  doc.save('editoriales.pdf');\n},\ncloseModal() {\n      this.$refs.modalCenter.hide();\n    },\n  },\n};\n</script>\n\n  <style >\n    .close-button {\n      position: absolute;\n      top: 14px;\n      right: 10px;\n    }\n    .modal-header .close {\n      display: none;\n    }\n</style>"]},"metadata":{},"sourceType":"module"}