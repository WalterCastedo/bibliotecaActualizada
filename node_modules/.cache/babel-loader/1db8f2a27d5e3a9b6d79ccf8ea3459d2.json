{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n// import { Bar } from 'vue-chartjs'\n// import { Chart as ChartJS,Title, ArcElement, Tooltip, Legend,BarElement, CategoryScale, LinearScale } from 'chart.js'\n// import { Doughnut } from 'vue-chartjs'\n// ChartJS.register(Title, ArcElement, Tooltip, Legend, BarElement, CategoryScale, LinearScale)\n// Import component\nimport Loading from \"vue-loading-overlay\"; // Import stylesheet\n\nimport \"vue-loading-overlay/dist/vue-loading.css\"; // import * as XLSX from 'xlsx'\n\nimport * as saveAs from \"file-saver\";\nimport listar from \"@/views/LibrosView.vue\";\nimport { jsPDF } from \"jspdf\";\nimport \"jspdf-autotable\"; // import { Carousel, Slide } from 'vue-carousel';\n\nimport modalPrestamo from \"@/components/modalPrestamo.vue\";\nimport axios from \"axios\"; // import CrearLibro from '@/components/CrearLibro.vue'\n\nexport const RUTA_SERVIDOR_ALUMNOS = process.env.VUE_APP_RUTA_API_ALUMNOS;\nexport const RUTA_SERVIDOR_LIBROS = process.env.VUE_APP_RUTA_API_LIBROS;\nexport default {\n  name: \"ListarLibro\",\n  components: {\n    // Bar,\n    // Doughnut,\n    modalPrestamo,\n    Loading\n  },\n\n  data() {\n    return {\n      isLoading: true,\n      fullPage: true,\n      dataToExport: [],\n      prestamolibro: {\n        id: 0,\n        nombreLibro: \"\",\n        autor: \"\",\n        editorial: \"\",\n        edicion: \"\",\n        urlPortada: \"\"\n      },\n      subsede: localStorage.getItem(\"idSubsede\"),\n      totalLibros: [],\n      libros: [],\n      autor: [],\n      carreras: [],\n      materia: 1,\n      nombreLibro: \"\",\n      nombreAutor: 1,\n      editoriales: [],\n      elementosPorPagina: 10,\n      datosPaginados: [],\n      paginaActual: 1,\n      acceso: localStorage.getItem(\"acceso\"),\n      radioPdf: 0\n    };\n  },\n\n  created: async function () {\n    this.consultarAutor();\n    await this.consultarEditorial(); // this.consultarLibros();\n\n    this.isLoading = false;\n  },\n\n  async mounted() {\n    await this.consultarCarreras(); // this.consultarCantidad();\n\n    this.ObtenerDatosPag(1);\n  },\n\n  methods: {\n    cambiarRegistrosPorPagina() {\n      this.paginaActual = 1;\n      this.ObtenerDatosPag(this.paginaActual);\n    },\n\n    redireccionaarPdf(pdf) {\n      var a = document.createElement(\"a\");\n      a.target = \"_blank\";\n      a.href = \"http://192.168.0.113:8082/storage/documentos/\" + pdf;\n      a.click();\n    },\n\n    onCancel() {\n      console.log(\"usuario cancelo la carga.\");\n    },\n\n    consultarLibros() {\n      fetch(RUTA_SERVIDOR_LIBROS + \"/librosSubsede/\" + this.subsede).then(respuesta => respuesta.json()).then(datosRespuesta => {\n        this.libros = [];\n\n        if (typeof datosRespuesta[0].success === \"undefined\") {\n          datosRespuesta.sort((a, b) => {\n            if (a.titulo.toUpperCase() == b.titulo.toUpperCase()) {\n              return 0;\n            }\n\n            if (a.titulo.toUpperCase() > b.titulo.toUpperCase()) {\n              return 1;\n            }\n\n            if (a.titulo.toUpperCase() < b.titulo.toUpperCase()) {\n              return -1;\n            }\n          });\n          this.libros = datosRespuesta;\n\n          for (let index = 0; index < this.libros.length; index++) {\n            for (let index2 = 0; index2 < this.autor.length; index2++) {\n              if (this.autor[index2].id == this.libros[index].idAutor) {\n                var nombreAutor = this.autor[index2].nombre;\n                this.libros[index].nombre = nombreAutor;\n              }\n            }\n          }\n\n          this.filtrarlibros();\n          this.filtrarArchivos();\n        }\n      }).catch(console.log);\n    },\n\n    filtrarArchivos() {\n      this.dataToExport = [];\n\n      for (let index = 0; index < this.libros.length; index++) {\n        if (this.libros[index].idCarrera === this.materia && this.libros[index].activo === 1 && this.libros[index].documento != null && this.radioPdf == 1) {\n          this.dataToExport = this.dataToExport.concat(this.libros[index]);\n        } else {\n          if (this.libros[index].idCarrera === this.materia && this.libros[index].activo === 1 && this.libros[index].documento == null && this.radioPdf == 0) {\n            this.dataToExport = this.dataToExport.concat(this.libros[index]);\n          }\n        }\n      }\n    },\n\n    filtrarlibros() {\n      this.totalLibros = [];\n\n      for (let index = 0; index < this.libros.length; index++) {\n        if (this.libros[index].idCarrera === this.materia && this.libros[index].activo === 1 && (this.libros[index].titulo.toUpperCase().includes(this.nombreLibro.toUpperCase()) || this.libros[index].nombre.toUpperCase().includes(this.nombreLibro.toUpperCase())) && this.libros[index].documento != null && this.radioPdf == 1) {\n          this.totalLibros = this.totalLibros.concat(this.libros[index]);\n          this.ObtenerDatosPag(1);\n        } else {\n          if (this.libros[index].idCarrera === this.materia && this.libros[index].activo === 1 && (this.libros[index].titulo.toUpperCase().includes(this.nombreLibro.toUpperCase()) || this.libros[index].nombre.toUpperCase().includes(this.nombreLibro.toUpperCase())) && this.libros[index].documento == null && this.radioPdf == 0) {\n            this.totalLibros = this.totalLibros.concat(this.libros[index]);\n            this.ObtenerDatosPag(1);\n          }\n        }\n      }\n\n      if (this.totalLibros.length === 0) {\n        this.paginaPrevia(); //this.paginaActual=0;\n      }\n    },\n\n    consultarAutor() {\n      fetch(RUTA_SERVIDOR_LIBROS + \"/autor/\").then(respuesta => respuesta.json()).then(datosRespuesta => {\n        this.autor = datosRespuesta;\n        this.consultarLibros();\n      }).catch(console.log);\n    },\n\n    consultarEditorial() {\n      fetch(RUTA_SERVIDOR_LIBROS + \"/editoriales/\").then(respuesta => respuesta.json()).then(datosRespuesta => {\n        if (typeof datosRespuesta[0].success === \"undefined\") {\n          this.editoriales = datosRespuesta;\n        }\n      }).catch(console.log);\n    },\n\n    Enviar(id) {\n      this.$emit(\"recibiendo\", id);\n      listar.editar();\n    },\n\n    confirmarEliminarSolicitud(libro) {\n      if (window.confirm(\"¿Estás seguro de que deseas eliminar este libro?\")) {\n        this.eliminar(libro);\n      }\n    },\n\n    eliminar(libro) {\n      axios.put(RUTA_SERVIDOR_LIBROS + \"/libros/\" + libro.id, {\n        titulo: libro.titulo,\n        copias: libro.copias,\n        copiasDisponibles: libro.copiasDisponibles,\n        categoria: libro.categoria,\n        edicion: libro.edicion,\n        codigo: libro.codigo,\n        idAutor: parseInt(libro.idAutor),\n        idEmpleado: libro.idEmpleado,\n        idEditorial: parseInt(libro.idEditorial),\n        idCarrera: parseInt(libro.idCarrera),\n        urlPortada: libro.urlPortada,\n        observacion: libro.observacion,\n        documento: libro.documento,\n        activo: 0\n      }).then(function (response) {\n        location.reload();\n      }).catch(function (error) {\n        console.log(error); // console.log(this.libro);\n      });\n    },\n\n    obtenerLibro(id, nombre, autor, editorial, edicion, urlPortada) {\n      this.prestamolibro = {\n        id: id,\n        nombreLibro: nombre,\n        autor: autor,\n        editorial: editorial,\n        edicion: edicion,\n        urlPortada: urlPortada\n      };\n    },\n\n    consultarCarreras() {\n      fetch(RUTA_SERVIDOR_LIBROS + \"/carreras\").then(respuesta => respuesta.json()).then(datosRespuesta => {\n        this.carreras = [];\n\n        if (typeof datosRespuesta[0].success === \"undefined\") {\n          this.carreras = datosRespuesta;\n        }\n      }).catch(console.log);\n    },\n\n    consultarCantidad() {\n      fetch(RUTA_SERVIDOR_LIBROS + \"/cantidadLibros/\" + this.subsede).then(respuesta => respuesta.json()).then(datosRespuesta => {\n        if (typeof datosRespuesta[0].success === \"undefined\") {\n          for (let index = 0; index < datosRespuesta[1].length; index++) {\n            this.chartDataL.labels.push(datosRespuesta[1][index][0] + \" : \" + datosRespuesta[1][index][1]);\n            this.chartDataL.datasets[0].data.push(datosRespuesta[1][index][1]);\n            this.totalesL += datosRespuesta[1][index][1];\n            this.totalesD += datosRespuesta[2][index][1];\n            this.dataBar.labels.push(datosRespuesta[1][index][0]);\n            this.dataBar.datasets[0].data.push(datosRespuesta[1][index][1]);\n            this.dataBar.datasets[1].data.push(datosRespuesta[2][index][1]);\n          } // this.data.labels.push(datosRespuesta[1][index][0]+ ' : '+datosRespuesta[1][index][1] )\n\n\n          for (let index = 0; index < datosRespuesta[0].length; index++) {\n            this.chartDataP.labels.push(datosRespuesta[0][index][0] + \" : \" + datosRespuesta[0][index][1]);\n            this.chartDataP.datasets[0].data.push(datosRespuesta[0][index][1]);\n          }\n        }\n\n        this.dataBar.datasets[0].label.push(\"Libros Totales : \" + this.totalesL);\n        this.dataBar.datasets[1].label.push(\"Libros Disponibles : \" + this.totalesD);\n      }).catch(console.log);\n    },\n\n    totalPaginas() {\n      if (this.elementosPorPagina === -1) {\n        return 1; // Mostrar todo en una sola página\n      }\n\n      return Math.ceil(this.totalLibros.length / this.elementosPorPagina);\n    },\n\n    ObtenerDatosPag(noPag) {\n      this.paginaActual = noPag;\n      this.datosPaginados = [];\n      let ini = noPag * this.elementosPorPagina - this.elementosPorPagina;\n      let fin = noPag * this.elementosPorPagina;\n      this.datosPaginados = this.totalLibros.slice(ini, fin);\n    },\n\n    paginaPrevia() {\n      if (this.paginaActual > 1) {\n        this.paginaActual--;\n      }\n\n      this.ObtenerDatosPag(this.paginaActual);\n    },\n\n    paginaSiguiente() {\n      if (this.paginaActual < this.totalPaginas()) {\n        this.paginaActual++;\n      }\n\n      this.ObtenerDatosPag(this.paginaActual);\n    },\n\n    activo(noPoag) {\n      return noPoag === this.paginaActual ? \"active\" : \"\";\n    },\n\n    precionadoBoton(id) {\n      console.log(id);\n    },\n\n    cambiaC(carrera) {\n      this.materia = carrera;\n      this.filtrarlibros();\n      this.filtrarArchivos();\n    },\n\n    exportExcel() {\n      const tabla = document.createElement('table');\n      const thead = tabla.createTHead();\n      const tbody = tabla.createTBody(); // Agregar encabezados de columna a la tabla\n\n      const encabezados = ['Id', 'Titulo', 'Autor', 'Editorial', 'Edicion', 'Codigo', 'Copias', 'Disponibles'];\n      const encabezadosRow = thead.insertRow();\n      encabezados.forEach(encabezado => {\n        const th = document.createElement('th');\n        th.innerText = encabezado;\n        encabezadosRow.appendChild(th);\n      }); // Agregar filas de datos a la tabla\n\n      this.datosPaginados.forEach(libro => {\n        const fila = tbody.insertRow();\n        fila.insertCell().innerText = libro.id;\n        fila.insertCell().innerText = libro.titulo;\n        fila.insertCell().innerText = libro.nombre;\n        fila.insertCell().innerText = this.editoriales[[libro.idEditorial] - 1].nombreEditorial, fila.insertCell().innerText = libro.edicion;\n        fila.insertCell().innerText = libro.codigo;\n        fila.insertCell().innerText = libro.copias;\n        fila.insertCell().innerText = libro.copiasDisponibles;\n      }); // Crear un archivo Blob para la tabla HTML\n\n      const blob = new Blob([tabla.outerHTML], {\n        type: 'application/vnd.ms-excel'\n      });\n      const link = document.createElement('a');\n      link.href = URL.createObjectURL(blob);\n      link.download = 'Libros.xls';\n      link.click();\n    },\n\n    exportPdf() {\n      var doc = new jsPDF(); //titulo\n\n      doc.setFontSize(16);\n      var title = \"Libros\";\n      var titleWidth = doc.getStringUnitWidth(title) * doc.internal.getFontSize() / doc.internal.scaleFactor;\n      var pageWidth = doc.internal.pageSize.getWidth();\n      var x = (pageWidth - titleWidth) / 2;\n      doc.text(title, x, 10); // Obtener la tabla visible\n\n      var table = document.querySelector('.tableMb'); // Obtener la tabla visible\n\n      var table = document.querySelector('.tableMb'); // Configurar los estilos de la tabla\n\n      var styles = {\n        overflow: 'linebreak',\n        fontSize: 8,\n        // Tamaño de fuente reducido\n        lineWidth: 0.1,\n        lineColor: [0, 0, 0],\n        // Color de las líneas\n        font: 'helvetica',\n        fontStyle: 'normal',\n        halign: 'center',\n        // Alineación horizontal\n        valign: 'middle',\n        // Alineación vertical\n        cellPadding: 2,\n        tableWidth: 'auto',\n        tableBorder: 1,\n        tableLineColor: [0, 0, 0],\n        // Color del borde de la tabla\n        tableFillColor: [255, 255, 255],\n        // Color de fondo de la tabla\n        textColor: 0,\n        cellWidth: 'auto' // Ajustar el ancho de la celda automáticamente\n\n      }; // Ocultar la última columna (Acción) antes de agregar la tabla al documento PDF\n\n      var actionColumn = table.querySelector('th:last-child, td:last-child');\n\n      if (actionColumn) {\n        actionColumn.style.display = 'none';\n      } // Agregar la tabla al documento PDF\n\n\n      doc.autoTable({\n        html: table,\n        startY: 20,\n        styles\n      }); // Mostrar la última columna nuevamente\n\n      if (actionColumn) {\n        actionColumn.style.display = 'table-cell';\n      } // Guardar el PDF\n\n\n      doc.save('Libros.pdf'); //convertir tabla en pdf sin JSPDF\n      // var doc = new jsPDF(\"p\", \"pt\");\n      // var elem = document.getElementById(\"tablaLibros\");\n      // var res = doc.autoTableHtmlToJson(elem);\n      // doc.autoTable(res.columns, res.data, {\n      //   theme: \"grid\",\n      //   styles: {\n      //     overflow: \"linebreak\",\n      //     fontSize: 8,\n      //     rowHeight: 20,\n      //     font: \"helvetica\",\n      //     fontStyle: \"normal\",\n      //     lineWidth: 0.1,\n      //     lineColor: [0, 0, 0],\n      //     fillColor: [255, 255, 255],\n      //     textColor: [0, 0, 0],\n      //     halign: \"left\",\n      //     valign: \"middle\",\n      //     columnStyles: {\n      //       0: { columnWidth: \"auto\" },\n      //       1: { columnWidth: \"auto\" },\n      //       2: { columnWidth: \"auto\" },\n      //       3: { columnWidth: \"auto\" },\n      //       4: { columnWidth: \"auto\" },\n      //       5: { columnWidth: \"auto\" },\n      //       6: { columnWidth: \"auto\" },\n      //       7: { columnWidth: \"auto\" },\n      //       8: { columnWidth: \"auto\" },\n      //       9: { columnWidth: \"auto\" },\n      //       10: { columnWidth: \"auto\" },\n      //       11: { columnWidth: \"auto\" },\n      //       12: { columnWidth: \"auto\" },\n      //       13: { columnWidth: \"auto\" },\n      //       14: { columnWidth: \"auto\" },\n      //       15: { columnWidth: \"auto\" },\n      //       16: { columnWidth: \"auto\" },\n      //       17: { columnWidth: \"auto\" },\n      //       18: { columnWidth: \"auto\" },\n      //       19: { columnWidth: \"auto\" },\n      //       20: { columnWidth: \"auto\" },\n      //       21: { columnWidth: \"auto\" },\n      //       22: { columnWidth: \"auto\" },\n      //       23: { columnWidth: \"auto\" },\n      //       24: { columnWidth: \"auto\" },\n      //       25: { columnWidth: \"auto\" },\n      //       26: { columnWidth: \"auto\" },\n      //       27: { columnWidth: \"auto\" },\n      //       28: { columnWidth: \"auto\" },\n      //       29: { columnWidth: \"auto\" },\n      //       30: { columnWidth: \"auto\" },\n      //     },\n      //   },\n      //   margin: {\n      //     top: 80,\n      //     left: 20,\n      //     right: 20,\n      //     bottom: 20,\n      //   },\n      // });\n      // doc.save(\"Libros.pdf\");\n    }\n\n  }\n};","map":{"version":3,"mappings":"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A;YAEA;YACA;UACA,CAjBA,CAkBA;;;UACA;YACA,4BACAA,8BACA,KADA,GAEAA,2BAHA;YAKA,sCACAA,2BADA;UAGA;QACA;;QACA,oCACA,mCADA;QAGA,oCACA,uCADA;MAGA,CAvCA,EAwCAC,KAxCA,CAwCAN,WAxCA;IAyCA,CAjPA;;IAmPAoC;MACA;QACA,SADA,CACA;MACA;;MACA,iBACA,iDADA;IAGA,CA1PA;;IA2PAC;MACA;MACA;MAGA;MACA;MACA;IAEA,CApQA;;IAsQAC;MACA;QACA;MACA;;MACA;IACA,CA3QA;;IA4QAC;MACA;QACA;MACA;;MACA;IACA,CAjRA;;IAkRAR;MACA;IACA,CApRA;;IAqRAS;MACAxC;IACA,CAvRA;;IAwRAyC;MACA;MACA;MACA;IACA,CA5RA;;IA8RAC;MAEA;MACA;MACA,kCAJA,CAMA;;MACA;MACA;MACAC;QACA;QACAC;QACAC;MACA,CAJA,EATA,CAeA;;MACA;QACA;QACAC;QACAA;QACAA;QACAA,yFACAA,2CADA;QAEAA;QACAA;QACAA;MACA,CAVA,EAhBA,CA4BA;;MACA;QAAAC;MAAA;MAEA;MACAC;MACAA;MAEAA;IAGA,CApUA;;IAsUAC;MAEA,sBAFA,CAGA;;MACAC;MACA;MACA;MACA;MACA;MACAA,uBATA,CAUA;;MACA,+CAXA,CAaA;;MACA,+CAdA,CAgBA;;MACA;QACAC,qBADA;QAEAC,WAFA;QAEA;QACAC,cAHA;QAIAC,oBAJA;QAIA;QACAC,iBALA;QAMAC,mBANA;QAOAC,gBAPA;QAOA;QACAC,gBARA;QAQA;QACAC,cATA;QAUAC,kBAVA;QAWAC,cAXA;QAYAC,yBAZA;QAYA;QACAC,+BAbA;QAaA;QACAC,YAdA;QAeAC,iBAfA,CAeA;;MAfA,EAjBA,CAmCA;;MACA;;MACA;QACAC;MACA,CAvCA,CAyCA;;;MACAhB;QAAAiB;QAAAC;QAAAC;MAAA,GA1CA,CA4CA;;MACA;QACAH;MACA,CA/CA,CAiDA;;;MACAhB,uBAlDA,CAoDA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MAEA;IACA;;EAvbA;AAvDA","names":["name","components","modalPrestamo","Loading","data","isLoading","fullPage","dataToExport","prestamolibro","id","nombreLibro","autor","editorial","edicion","urlPortada","subsede","totalLibros","libros","carreras","materia","nombreAutor","editoriales","elementosPorPagina","datosPaginados","paginaActual","acceso","radioPdf","created","methods","cambiarRegistrosPorPagina","redireccionaarPdf","a","onCancel","console","consultarLibros","fetch","then","respuesta","datosRespuesta","catch","filtrarArchivos","filtrarlibros","toUpperCase","includes","consultarAutor","consultarEditorial","Enviar","listar","confirmarEliminarSolicitud","eliminar","axios","put","RUTA_SERVIDOR_LIBROS","titulo","copias","copiasDisponibles","categoria","codigo","idAutor","idEmpleado","idEditorial","idCarrera","observacion","documento","activo","location","obtenerLibro","consultarCarreras","consultarCantidad","totalPaginas","ObtenerDatosPag","paginaPrevia","paginaSiguiente","precionadoBoton","cambiaC","exportExcel","encabezados","th","encabezadosRow","fila","type","link","exportPdf","doc","overflow","fontSize","lineWidth","lineColor","font","fontStyle","halign","valign","cellPadding","tableWidth","tableBorder","tableLineColor","tableFillColor","textColor","cellWidth","actionColumn","html","startY","styles"],"sourceRoot":"src/components","sources":["ListarMaterial.vue"],"sourcesContent":["<template>\n  <div class=\"align-items-center\">\n  \n   \n\n    <div class=\"row rowS\">\n      <div class=\"form-group col-sm-4\">\n        <label for=\"\">Titulo / autor</label>\n        <input\n          v-on:keyup=\"filtrarlibros()\"\n          v-model=\"nombreLibro\"\n          type=\"text\"\n          class=\"form-control\"\n          placeholder=\"Titulo del libro\"\n        />\n      </div>\n\n      <div class=\"form-group col-sm-5\">\n        <label>Selecciona una carrera</label>\n        <select\n          v-model=\"materia\"\n          @change=\"cambiaC(materia)\"\n          class=\"form-control\"\n        >\n          <option\n            v-for=\"carrera in carreras\"\n            :key=\"carrera.id\"\n            v-bind:value=\"carrera.id\"\n          >\n            {{ carrera.nombreCarrera }}\n          </option>\n        </select>\n      </div>\n\n      \n\n        <div class=\"col-sm-2\" @change=\"cambiaC(materia)\">\n        <b-form-group label=\"Tipo: \" v-slot=\"{ ariaDescribedby }\">\n          <b-form-radio\n          v-model=\"radioPdf\"\n            :aria-describedby=\"ariaDescribedby\"\n            name=\"some-radios\"\n            value=\"0\"\n            >Libro</b-form-radio\n            >\n            <b-form-radio\n            v-model=\"radioPdf\"\n            :aria-describedby=\"ariaDescribedby\"\n            name=\"some-radios\"\n            value=\"1\"\n            >PDF</b-form-radio\n            >\n          </b-form-group>\n        </div>\n  \n\n    </div>\n    <br />\n    <label>Registros por página</label>\n    <select v-model=\"elementosPorPagina\" @change=\"cambiarRegistrosPorPagina\">\n      <option value=\"5\" selected>5</option>\n      <option value=\"10\">10</option>\n      <option value=\"20\">20</option>\n      <option value=\"999999\">Todos</option>\n    </select>\n  \n    <button\n    v-if=\"acceso == 2\"\n      type=\"button\"\n      class=\"btn\"\n      @click=\"exportPdf()\"\n    >\n    <img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAACXBIWXMAAAsTAAALEwEAmpwYAAAChklEQVR4nO2Z22vTcBTH+08UrcpASE1SrQ1ug9i5sU1l4pQpE2XTubeBoOANxSdFUcELClNURGhZH0TFMh+com4Im+iDQ0HmEPVBENKbcfSS3tav/H5j6VYzy1zSVsmBz0M5/NJPT8/v5JfWYjGjROFkWafLzvXojcA4dugq6mK4g4KdhyEw3IV/Q9TOw8VwF3UXvSNUYaB6yYIY9t6G/8QhrF3B5WXt/HldRUdqbJBE64JIjY4gfvcWBqttcM+UZfhLFSkqiVZ9ZY0UlfSUNVpU0pAVGP5yRYpKmrLcybKLKk8fINzV9Bsvt9WhlnVMyw6VXfRPsblxQ2WIBltXIrR9zZy0OCqkolIRWljWFIVZ0fmE2aOiuZl4dTyFO9ZBedGvEvNdQ6i9Rt1UyjO/mks88mHi9H4E6peq+fDe5lnrCfLxbv3H0499bfQuQm6FRCTzdRy5eBSh9lqax2QWqbfDSPi9SL56jlxSQebTBwQ3sTQvH+mcWv/4Hl1PkA93GCcaahPoa1KtbOA7Yp4rqujEmQP5Cu5yY1KOQHlyf5ZocKPd2IFfKCq5FyH77QvivuuaopJoRbT3FHKpJP1Q06JkfaB5OYVcwzDRmPcqojfOIvV6EMikae/NJSof65qq4pZVqujMCHfWGyea+TyG9Md3dDNEelpVKWhV9OY55JQEpDqbKkquE+leTwk0LCvBV18ACkSJSC76Ewm/p8w9qiGaHhullU6/f0PbgpxDaS+WUjS0U6SjR+uNCImHHponxPp6IR/dA8m9OD8Fdjcg0d+HQGOVecyDeXAWzRO+1XxmEhY6nvT42XGgCE16zNESM/R/ijoN+rPBVYTVDLt1XqJmWP4ufgGVhSpkgRcCwgAAAABJRU5ErkJggg==\">  </button> \n     <button\n     v-if=\"acceso == 2\"\n      type=\"button\"\n      class=\"btn\"\n      @click=\"exportExcel()\"\n    >\n    <img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAACTUlEQVR4nO2ZW0sUYRjH5xvkRcieRnfNPZhtuTNBalgNaemaRUWQ6a5p2slq14Uyd6edGTpQKBFhRQXiTV0pXnQhEmLuTF/E+h7/eN+VocBK2Tks8v7hf/E+8w48v3kON8NxTExMu1/id61X1NWfoqGhUtc+Tc45DiDo2g8rkieukSXUFKTnjgKIFiVvAjgNIdoB4CSEaBeA7BCErQCyAxC2A8g2QzgCINsI4RiAbBOElQB7n3T/F2JPQVKrFqBpKbMtiNoXfXNVCbATcwxgU6wCBmuhyrRrW2jfs0vgJ07hwMIEPTd/Gqfn2MdRxBey4DOd2D9/8493Di7lUD/VC//YMfivH0d45op7APHFLDypVgQLfRB0FYG7J2liiVUZzZ/vwDN4BLH3I+Z9csc32kEdfTOE6OwQwi8H3F2jDdoFChGe6acJN83fKFdjC4CWr3ka4zNdENaK7rcQTWolD+9wO4Won0ya8a0AiEm1SNw31oHI6xTEkuIuwKEvD+BJt8Gbbit/2ZL6TwBxXaEx/60T9HlIPusigK6i7n4PfMNHEZlNlxN+e/XvAOtK2WQevhURuC3Bm2qls+EKQOzDNZpk5NWgOcQEJrEyZQLU5U4jpJ2nJpspMC6hcbofjdOXaeX4bJdLFSgpCBXPIZg/g8TaI3ONBieTiL4bQXwxR2fid5MVSoaerFf+XicaHl9Ey/JDd2fATnMMYFOsAgZrocrEWshgLVSZWAsZrIWq5xfTdi0Y6gZnlQ7rWo+TEIKhbiRKSrdlAExMTFzV6hfz8wpqDZBppQAAAABJRU5ErkJggg==\">\n    </button>\n    <br v-if=\"acceso == 1\"/>\n  <br v-if=\"acceso == 1\"/>\n    <nav aria-label=\"Page navigation example\">\n      <ul align=\"center\" class=\"pagination\">\n        <li class=\"page-item\" v-on:click=\"paginaPrevia()\">\n          <a class=\"page-link\" href=\"#\">Previous</a>\n        </li>\n        <li\n          v-for=\"pagina in totalPaginas()\"\n          :key=\"pagina\"\n          class=\"page-item\"\n          v-bind:class=\"activo(pagina)\"\n        >\n          <a class=\"page-link\" href=\"#\" v-on:click=\"ObtenerDatosPag(pagina)\">{{\n            pagina\n          }}</a>\n        </li>\n        <li class=\"page-item\" v-on:click=\"paginaSiguiente()\">\n          <a class=\"page-link\" href=\"#\">Next</a>\n        </li>\n      </ul>\n    </nav>\n   \n    <div class=\"estudiante\" v-if=\"acceso == 1\">\n      <div class=\"carrusel row\">\n        <div\n          align=\"center\"\n          class=\"listado col-6 col-lg-3 col-md-4 col-xl-3\"\n          v-for=\"libro in datosPaginados\"\n          :key=\"libro.id\"\n        >\n          <div v-if=\"libro.documento == null\">\n            <div\n              class=\"icon-container-2\"\n              v-bind:style=\"{\n                backgroundImage: 'url(' + libro.urlPortada + ')',\n                backgroundSize: 'cover',\n              }\"\n              v-b-modal.modal-lg\n              @click=\"\n                obtenerLibro(\n                  libro.id,\n                  libro.titulo,\n                  libro.nombre,\n                  editoriales[[libro.idEditorial] - 1].nombreEditorial,\n                  libro.edicion,\n                  libro.urlPortada\n                )\n              \"\n            >\n              <div v-if=\"acceso == 2\">\n                <div class=\"btn-libro-1\">\n                  <div\n                    align=\"center\"\n                    class=\"btn-libro\"\n                    @click=\"Enviar(libro.id)\"\n                  >\n                    ✍🏻\n                  </div>\n                </div>\n                <div class=\"btn-circle-2\">\n                  <div v-on:click=\"confirmarEliminarSolicitud(libro)\" class=\"btn-circle\">❌</div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div v-else>\n            <div\n              class=\"icon-container-2\"\n              v-bind:style=\"{\n                backgroundImage: 'url(' + libro.urlPortada + ')',\n                backgroundSize: 'cover',\n              }\"\n              @click=\"redireccionaarPdf(libro.documento)\"\n            >\n              <div v-if=\"acceso == 2\">\n                <div class=\"btn-libro-1\">\n                  <div\n                    align=\"center\"\n                    class=\"btn-libro\"\n                    @click=\"Enviar(libro.id)\"\n                  >\n                    ✍🏻\n                  </div>\n                </div>\n                <div class=\"btn-circle-2\">\n                  <div v-on:click=\"confirmarEliminarSolicitud(libro)\" class=\"btn-circle\">❌</div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"titulo\">{{ libro.titulo }}</div>\n          <div class=\"autor\">\n            <img\n              src=\"https://img.icons8.com/ios-filled/18/000000/guest-male--v1.png\"\n            />\n            {{ libro.nombre }}\n            <div style=\"font-size: 100%\">\n              <div class=\"editorial\" style=\"font-size: 100%\"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"estudiante\" v-if=\"acceso == 2\">\n      <div class=\"d-md-block table-responsive table-sm small border\">\n        <table class=\"table text-center table-striped tableMb\" id=\"\">\n          <thead class=\"thMb\">\n            <tr class=\"trMb\">\n              <!-- <th>ID</th> -->\n              <th>TITULO</th>\n              <th>AUTOR</th>\n              <th>EDITORIAL</th>\n              <th>EDICION</th>\n              <th>CODIGO</th>\n              <th>COPIAS</th>\n              <th>DISPONIBLES</th>\n              <th>ACCION</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr class=\"trMb\" v-for=\"libro in datosPaginados\" :key=\"libro.id\">\n              <td data-titulo=\"Titulo: \">{{ libro.titulo }}</td>\n              <td data-titulo=\"Autor\">{{ libro.nombre }}</td>\n              <td data-titulo=\"Editorial: \">\n                {{ editoriales[[libro.idEditorial] - 1].nombreEditorial }}\n              </td>\n              <td data-titulo=\"Edición: \">{{ libro.edicion }}</td>\n              <td data-titulo=\"Codigo: \">{{ libro.codigo }}</td>\n              <td data-titulo=\"Copias: \">{{ libro.copias }}</td>\n              <td data-titulo=\"Disponibles: \">{{ libro.copiasDisponibles }}</td>\n              <td data-titulo=\"Accion: \">\n                <div class=\"btn-group\" role=\"group\" aria-label=\"\">\n                  <div v-if=\"libro.documento != null\">\n                    <button\n                      @click=\"redireccionaarPdf(libro.documento)\"\n                      class=\"btn btn-info\"\n                    >\n                      Ver PDF\n                    </button>\n                  </div>\n                  <div v-else>\n                    <button\n                      v-b-modal.modal-lg\n                      @click=\"\n                        obtenerLibro(\n                          libro.id,\n                          libro.titulo,\n                          libro.nombre,\n                          editoriales[[libro.idEditorial] - 1].nombreEditorial,\n                          libro.edicion,\n                          libro.urlPortada\n                        )\n                      \"\n                      class=\"btn btn-info\"\n                    >\n                      <font-awesome-icon\n                        icon=\"fa-solid fa-book\"\n                        style=\"color: white\"\n                        class=\"iconos\"\n                      />\n                    </button>\n                  </div>\n\n                  <button\n                    v-b-modal.modal-center\n                    @click=\"Enviar(libro.id)\"\n                    class=\"btn btn-success\"\n                  >\n                    <font-awesome-icon icon=\"fa-solid fa-pen-to-square\" />\n                  </button>\n\n                  <button\n                    type=\"button\"\n                    @click=\"confirmarEliminarSolicitud(libro)\"\n                    class=\"btn btn-danger\"\n                  >\n                    <font-awesome-icon icon=\"fa-solid fa-trash-can\" />\n                  </button>\n                </div>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n\n    \n    <b-modal\n      id=\"modal-lg\"\n      size=\"lg\"\n      centered\n      title=\"Solicitud de prestamo\"\n      hide-footer\n       hide-close-butto\n    >\n      <modalPrestamo v-bind:Libro=\"this.prestamolibro\"></modalPrestamo>\n    \n    </b-modal>\n\n    <div class=\"estudiante\" v-if=\"acceso == 2\" style=\"display: none\">\n      <div class=\"d-none d-sm-none d-md-block table-responsive table-sm small\">\n        <table class=\"table\" id=\"tablaLibros\">\n          <thead>\n            <tr>\n              <th>ID</th>\n              <th>TITULO</th>\n              <th>AUTOR</th>\n              <th>EDITORIAL</th>\n              <th>EDICION</th>\n              <th>CODIGO</th>\n              <th>COPIAS</th>\n              <th>DISPONIBLES</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"(libro, index) in dataToExport\" :key=\"libro.id\">\n              <td>{{ index + 1 }}</td>\n              <td>{{ libro.titulo }}</td>\n              <td>{{ libro.nombre }}</td>\n              <td>\n                {{ editoriales[[libro.idEditorial] - 1].nombreEditorial }}\n              </td>\n              <td>{{ libro.edicion }}</td>\n              <td>{{ libro.codigo }}</td>\n              <td>{{ libro.copias }}</td>\n              <td>{{ libro.copiasDisponibles }}</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n\n   \n  </div>\n</template>\n\n<script>\n// import { Bar } from 'vue-chartjs'\n// import { Chart as ChartJS,Title, ArcElement, Tooltip, Legend,BarElement, CategoryScale, LinearScale } from 'chart.js'\n// import { Doughnut } from 'vue-chartjs'\n// ChartJS.register(Title, ArcElement, Tooltip, Legend, BarElement, CategoryScale, LinearScale)\n// Import component\nimport Loading from \"vue-loading-overlay\";\n// Import stylesheet\nimport \"vue-loading-overlay/dist/vue-loading.css\";\n// import * as XLSX from 'xlsx'\nimport * as saveAs from \"file-saver\";\nimport listar from \"@/views/LibrosView.vue\";\nimport { jsPDF } from \"jspdf\";\nimport \"jspdf-autotable\";\n// import { Carousel, Slide } from 'vue-carousel';\nimport modalPrestamo from \"@/components/modalPrestamo.vue\";\nimport axios from \"axios\";\n// import CrearLibro from '@/components/CrearLibro.vue'\nexport const RUTA_SERVIDOR_ALUMNOS = process.env.VUE_APP_RUTA_API_ALUMNOS;\nexport const RUTA_SERVIDOR_LIBROS = process.env.VUE_APP_RUTA_API_LIBROS;\n\nexport default {\n  name: \"ListarLibro\",\n\n  components: {\n    // Bar,\n    // Doughnut,\n    modalPrestamo,\n    Loading,\n  },\n\n  data() {\n    return {\n      isLoading: true,\n      fullPage: true,\n      dataToExport: [],\n      prestamolibro: {\n        id: 0,\n        nombreLibro: \"\",\n        autor: \"\",\n        editorial: \"\",\n        edicion: \"\",\n        urlPortada: \"\",\n      },\n      subsede: localStorage.getItem(\"idSubsede\"),\n      totalLibros: [],\n      libros: [],\n      autor: [],\n      carreras: [],\n      materia: 1,\n      nombreLibro: \"\",\n      nombreAutor: 1,\n      editoriales: [],\n      elementosPorPagina: 10,\n      datosPaginados: [],\n      paginaActual: 1,\n      acceso: localStorage.getItem(\"acceso\"),\n      \n      radioPdf: 0,\n\n    };\n  },\n\n  created: async function () {\n    this.consultarAutor();\n    await this.consultarEditorial();\n\n    // this.consultarLibros();\n    this.isLoading = false;\n  },\n  async mounted() {\n    await this.consultarCarreras();\n    // this.consultarCantidad();\n    this.ObtenerDatosPag(1);\n  },\n\n  methods: {\n    cambiarRegistrosPorPagina() {\n      this.paginaActual=1\n      this.ObtenerDatosPag(this.paginaActual);\n     \n    },\n    redireccionaarPdf(pdf) {\n      var a = document.createElement(\"a\");\n      a.target = \"_blank\";\n      a.href = \"http://192.168.0.113:8082/storage/documentos/\" + pdf;\n      a.click();\n    },\n\n    onCancel() {\n      console.log(\"usuario cancelo la carga.\");\n    },\n\n    \n    consultarLibros() {\n      fetch(RUTA_SERVIDOR_LIBROS + \"/librosSubsede/\" + this.subsede)\n        .then((respuesta) => respuesta.json())\n        .then((datosRespuesta) => {\n          this.libros = [];\n          if (typeof datosRespuesta[0].success === \"undefined\") {\n            datosRespuesta.sort((a, b) => {\n              if (a.titulo.toUpperCase() == b.titulo.toUpperCase()) {\n                return 0;\n              }\n              if (a.titulo.toUpperCase() > b.titulo.toUpperCase()) {\n                return 1;\n              }\n              if (a.titulo.toUpperCase() < b.titulo.toUpperCase()) {\n                return -1;\n              }\n            });\n            this.libros = datosRespuesta;\n\n            for (let index = 0; index < this.libros.length; index++) {\n              for (let index2 = 0; index2 < this.autor.length; index2++) {\n                if (this.autor[index2].id == this.libros[index].idAutor) {\n                  var nombreAutor = this.autor[index2].nombre;\n                  this.libros[index].nombre = nombreAutor;\n                }\n              }\n            }\n\n            this.filtrarlibros();\n            this.filtrarArchivos();\n          }\n        })\n        .catch(console.log);\n    },\n\n    filtrarArchivos() {\n      this.dataToExport = [];\n      for (let index = 0; index < this.libros.length; index++) {\n        if (\n          this.libros[index].idCarrera === this.materia &&\n          this.libros[index].activo === 1 &&\n          this.libros[index].documento != null &&\n          this.radioPdf == 1\n        ) {\n          this.dataToExport = this.dataToExport.concat(this.libros[index]);\n        } else {\n          if (\n            this.libros[index].idCarrera === this.materia &&\n            this.libros[index].activo === 1 &&\n            this.libros[index].documento == null &&\n            this.radioPdf == 0\n          ) {\n            this.dataToExport = this.dataToExport.concat(this.libros[index]);\n          }\n        }\n      }\n    },\n\n    filtrarlibros() {\n      this.totalLibros = [];\n      for (let index = 0; index < this.libros.length; index++) {\n        if (\n          this.libros[index].idCarrera === this.materia &&\n          this.libros[index].activo === 1 &&\n          (this.libros[index].titulo\n            .toUpperCase()\n            .includes(this.nombreLibro.toUpperCase()) ||\n            this.libros[index].nombre\n              .toUpperCase()\n              .includes(this.nombreLibro.toUpperCase())) &&\n          this.libros[index].documento != null &&\n          this.radioPdf == 1\n        ) {\n          this.totalLibros = this.totalLibros.concat(this.libros[index]);\n          this.ObtenerDatosPag(1);\n        } else {\n          if (\n            this.libros[index].idCarrera === this.materia &&\n            this.libros[index].activo === 1 &&\n            (this.libros[index].titulo\n              .toUpperCase()\n              .includes(this.nombreLibro.toUpperCase()) ||\n              this.libros[index].nombre\n                .toUpperCase()\n                .includes(this.nombreLibro.toUpperCase())) &&\n            this.libros[index].documento == null &&\n            this.radioPdf == 0\n          ) {\n            this.totalLibros = this.totalLibros.concat(this.libros[index]);\n\n            this.ObtenerDatosPag(1);\n          }\n        }\n      }\n\n      if (this.totalLibros.length === 0) {\n        this.paginaPrevia();\n        //this.paginaActual=0;\n      }\n    },\n\n    consultarAutor() {\n      fetch(RUTA_SERVIDOR_LIBROS + \"/autor/\")\n        .then((respuesta) => respuesta.json())\n        .then((datosRespuesta) => {\n          this.autor = datosRespuesta;\n\n          this.consultarLibros();\n        })\n        .catch(console.log);\n    },\n\n    consultarEditorial() {\n      fetch(RUTA_SERVIDOR_LIBROS + \"/editoriales/\")\n        .then((respuesta) => respuesta.json())\n        .then((datosRespuesta) => {\n          if (typeof datosRespuesta[0].success === \"undefined\") {\n            this.editoriales = datosRespuesta;\n          }\n        })\n        .catch(console.log);\n    },\n\n    Enviar(id) {\n      this.$emit(\"recibiendo\", id);\n      listar.editar();\n    },\n    confirmarEliminarSolicitud(libro) {\n      if (window.confirm(\"¿Estás seguro de que deseas eliminar este libro?\")) {\n        this.eliminar(libro);\n      }\n    },\n    eliminar(libro) {\n      axios\n        .put(RUTA_SERVIDOR_LIBROS + \"/libros/\" + libro.id, {\n          titulo: libro.titulo,\n          copias: libro.copias,\n          copiasDisponibles: libro.copiasDisponibles,\n          categoria: libro.categoria,\n          edicion: libro.edicion,\n          codigo: libro.codigo,\n          idAutor: parseInt(libro.idAutor),\n          idEmpleado: libro.idEmpleado,\n          idEditorial: parseInt(libro.idEditorial),\n          idCarrera: parseInt(libro.idCarrera),\n          urlPortada: libro.urlPortada,\n          observacion: libro.observacion,\n          documento: libro.documento,\n          activo: 0,\n        })\n        .then(function (response) {\n          location.reload();\n        })\n        .catch(function (error) {\n          console.log(error);\n          // console.log(this.libro);\n        });\n    },\n    obtenerLibro(id, nombre, autor, editorial, edicion, urlPortada) {\n      this.prestamolibro = {\n        id: id,\n        nombreLibro: nombre,\n        autor: autor,\n        editorial: editorial,\n        edicion: edicion,\n        urlPortada: urlPortada,\n      };\n    },\n\n    consultarCarreras() {\n      fetch(RUTA_SERVIDOR_LIBROS + \"/carreras\")\n        .then((respuesta) => respuesta.json())\n        .then((datosRespuesta) => {\n          this.carreras = [];\n          if (typeof datosRespuesta[0].success === \"undefined\") {\n            this.carreras = datosRespuesta;\n          }\n        })\n        .catch(console.log);\n    },\n\n    consultarCantidad() {\n      fetch(RUTA_SERVIDOR_LIBROS + \"/cantidadLibros/\" + this.subsede)\n        .then((respuesta) => respuesta.json())\n        .then((datosRespuesta) => {\n          if (typeof datosRespuesta[0].success === \"undefined\") {\n            for (let index = 0; index < datosRespuesta[1].length; index++) {\n              this.chartDataL.labels.push(\n                datosRespuesta[1][index][0] +\n                  \" : \" +\n                  datosRespuesta[1][index][1]\n              );\n              this.chartDataL.datasets[0].data.push(\n                datosRespuesta[1][index][1]\n              );\n\n              this.totalesL += datosRespuesta[1][index][1];\n              this.totalesD += datosRespuesta[2][index][1];\n              this.dataBar.labels.push(datosRespuesta[1][index][0]);\n\n              this.dataBar.datasets[0].data.push(datosRespuesta[1][index][1]);\n              this.dataBar.datasets[1].data.push(datosRespuesta[2][index][1]);\n            }\n            // this.data.labels.push(datosRespuesta[1][index][0]+ ' : '+datosRespuesta[1][index][1] )\n            for (let index = 0; index < datosRespuesta[0].length; index++) {\n              this.chartDataP.labels.push(\n                datosRespuesta[0][index][0] +\n                  \" : \" +\n                  datosRespuesta[0][index][1]\n              );\n              this.chartDataP.datasets[0].data.push(\n                datosRespuesta[0][index][1]\n              );\n            }\n          }\n          this.dataBar.datasets[0].label.push(\n            \"Libros Totales : \" + this.totalesL\n          );\n          this.dataBar.datasets[1].label.push(\n            \"Libros Disponibles : \" + this.totalesD\n          );\n        })\n        .catch(console.log);\n    },\n\n     totalPaginas() {\n      if (this.elementosPorPagina === -1) {\n        return 1; // Mostrar todo en una sola página\n      }\n      return Math.ceil(\n        this.totalLibros.length / this.elementosPorPagina\n      );\n    },\n    ObtenerDatosPag(noPag) {\n  this.paginaActual = noPag;\n  this.datosPaginados = [];\n\n \n    let ini = noPag * this.elementosPorPagina - this.elementosPorPagina;\n    let fin = noPag * this.elementosPorPagina;\n    this.datosPaginados = this.totalLibros.slice(ini, fin);\n  \n},\n    \n    paginaPrevia() {\n      if (this.paginaActual > 1) {\n        this.paginaActual--;\n      }\n      this.ObtenerDatosPag(this.paginaActual);\n    },\n    paginaSiguiente() {\n      if (this.paginaActual < this.totalPaginas()) {\n        this.paginaActual++;\n      }\n      this.ObtenerDatosPag(this.paginaActual);\n    },\n    activo(noPoag) {\n      return noPoag === this.paginaActual ? \"active\" : \"\";\n    },\n    precionadoBoton(id) {\n      console.log(id);\n    },\n    cambiaC(carrera) {\n      this.materia = carrera;\n      this.filtrarlibros();\n      this.filtrarArchivos();\n    },\n\n    exportExcel() {\n\n      const tabla = document.createElement('table');\n  const thead = tabla.createTHead();\n  const tbody = tabla.createTBody();\n\n  // Agregar encabezados de columna a la tabla\n  const encabezados = ['Id','Titulo', 'Autor','Editorial', 'Edicion', 'Codigo', 'Copias','Disponibles'];\n  const encabezadosRow = thead.insertRow();\n  encabezados.forEach(encabezado => {\n    const th = document.createElement('th');\n    th.innerText = encabezado;\n    encabezadosRow.appendChild(th);\n  });\n\n  // Agregar filas de datos a la tabla\n  this.datosPaginados.forEach(libro => {\n    const fila = tbody.insertRow();\n    fila.insertCell().innerText = libro.id;\n    fila.insertCell().innerText = libro.titulo;\n    fila.insertCell().innerText = libro.nombre;\n    fila.insertCell().innerText = this.editoriales[[libro.idEditorial] - 1].nombreEditorial,\n    fila.insertCell().innerText = libro.edicion;\n    fila.insertCell().innerText = libro.codigo;\n    fila.insertCell().innerText = libro.copias;\n    fila.insertCell().innerText = libro.copiasDisponibles;\n  });\n\n  // Crear un archivo Blob para la tabla HTML\n  const blob = new Blob([tabla.outerHTML], { type: 'application/vnd.ms-excel' });\n\n  const link = document.createElement('a');\n  link.href = URL.createObjectURL(blob);\n  link.download = 'Libros.xls';\n\n  link.click();\n\n     \n    },\n\n    exportPdf() {\n\n      var doc = new jsPDF();\n//titulo\ndoc.setFontSize(16);\n  var title = \"Libros\";\n  var titleWidth = doc.getStringUnitWidth(title) * doc.internal.getFontSize() / doc.internal.scaleFactor;\n  var pageWidth = doc.internal.pageSize.getWidth();\n  var x = (pageWidth - titleWidth) / 2;\n  doc.text(title, x, 10);\n  // Obtener la tabla visible\n  var table = document.querySelector('.tableMb');\n\n  // Obtener la tabla visible\n  var table = document.querySelector('.tableMb');\n\n  // Configurar los estilos de la tabla\n  var styles = {\n    overflow: 'linebreak',\n    fontSize: 8, // Tamaño de fuente reducido\n    lineWidth: 0.1,\n    lineColor: [0, 0, 0], // Color de las líneas\n    font: 'helvetica',\n    fontStyle: 'normal',\n    halign: 'center', // Alineación horizontal\n    valign: 'middle', // Alineación vertical\n    cellPadding: 2,\n    tableWidth: 'auto',\n    tableBorder: 1,\n    tableLineColor: [0, 0, 0], // Color del borde de la tabla\n    tableFillColor: [255, 255, 255], // Color de fondo de la tabla\n    textColor: 0,\n    cellWidth: 'auto', // Ajustar el ancho de la celda automáticamente\n  };\n\n  // Ocultar la última columna (Acción) antes de agregar la tabla al documento PDF\n  var actionColumn = table.querySelector('th:last-child, td:last-child');\n  if (actionColumn) {\n    actionColumn.style.display = 'none';\n  }\n\n  // Agregar la tabla al documento PDF\n  doc.autoTable({ html: table, startY: 20, styles });\n\n  // Mostrar la última columna nuevamente\n  if (actionColumn) {\n    actionColumn.style.display = 'table-cell';\n  }\n\n  // Guardar el PDF\n  doc.save('Libros.pdf');\n\n      //convertir tabla en pdf sin JSPDF\n      // var doc = new jsPDF(\"p\", \"pt\");\n      // var elem = document.getElementById(\"tablaLibros\");\n      // var res = doc.autoTableHtmlToJson(elem);\n      // doc.autoTable(res.columns, res.data, {\n      //   theme: \"grid\",\n      //   styles: {\n      //     overflow: \"linebreak\",\n      //     fontSize: 8,\n      //     rowHeight: 20,\n      //     font: \"helvetica\",\n      //     fontStyle: \"normal\",\n      //     lineWidth: 0.1,\n      //     lineColor: [0, 0, 0],\n      //     fillColor: [255, 255, 255],\n      //     textColor: [0, 0, 0],\n      //     halign: \"left\",\n      //     valign: \"middle\",\n      //     columnStyles: {\n      //       0: { columnWidth: \"auto\" },\n      //       1: { columnWidth: \"auto\" },\n      //       2: { columnWidth: \"auto\" },\n      //       3: { columnWidth: \"auto\" },\n      //       4: { columnWidth: \"auto\" },\n      //       5: { columnWidth: \"auto\" },\n      //       6: { columnWidth: \"auto\" },\n      //       7: { columnWidth: \"auto\" },\n      //       8: { columnWidth: \"auto\" },\n      //       9: { columnWidth: \"auto\" },\n      //       10: { columnWidth: \"auto\" },\n      //       11: { columnWidth: \"auto\" },\n      //       12: { columnWidth: \"auto\" },\n      //       13: { columnWidth: \"auto\" },\n      //       14: { columnWidth: \"auto\" },\n      //       15: { columnWidth: \"auto\" },\n      //       16: { columnWidth: \"auto\" },\n      //       17: { columnWidth: \"auto\" },\n      //       18: { columnWidth: \"auto\" },\n      //       19: { columnWidth: \"auto\" },\n      //       20: { columnWidth: \"auto\" },\n      //       21: { columnWidth: \"auto\" },\n      //       22: { columnWidth: \"auto\" },\n      //       23: { columnWidth: \"auto\" },\n      //       24: { columnWidth: \"auto\" },\n      //       25: { columnWidth: \"auto\" },\n      //       26: { columnWidth: \"auto\" },\n      //       27: { columnWidth: \"auto\" },\n      //       28: { columnWidth: \"auto\" },\n      //       29: { columnWidth: \"auto\" },\n      //       30: { columnWidth: \"auto\" },\n      //     },\n      //   },\n      //   margin: {\n      //     top: 80,\n      //     left: 20,\n      //     right: 20,\n      //     bottom: 20,\n      //   },\n      // });\n\n      // doc.save(\"Libros.pdf\");\n    },\n  },\n};\n</script>\n\n<style>\n.my-chart-id {\n  width: 30px;\n  height: 30px;\n}\n\n.groupB {\n  width: 8rem;\n}\n\n.btn-circle-2,\n.btn-libro-1,\n.btn-libro-2 {\n  position: absolute;\n  bottom: 0.5rem;\n  left: 0.5rem;\n  width: 2.5rem;\n  height: 2.5rem;\n\n  text-align: center;\n  line-height: 1.8rem;\n  cursor: pointer;\n  /* background: #e1e1e1;\n\n  box-shadow:  5px 5px 10px #a9a9a9,\n             -5px -5px 10px #dddddd; */\n}\n\n.btn-circle,\n.btn-libro {\n  position: absolute;\n\n  width: 2rem;\n  height: 2rem;\n  border-radius: 50%;\n\n  background-color: rgb(237, 237, 237);\n  border: rgb(118, 118, 118) 0.07rem solid;\n\n  text-align: center;\n  line-height: 1.8rem;\n  cursor: pointer;\n\n  transition: all 0.2s ease-in-out;\n}\n\n.btn-libro-1 {\n  left: 8rem;\n}\n.btn-libro-2 {\n  left: 4.25rem;\n}\n.btn-circle:active,\n.btn-libro:active {\n  box-shadow: inset 4px 4px 8px #a9a9a9, inset -4px -4px 8px #ffffff;\n  font-size: 1.4em;\n}\n\n.titulo {\n  width: 10rem;\n  font-size: 12px;\n  font-weight: bold;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.editorial {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.autor {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-top: 0rem;\n  padding-bottom: 0.5rem;\n  padding-left: 0.5rem;\n  padding-right: 0.5rem;\n  overflow: hidden;\n  width: 10rem;\n  font-size: 12px;\n\n  margin-bottom: 2rem;\n}\n\n.icon-container-2 {\n  position: relative;\n  width: 10rem;\n  height: 16rem;\n  padding: 0;\n\n  padding-top: 0.5rem;\n}\n\n.icon-container-2 {\n  transition: all 0.3s ease;\n  color: #41403e;\n  font-size: 2rem;\n  letter-spacing: 1px;\n  outline: none;\n  box-shadow: 20px 38px 34px -26px hsla(0, 0%, 0%, 0.2);\n  border-color: #a9a9a9;\n  border: solid;\n}\n.icon-container-2:hover {\n  box-shadow: 2px 8px 4px -6px rgba(0, 0, 0, 0.501);\n  -webkit-transform: scale(0.98);\n  -ms-transform: scale(0.98);\n  transform: scale(0.98);\n}\n.icon-container-2.lined.thin {\n  border: solid 2px #282828;\n}\n\n@media screen and (max-width: 480px) {\n  .titulo {\n    margin-top: 0;\n    padding-top: 0.5rem;\n\n    font-size: 12px;\n  }\n  .autor {\n    overflow: hidden;\n\n    font-size: 12px;\n  }\n\n  .icon-container-2 {\n    width: 9.5rem;\n    height: 16rem;\n    padding: 0;\n\n    padding-top: 0.5rem;\n  }\n\n  .btn-circle,\n  .btn-libro {\n    position: absolute;\n\n    width: 2rem;\n    height: 2rem;\n\n    background-color: rgb(255, 255, 255);\n\n    text-align: center;\n    line-height: 1.8rem;\n    cursor: pointer;\n\n    transition: all 0.2s ease-in-out;\n  }\n\n  .btn-libro-1 {\n    left: 6.5rem;\n  }\n  .btn-libro-2 {\n    left: 3.5rem;\n  }\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}