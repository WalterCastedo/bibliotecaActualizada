{"ast":null,"code":"import { defineComponent, shallowRef, computed, toRef, nextTick, openBlock, createElementBlock, normalizeClass, renderSlot, normalizeProps, guardReactiveProps, createBlock, Teleport, withModifiers, createCommentVNode } from \"vue\";\nimport { p as pick_1, k as kebabCase_1 } from \"../../../vendor.js\";\nimport { g as generateUniqueId } from \"../../utils/uuid.js\";\nimport { u as useBem } from \"../../composables/useBem.js\";\nimport { u as useClickOutside } from \"../../composables/useClickOutside.js\";\nimport { u as useComponentPresetProp } from \"../../composables/useComponentPreset.js\";\nimport { u as useDebounceFn } from \"../../composables/useDebounce.js\";\nimport { u as useDocument } from \"../../composables/useDocument.js\";\nimport { p as placementsPositions, u as useDropdown } from \"../../composables/useDropdown.js\";\nimport { u as useHTMLElement } from \"../../composables/useHTMLElement.js\";\nimport { u as useHTMLElementSelector } from \"../../composables/useHTMLElementSelector.js\";\nimport { u as useIsMounted } from \"../../composables/useIsMounted.js\";\nimport { c as createStatefulProps, u as useStatefulEmits, b as useStateful } from \"../../composables/useStateful.js\";\nimport { u as useTranslation } from \"../../composables/useTranslation.js\";\nimport { u as useAnchorSelector } from \"./hooks/useAnchorSelector.js\";\nimport { u as useCursorAnchor } from \"./hooks/useCursorAnchor.js\";\nimport { u as useKeyboardNavigation, a as useMouseNavigation } from \"./hooks/useDropdownNavigation.js\";\nimport { _ as _export_sfc } from \"../../../plugin-vue_export-helper.js\";\n\nvar VaDropdown_vue_vue_type_style_index_0_lang = /* @__PURE__ */(() => \":root{--va-dropdown-line-height: 1;--va-dropdown-content-wrapper-z-index: var(--va-z-index-teleport-overlay, 9);--va-dropdown-display: inline-flex}.va-dropdown{line-height:var(--va-dropdown-line-height);font-family:var(--va-font-family);display:var(--va-dropdown-display);position:relative;max-width:100%;vertical-align:middle}.va-dropdown--disabled{cursor:default;opacity:.4;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.va-dropdown__content-wrapper{z-index:var(--va-dropdown-content-wrapper-z-index);font-family:var(--va-font-family);top:0;left:0}\\n\")();\n\nconst _sfc_main = defineComponent({\n  name: \"VaDropdown\",\n  props: { ...createStatefulProps(Boolean, true),\n    ...useComponentPresetProp,\n    disabled: {\n      type: Boolean\n    },\n    readonly: {\n      type: Boolean\n    },\n    anchorSelector: {\n      type: String,\n      default: \"\"\n    },\n    innerAnchorSelector: {\n      type: String,\n      default: \"\"\n    },\n    target: {\n      type: [String, Object],\n      default: void 0\n    },\n    preventOverflow: {\n      type: Boolean,\n      default: false\n    },\n    keepAnchorWidth: {\n      type: Boolean,\n      default: false\n    },\n    isContentHoverable: {\n      type: Boolean,\n      default: true\n    },\n    closeOnContentClick: {\n      type: Boolean,\n      default: true\n    },\n    closeOnClickOutside: {\n      type: Boolean,\n      default: true\n    },\n    closeOnAnchorClick: {\n      type: Boolean,\n      default: true\n    },\n    hoverOverTimeout: {\n      type: Number,\n      default: 30\n    },\n    hoverOutTimeout: {\n      type: Number,\n      default: 200\n    },\n    offset: {\n      type: [Array, Number],\n      default: 0\n    },\n    stickToEdges: {\n      type: Boolean,\n      default: false\n    },\n    autoPlacement: {\n      type: Boolean,\n      default: true\n    },\n    cursor: {\n      type: Boolean,\n      default: false\n    },\n    trigger: {\n      type: String,\n      default: \"click\",\n      validator: value => [\"click\", \"right-click\", \"hover\", \"dblclick\", \"none\"].includes(value)\n    },\n    placement: {\n      type: String,\n      default: \"auto\",\n      validator: value => placementsPositions.includes(value)\n    },\n    keyboardNavigation: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: [...useStatefulEmits, \"anchor-click\", \"anchor-right-click\", \"content-click\", \"click-outside\", \"close\", \"open\"],\n\n  setup(props, {\n    emit\n  }) {\n    const contentRef = shallowRef();\n    const {\n      valueComputed: statefulVal\n    } = useStateful(props, emit);\n    const valueComputed = computed({\n      get: () => statefulVal.value && !props.disabled && !props.readonly,\n\n      set(val) {\n        statefulVal.value = val;\n\n        if (val) {\n          emit(\"open\");\n        } else {\n          emit(\"close\");\n        }\n      }\n\n    });\n    const computedClass = useBem(\"va-dropdown\", () => pick_1(props, [\"disabled\"]));\n    const {\n      debounced: debounceHover,\n      cancel: cancelHoverDebounce\n    } = useDebounceFn(toRef(props, \"hoverOverTimeout\"));\n    const {\n      debounced: debounceUnHover,\n      cancel: cancelUnHoverDebounce\n    } = useDebounceFn(toRef(props, \"hoverOutTimeout\"));\n\n    const onMouseEnter = () => {\n      if (props.trigger !== \"hover\" || props.disabled) {\n        return;\n      }\n\n      debounceHover(() => {\n        valueComputed.value = true;\n      });\n      cancelUnHoverDebounce();\n    };\n\n    const onMouseLeave = () => {\n      if (props.trigger !== \"hover\" || props.disabled) {\n        return;\n      }\n\n      if (props.isContentHoverable) {\n        debounceUnHover(() => {\n          valueComputed.value = false;\n        });\n      } else {\n        valueComputed.value = false;\n      }\n\n      cancelHoverDebounce();\n    };\n\n    const emitAndClose = (eventName, close, e) => {\n      emit(eventName, e);\n\n      if (close && props.trigger !== \"none\") {\n        valueComputed.value = false;\n      }\n    };\n\n    const elRef = useHTMLElement(\"anchorRef\");\n\n    if (props.keyboardNavigation) {\n      useKeyboardNavigation(elRef, valueComputed);\n    }\n\n    useMouseNavigation(elRef, {\n      click(e) {\n        if (props.trigger !== \"click\" && kebabCase_1(props.trigger) !== \"right-click\" || props.disabled) {\n          return;\n        }\n\n        if (valueComputed.value) {\n          emitAndClose(\"anchor-click\", props.closeOnAnchorClick, e);\n        } else {\n          if (props.trigger !== \"click\") {\n            return;\n          }\n\n          valueComputed.value = true;\n          emit(\"anchor-click\", e);\n        }\n      },\n\n      contextmenu(e) {\n        if (kebabCase_1(props.trigger) !== \"right-click\" || props.disabled) {\n          return;\n        }\n\n        e.preventDefault();\n\n        if (valueComputed.value) {\n          emitAndClose(\"anchor-right-click\", props.closeOnAnchorClick, e);\n\n          if (props.cursor) {\n            nextTick(() => {\n              valueComputed.value = true;\n            });\n          }\n        } else {\n          valueComputed.value = true;\n          emit(\"anchor-right-click\", e);\n        }\n      },\n\n      dblclick(e) {\n        if (props.trigger !== \"dblclick\" || props.disabled) {\n          return;\n        }\n\n        if (valueComputed.value) {\n          emitAndClose(\"anchor-dblclick\", props.closeOnAnchorClick, e);\n\n          if (props.cursor) {\n            nextTick(() => {\n              valueComputed.value = true;\n            });\n          }\n        } else {\n          valueComputed.value = true;\n          emit(\"anchor-dblclick\", e);\n        }\n      },\n\n      mouseenter: onMouseEnter,\n      mouseleave: onMouseLeave\n    });\n    const {\n      anchorRef: computedAnchorRef\n    } = useAnchorSelector(props);\n    useClickOutside([computedAnchorRef, contentRef], () => {\n      if (props.closeOnClickOutside && valueComputed.value) {\n        emitAndClose(\"click-outside\", props.closeOnClickOutside);\n      }\n    });\n    const cursorAnchor = useCursorAnchor(computedAnchorRef, valueComputed);\n    const document = useDocument();\n    const isPopoverFloating = computed(() => props.preventOverflow || props.cursor);\n    const target = useHTMLElementSelector(computed(() => props.target || \"body\"));\n    const targetComputed = computed(() => {\n      var _a, _b, _c;\n\n      if (computedAnchorRef.value && !((_b = (_a = target.value) == null ? void 0 : _a.contains) == null ? void 0 : _b.call(_a, computedAnchorRef.value))) {\n        return (_c = document.value) == null ? void 0 : _c.body;\n      }\n\n      return target.value;\n    });\n    const teleportTargetComputed = computed(() => {\n      if (!isPopoverFloating.value) {\n        return elRef.value;\n      }\n\n      return targetComputed.value;\n    });\n    const teleportDisabled = computed(() => props.disabled || !isPopoverFloating.value);\n    useDropdown(computed(() => props.cursor ? cursorAnchor.value : computedAnchorRef.value), contentRef, computed(() => ({\n      placement: props.placement,\n      keepAnchorWidth: props.keepAnchorWidth,\n      offset: props.offset,\n      stickToEdges: props.stickToEdges,\n      autoPlacement: props.autoPlacement,\n      root: teleportTargetComputed.value,\n      viewport: targetComputed.value\n    })));\n    const idComputed = computed(generateUniqueId);\n    return { ...useTranslation(),\n      teleportTargetComputed,\n      teleportDisabled,\n      isMounted: useIsMounted(),\n      anchorRef: computedAnchorRef,\n      valueComputed,\n      contentRef,\n      computedClass,\n      idComputed,\n      emitAndClose,\n      onMouseEnter,\n      onMouseLeave,\n      hide: () => {\n        valueComputed.value = false;\n      },\n      show: () => {\n        valueComputed.value = true;\n      }\n    };\n  }\n\n});\n\nconst _hoisted_1 = [\"aria-label\", \"aria-disabled\", \"aria-expanded\", \"aria-controls\"];\nconst _hoisted_2 = [\"id\"];\n\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", {\n    class: normalizeClass([\"va-dropdown\", _ctx.computedClass]),\n    ref: \"anchorRef\",\n    role: \"button\",\n    \"aria-label\": _ctx.t(\"toggleDropdown\"),\n    \"aria-disabled\": _ctx.$props.disabled,\n    \"aria-expanded\": !!_ctx.valueComputed,\n    \"aria-controls\": _ctx.idComputed,\n    style: {\n      \"position\": \"relative\"\n    }\n  }, [renderSlot(_ctx.$slots, \"anchor\", normalizeProps(guardReactiveProps({\n    value: _ctx.valueComputed,\n    hide: _ctx.hide,\n    show: _ctx.show\n  }))), _ctx.isMounted ? (openBlock(), createBlock(Teleport, {\n    key: 0,\n    to: _ctx.teleportTargetComputed,\n    disabled: _ctx.teleportDisabled\n  }, [_ctx.valueComputed ? (openBlock(), createElementBlock(\"div\", {\n    key: 0,\n    ref: \"contentRef\",\n    class: \"va-dropdown__content-wrapper\",\n    id: _ctx.idComputed,\n    onMouseover: _cache[0] || (_cache[0] = $event => _ctx.$props.isContentHoverable && _ctx.onMouseEnter()),\n    onMouseout: _cache[1] || (_cache[1] = (...args) => _ctx.onMouseLeave && _ctx.onMouseLeave(...args)),\n    onClick: _cache[2] || (_cache[2] = withModifiers($event => _ctx.emitAndClose(\"content-click\", _ctx.closeOnContentClick), [\"stop\"]))\n  }, [renderSlot(_ctx.$slots, \"default\", normalizeProps(guardReactiveProps({\n    value: _ctx.valueComputed,\n    hide: _ctx.hide,\n    show: _ctx.show\n  })))], 40, _hoisted_2)) : createCommentVNode(\"\", true)], 8, [\"to\", \"disabled\"])) : createCommentVNode(\"\", true)], 10, _hoisted_1);\n}\n\nvar _VaDropdown = /* @__PURE__ */_export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\n\nexport { _VaDropdown as _ };\nimport './VaDropdown.css';","map":{"version":3,"mappings":"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","names":["_sfc_main","defineComponent","name","props","createStatefulProps","Boolean","useComponentPresetProp","disabled","type","readonly","anchorSelector","String","default","innerAnchorSelector","target","Object","preventOverflow","keepAnchorWidth","isContentHoverable","closeOnContentClick","closeOnClickOutside","closeOnAnchorClick","hoverOverTimeout","Number","hoverOutTimeout","offset","Array","stickToEdges","autoPlacement","cursor","trigger","validator","value","includes","placement","placementsPositions","keyboardNavigation","emits","useStatefulEmits","setup","emit","contentRef","shallowRef","valueComputed","statefulVal","useStateful","computed","get","set","val","useBem","pick","debounced","debounceHover","cancel","cancelHoverDebounce","useDebounceFn","toRef","debounceUnHover","cancelUnHoverDebounce","onMouseEnter","onMouseLeave","emitAndClose","eventName","close","e","useHTMLElement","useKeyboardNavigation","elRef","useMouseNavigation","click","kebabCase","contextmenu","preventDefault","nextTick","dblclick","mouseenter","mouseleave","anchorRef","computedAnchorRef","useAnchorSelector","useClickOutside","useCursorAnchor","document","useDocument","isPopoverFloating","useHTMLElementSelector","contains","body","targetComputed","teleportDisabled","useDropdown","cursorAnchor","root","teleportTargetComputed","viewport","generateUniqueId","useTranslation","isMounted","useIsMounted","computedClass","idComputed","hide","show","_createElementBlock","class","_normalizeClass","_ctx","ref","role","t","$props","style","_renderSlot","$slots","_normalizeProps","_createBlock","_Teleport","key","to","id","onMouseover","_cache","onMouseout","onClick","_withModifiers","_hoisted_2","_createCommentVNode","createCommentVNode"],"sources":["../../../../../src/components/va-dropdown/VaDropdown.vue"],"sourcesContent":["<template>\n  <div\n    class=\"va-dropdown\"\n    :class=\"computedClass\"\n    ref=\"anchorRef\"\n    role=\"button\"\n    :aria-label=\"t('toggleDropdown')\"\n    :aria-disabled=\"$props.disabled\"\n    :aria-expanded=\"!!valueComputed\"\n    :aria-controls=\"idComputed\"\n    style=\"position: relative;\"\n  >\n    <slot name=\"anchor\" v-bind=\"{ value: valueComputed, hide, show }\" />\n\n    <teleport v-if=\"isMounted\" :to=\"teleportTargetComputed\" :disabled=\"teleportDisabled\">\n      <div\n        v-if=\"valueComputed\"\n        ref=\"contentRef\"\n        class=\"va-dropdown__content-wrapper\"\n        :id=\"idComputed\"\n        @mouseover=\"$props.isContentHoverable && onMouseEnter()\"\n        @mouseout=\"onMouseLeave\"\n        @click.stop=\"emitAndClose('content-click', closeOnContentClick)\"\n      >\n        <slot v-bind=\"{ value: valueComputed, hide, show }\" />\n      </div>\n    </teleport>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, nextTick, PropType, shallowRef, toRef } from 'vue'\nimport pick from 'lodash/pick.js'\nimport kebabCase from 'lodash/kebabCase.js'\n\nimport { generateUniqueId } from '../../utils/uuid'\n\nimport {\n  useComponentPresetProp,\n  useStateful, useStatefulEmits, createStatefulProps,\n  useDebounceFn,\n  useDropdown, placementsPositions, Placement,\n  useClickOutside,\n  useBem,\n  useHTMLElementSelector,\n  useIsMounted,\n  useDocument,\n  useHTMLElement,\n  MaybeHTMLElementOrSelector,\n  useTranslation,\n} from '../../composables'\nimport { useAnchorSelector } from './hooks/useAnchorSelector'\nimport { useCursorAnchor } from './hooks/useCursorAnchor'\nimport { useKeyboardNavigation, useMouseNavigation } from './hooks/useDropdownNavigation'\nimport type { DropdownOffsetProp } from './types'\n\nexport default defineComponent({\n  name: 'VaDropdown',\n\n  props: {\n    ...createStatefulProps(Boolean, true),\n    ...useComponentPresetProp,\n    disabled: { type: Boolean },\n    readonly: { type: Boolean },\n    anchorSelector: { type: String, default: '' },\n    innerAnchorSelector: { type: String, default: '' },\n    /** Element where dropdown content will be rendered */\n    target: { type: [String, Object] as PropType<MaybeHTMLElementOrSelector>, default: undefined },\n    preventOverflow: { type: Boolean, default: false },\n    keepAnchorWidth: { type: Boolean, default: false },\n    isContentHoverable: { type: Boolean, default: true },\n    closeOnContentClick: { type: Boolean, default: true },\n    closeOnClickOutside: { type: Boolean, default: true },\n    closeOnAnchorClick: { type: Boolean, default: true },\n    hoverOverTimeout: { type: Number, default: 30 },\n    hoverOutTimeout: { type: Number, default: 200 },\n    offset: { type: [Array, Number] as PropType<DropdownOffsetProp>, default: 0 },\n    stickToEdges: { type: Boolean, default: false },\n    autoPlacement: { type: Boolean, default: true },\n    cursor: { type: Boolean, default: false },\n    trigger: {\n      type: String as PropType<'click' | 'right-click' | 'hover' | 'dblclick' | 'none'>,\n      default: 'click',\n      validator: (value: string) => ['click', 'right-click', 'hover', 'dblclick', 'none'].includes(value),\n    },\n    placement: {\n      type: String as PropType<Placement>,\n      default: 'auto',\n      validator: (value: string) => placementsPositions.includes(value),\n    },\n    /** Not reactive */\n    keyboardNavigation: { type: Boolean, default: false },\n  },\n\n  emits: [...useStatefulEmits, 'anchor-click', 'anchor-right-click', 'content-click', 'click-outside', 'close', 'open'],\n\n  setup (props, { emit }) {\n    const contentRef = shallowRef<HTMLElement>()\n\n    const { valueComputed: statefulVal } = useStateful(props, emit)\n    const valueComputed = computed({\n      get: () => statefulVal.value && !props.disabled && !props.readonly,\n      set (val) {\n        statefulVal.value = val\n        if (val) {\n          emit('open')\n        } else {\n          emit('close')\n        }\n      },\n    })\n\n    const computedClass = useBem('va-dropdown', () => pick(props, ['disabled']))\n\n    const { debounced: debounceHover, cancel: cancelHoverDebounce } = useDebounceFn(toRef(props, 'hoverOverTimeout'))\n    const { debounced: debounceUnHover, cancel: cancelUnHoverDebounce } = useDebounceFn(toRef(props, 'hoverOutTimeout'))\n\n    const onMouseEnter = () => {\n      if (props.trigger !== 'hover' || props.disabled) { return }\n\n      debounceHover(() => { valueComputed.value = true })\n      cancelUnHoverDebounce()\n    }\n\n    const onMouseLeave = () => {\n      if (props.trigger !== 'hover' || props.disabled) { return }\n\n      if (props.isContentHoverable) {\n        debounceUnHover(() => { valueComputed.value = false })\n      } else {\n        valueComputed.value = false\n      }\n      cancelHoverDebounce()\n    }\n\n    const emitAndClose = (eventName: string, close?: boolean, e?: Event) => {\n      emit(eventName, e)\n      if (close && props.trigger !== 'none') { valueComputed.value = false }\n    }\n\n    const elRef = useHTMLElement('anchorRef')\n\n    if (props.keyboardNavigation) {\n      useKeyboardNavigation(elRef, valueComputed)\n    }\n\n    useMouseNavigation(elRef, {\n      click (e) {\n        if ((props.trigger !== 'click' && kebabCase(props.trigger) !== 'right-click') || props.disabled) { return }\n\n        if (valueComputed.value) {\n          emitAndClose('anchor-click', props.closeOnAnchorClick, e)\n        } else {\n          if (props.trigger !== 'click') { return }\n          valueComputed.value = true\n          emit('anchor-click', e)\n        }\n      },\n      contextmenu (e) {\n        if (kebabCase(props.trigger) !== 'right-click' || props.disabled) { return }\n        e.preventDefault()\n\n        if (valueComputed.value) {\n          emitAndClose('anchor-right-click', props.closeOnAnchorClick, e)\n\n          if (props.cursor) {\n            nextTick(() => { valueComputed.value = true })\n          }\n        } else {\n          valueComputed.value = true\n          emit('anchor-right-click', e)\n        }\n      },\n      dblclick (e) {\n        if (props.trigger !== 'dblclick' || props.disabled) { return }\n        if (valueComputed.value) {\n          emitAndClose('anchor-dblclick', props.closeOnAnchorClick, e)\n\n          if (props.cursor) {\n            nextTick(() => { valueComputed.value = true })\n          }\n        } else {\n          valueComputed.value = true\n          emit('anchor-dblclick', e)\n        }\n      },\n      mouseenter: onMouseEnter,\n      mouseleave: onMouseLeave,\n    })\n\n    const { anchorRef: computedAnchorRef } = useAnchorSelector(props)\n    useClickOutside([computedAnchorRef, contentRef], () => {\n      if (props.closeOnClickOutside && valueComputed.value) {\n        emitAndClose('click-outside', props.closeOnClickOutside)\n      }\n    })\n\n    const cursorAnchor = useCursorAnchor(computedAnchorRef, valueComputed)\n    const document = useDocument()\n    const isPopoverFloating = computed(() => props.preventOverflow || props.cursor)\n\n    const target = useHTMLElementSelector(computed(() => props.target || 'body'))\n\n    const targetComputed = computed(() => {\n      if (computedAnchorRef.value && !target.value?.contains?.(computedAnchorRef.value)) { return document.value?.body }\n\n      return target.value\n    })\n\n    const teleportTargetComputed = computed(() => {\n      if (!isPopoverFloating.value) {\n        return elRef.value\n      }\n      return targetComputed.value\n    })\n\n    const teleportDisabled = computed(() => props.disabled || !isPopoverFloating.value)\n\n    useDropdown(\n      computed(() => props.cursor ? cursorAnchor.value : computedAnchorRef.value),\n      contentRef,\n      computed(() => ({\n        placement: props.placement,\n        keepAnchorWidth: props.keepAnchorWidth,\n        offset: props.offset,\n        stickToEdges: props.stickToEdges,\n        autoPlacement: props.autoPlacement,\n        root: teleportTargetComputed.value,\n        viewport: targetComputed.value,\n      })),\n    )\n\n    const idComputed = computed(generateUniqueId)\n\n    // useEvent('blur', () => {\n    //   if (props.closeOnClickOutside && valueComputed.value) {\n    //     emitAndClose('click-outside', props.closeOnClickOutside)\n    //   }\n    // })\n\n    return {\n      ...useTranslation(),\n      teleportTargetComputed,\n      teleportDisabled,\n      isMounted: useIsMounted(),\n      anchorRef: computedAnchorRef,\n      valueComputed,\n      contentRef,\n      computedClass,\n      idComputed,\n      emitAndClose,\n      onMouseEnter,\n      onMouseLeave,\n      hide: () => { valueComputed.value = false },\n      show: () => { valueComputed.value = true },\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import '../../styles/resources';\n@import 'variables';\n\n.va-dropdown {\n  /* Solved the alignment problem (if we try to align inline and block elements) */\n  line-height: var(--va-dropdown-line-height);\n  font-family: var(--va-font-family);\n  display: var(--va-dropdown-display);\n  position: relative;\n  max-width: 100%;\n  vertical-align: middle;\n\n  &--disabled {\n    @include va-disabled;\n  }\n\n  &__content-wrapper {\n    z-index: var(--va-dropdown-content-wrapper-z-index);\n    font-family: var(--va-font-family);\n    top: 0;\n    left: 0;\n  }\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}