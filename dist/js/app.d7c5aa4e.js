(function(){"use strict";var t={1248:function(t,e,a){var o=a(6369),i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[2==t.acceso||1==t.acceso?e("input",{staticClass:"d-none d-sm-none d-md-block",attrs:{type:"checkbox",id:"check",checked:""}}):t._e(),2==t.acceso||1==t.acceso?e("label",{staticClass:"d-none d-sm-none d-md-block",attrs:{for:"check"}},[e("i",{staticClass:"fas fa-bars",attrs:{id:"btn"}}),e("i",{staticClass:"fas fa-times",attrs:{id:"cancel"}})]):t._e(),2==t.acceso||1==t.acceso?e("div",{staticClass:"sidebar d-none d-sm-none d-md-block"},[e("header",[t._v(" UNO ")]),e("ul",[e("li",[2==t.acceso||1==t.acceso?e("router-link",{staticClass:"enlaces",attrs:{to:"/libros"}},[e("i",{staticClass:"fas fa-qrcode"}),t._v("Libros")]):t._e()],1),e("li",[2==t.acceso||1==t.acceso?e("router-link",{staticClass:"enlaces",attrs:{to:"/solicitudes"}},[e("i",{staticClass:"fas fa-link"}),t._v("Solicitudes")]):t._e()],1),e("li",[2==t.acceso?e("router-link",{staticClass:"enlaces",attrs:{to:"/Autores"}},[e("i",{staticClass:"fas fa-stream"}),t._v("Autores")]):t._e()],1),e("li",[2==t.acceso?e("router-link",{staticClass:"enlaces",attrs:{to:"/Editoriales"}},[e("i",{staticClass:"fas fa-calendar-week"}),t._v("Editoriales")]):t._e()],1),e("li",{staticClass:"enlaces salir",attrs:{href:"#"},on:{click:function(e){return t.cerrarSesion()}}},[t._v(" cerrar sesión ")])])]):t._e(),e("b-navbar",{staticClass:"menu d-block d-sm-block d-md-none",attrs:{toggleable:"lg",type:"dark",align:"center"}},[e("b-navbar-brand",[e("div",{staticClass:"nombreU"},[t.usuario.nombre.length>0?e("div",[e("div",[t._v(" UNO - "+t._s(this.Nombresubsede)+" ")])]):e("div",[e("div",{attrs:{align:"center"}},[t._v(" UNO ")])])])]),2==t.acceso||1==t.acceso?e("b-navbar-toggle",{attrs:{target:"nav-collapse"}}):t._e(),e("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[e("b-navbar-nav",[2==t.acceso||1==t.acceso?e("b-nav-item",{attrs:{to:"/libros"}},[t._v("Libros ")]):t._e(),2==t.acceso||1==t.acceso?e("b-nav-item",{attrs:{to:"/solicitudes"}},[t._v("Solicitudes ")]):t._e(),2==t.acceso?e("b-nav-item",{attrs:{to:"/Autores"}},[t._v("Autores ")]):t._e(),2==t.acceso?e("b-nav-item",{attrs:{to:"/Editoriales"}},[t._v("Editoriales ")]):t._e()],1),e("div",[t.usuario.nombre.length>0?e("b-navbar-nav",{staticClass:"ml-auto"},[e("b-nav-item-dropdown",{attrs:{right:""},scopedSlots:t._u([{key:"button-content",fn:function(){return[1==t.acceso?e("em",[t._v(t._s(t.nombreUsuario))]):t._e(),2==t.acceso?e("em",[t._v(t._s(t.nombreAdmin))]):t._e()]},proxy:!0}],null,!1,3974985985)},[e("b-dropdown-item",{attrs:{href:"#"},on:{click:function(e){return t.cerrarSesion()}}},[t._v("Cerrar sesión")])],1)],1):t._e()],1)],1)],1),e("div",{staticClass:"content"},[t.usuario.nombre.length>0?e("div",[e("div",{staticClass:"NombreUno d-none d-sm-none d-md-block"},[e("div",{attrs:{align:"center"}},[t._v(" UNIVERSIDAD NACIONAL DEL ORIENTE - "+t._s(this.Nombresubsede)+" ")])])]):e("div",{staticClass:"NombreUno2 d-none d-sm-none d-md-block"},[e("div",{attrs:{align:"center"}},[t._v(" UNIVERSIDAD NACIONAL DEL ORIENTE ")])]),e("router-view",{staticClass:"contenido"})],1)],1)},r=[],s={data(){return{usuario:{cod_alum:localStorage.getItem("cod_alum"),nombre:localStorage.getItem("nombre"),apellidoP:localStorage.getItem("ap_paterno"),apellidoM:localStorage.getItem("ap_materno")},nombreAdmin:localStorage.getItem("nombre"),nombreUsuario:localStorage.getItem("nombre")+" "+localStorage.getItem("ap_paterno")+" "+localStorage.getItem("ap_materno"),acceso:localStorage.getItem("acceso"),Nombresubsede:localStorage.getItem("Subsede")}},created:function(){let t=localStorage.getItem("acceso");null==t&&(localStorage.setItem("acceso",0),localStorage.setItem("cod_alum",""),localStorage.setItem("ci_pasaporte",""),localStorage.setItem("nombre",""),localStorage.setItem("ap_paterno",""),localStorage.setItem("ap_materno",""),localStorage.setItem("sede",""),localStorage.setItem("id",0),localStorage.setItem("Subsede",""),localStorage.setItem("idSubsede",0))},methods:{cerrarSesion(){localStorage.setItem("acceso",0),localStorage.setItem("cod_alum",""),localStorage.setItem("ci_pasaporte",""),localStorage.setItem("nombre",""),localStorage.setItem("ap_paterno",""),localStorage.setItem("ap_materno",""),localStorage.setItem("sede",""),localStorage.setItem("Subsede",""),localStorage.setItem("idSubsede",0),localStorage.setItem("idCarrera",0),localStorage.setItem("idFacultad",0),localStorage.setItem("id",0)}}},l=s,n=a(1001),c=(0,n.Z)(l,i,r,!1,null,null,null),d=c.exports,u=a(2631),m=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home"},[e("Login",{staticClass:"login"})],1)},p=[],b=(a(7658),function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"todo mt-5"},[e("div",{staticClass:"user_card mt-5"},[t._m(0),e("div",{staticClass:"d-flex justify-content-center form_container"},[e("form",{staticClass:"col-sm-9",on:{submit:function(e){return e.preventDefault(),t.login.apply(null,arguments)}}},[e("div",{staticClass:"input-group mb-3"},[e("div",{staticClass:"input-group-append"},[e("span",{staticClass:"input-group-text"},[e("svg",{staticClass:"bi bi-person-circle",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[e("path",{attrs:{d:"M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"}}),e("path",{attrs:{"fill-rule":"evenodd",d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"}})])])]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.usuario.cod_alum,expression:"usuario.cod_alum"}],staticClass:"form-control input_user",attrs:{type:"text",name:"cod_alum",value:"",placeholder:"Codigo de Alumno"},domProps:{value:t.usuario.cod_alum},on:{input:function(e){e.target.composing||t.$set(t.usuario,"cod_alum",e.target.value)}}})]),e("div",{staticClass:"input-group mb-2"},[e("div",{staticClass:"input-group-append"},[e("span",{staticClass:"input-group-text"},[e("svg",{staticClass:"bi bi-key-fill",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[e("path",{attrs:{d:"M3.5 11.5a3.5 3.5 0 1 1 3.163-5H14L15.5 8 14 9.5l-1-1-1 1-1-1-1 1-1-1-1 1H6.663a3.5 3.5 0 0 1-3.163 2zM2.5 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"}})])])]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.usuario.ci_pasaporte,expression:"usuario.ci_pasaporte"}],staticClass:"form-control input_pass",attrs:{type:"password",name:"ca",value:"",placeholder:"Ci/Password"},domProps:{value:t.usuario.ci_pasaporte},on:{input:function(e){e.target.composing||t.$set(t.usuario,"ci_pasaporte",e.target.value)}}})]),t._m(1)])]),e("div",{staticClass:"mt-4"})])])])}),h=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-flex justify-content-center"},[e("div",{staticClass:"brand_logo_container"},[e("img",{staticClass:"brand_logo",attrs:{src:a(1809),alt:"Logo"}})])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-flex justify-content-center mt-3 login_container"},[e("button",{staticClass:"btn login_btn mt-4",attrs:{text:"Iniciar sesión",id:"login",type:"submit",name:"button"}},[t._v(" Iniciar sesión ")])])}];const v="http://192.168.0.113:8081/api",g="http://192.168.0.113:8082/api";var f={name:"loginComponent",data(){return{usuario:{cod_alum:"",ci_pasaporte:"",carrera:"",facultad:"",subsede:""}}},methods:{login(){fetch(v+"/alumno/"+this.usuario.cod_alum+"/"+this.usuario.ci_pasaporte).then((t=>t.json())).then((t=>{""!=t&&(localStorage.setItem("acceso",1),localStorage.setItem("cod_alum",t.cod_alum),localStorage.setItem("ci_pasaporte",t.ci_pasaporte),localStorage.setItem("nombre",t.nombre),localStorage.setItem("ap_paterno",t.ap_paterno),localStorage.setItem("ap_materno",t.ap_materno),localStorage.setItem("sede",t.sede),localStorage.setItem("id",0),this.usuario.carrera=t.id_carrera)})).then((()=>{fetch(v+"/carrera/"+this.usuario.carrera).then((t=>t.json())).then((t=>{this.usuario.facultad=t[0].id_facultad})).then((()=>{fetch(v+"/facultad/"+this.usuario.facultad).then((t=>t.json())).then((t=>{this.usuario.subsede=t[0].id_subsede})).then((()=>{fetch(v+"/subsede/"+this.usuario.subsede).then((t=>t.json())).then((t=>{console.log(t),localStorage.setItem("idCarrera",this.usuario.carrera),localStorage.setItem("idFacultad",this.usuario.facultad),localStorage.setItem("idSubsede",t[0].id),localStorage.setItem("Subsede",t[0].subsede)})).then((()=>{location.reload(),this.$router.push({name:"libros"})}))}))}))})).catch(fetch(g+"/empleado/"+this.usuario.cod_alum+"/"+this.usuario.ci_pasaporte).then((t=>t.json())).then((t=>{""!=t&&(localStorage.setItem("acceso",2),localStorage.setItem("cod_alum",t.cod_alum),localStorage.setItem("ci_pasaporte",t.ci_pasaporte),localStorage.setItem("nombre",t.nombre),localStorage.setItem("ap_paterno",t.ap_paterno),localStorage.setItem("ap_materno",t.ap_materno),localStorage.setItem("sede",t.sede),localStorage.setItem("idSubsede",t.idSubsede),localStorage.setItem("id",t.id))})).then((()=>{fetch(v+"/subsede/"+localStorage.getItem("idSubsede")).then((t=>t.json())).then((t=>{localStorage.setItem("Subsede",t[0].subsede)})).then((()=>{location.reload(),this.$router.push({name:"libros"})}))})).catch(console.log))}}},_=f,C=(0,n.Z)(_,b,h,!1,null,null,null),P=C.exports,E={name:"HomeView",components:{Login:P},mounted:function(){0!=localStorage.getItem("acceso")&&this.$router.push({name:"libros"})}},S=E,A=(0,n.Z)(S,m,p,!1,null,null,null),y=A.exports,x=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container mx-auto mt-5"},[e("div",{staticClass:"card text-cente"},[e("div",{staticClass:"card-header"},[e("ul",{staticClass:"nav nav-tabs card-header-tabs"},[e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",class:t.listar(),attrs:{"aria-current":"true",href:"#"},on:{click:function(e){t.valor=0}}},[t._v("Listado")])]),2==t.acceso?e("div",[e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",class:t.crear(),attrs:{href:"#",name:"1"},on:{click:function(e){t.valor=-1}}},[t._v("Nuevo")])])]):t._e(),2==t.acceso?e("div",[e("li",{staticClass:"nav-item"},[t.valor>0?e("a",{staticClass:"nav-link active",attrs:{href:"#"}},[t._v("Editar")]):e("a",{staticClass:"nav-link disabled",attrs:{href:"#"}},[t._v("Editar")])])]):t._e()])]),e("div",{staticClass:"card-body bg-white"},[e("CrearLibro",{directives:[{name:"show",rawName:"v-show",value:t.valor<0,expression:"valor < 0"}],attrs:{variable:t.valor},on:{recibiendo:t.variableLibro}}),t.valor>0?e("CrearLibro",{attrs:{variable:t.valor},on:{recibiendo:t.variableLibro}}):t._e(),0==t.valor?e("ListarLibro",{directives:[{name:"show",rawName:"v-show",value:0==t.valor,expression:"valor == 0"}],staticClass:"mx-2 mx-sm-5",attrs:{variable:t.valor},on:{recibiendo:t.variableLibro}}):t._e()],1)])])},I=[],w=function(){var t=this,e=t._self._c;return e("div",{staticClass:"align-items-center"},[e("div",{staticClass:"row rowS"},[e("div",{staticClass:"form-group col-sm-4"},[e("label",{attrs:{for:""}},[t._v("Titulo / autor")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.nombreLibro,expression:"nombreLibro"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Titulo del libro"},domProps:{value:t.nombreLibro},on:{keyup:function(e){return t.filtrarlibros()},input:function(e){e.target.composing||(t.nombreLibro=e.target.value)}}})]),e("div",{staticClass:"form-group col-sm-5"},[e("label",[t._v("Selecciona una carrera")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.materia,expression:"materia"}],staticClass:"form-control",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.materia=e.target.multiple?a:a[0]},function(e){return t.cambiaC(t.materia)}]}},t._l(t.carreras,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(" "+t._s(a.nombreCarrera)+" ")])})),0)]),e("div",{staticClass:"col-sm-2",on:{change:function(e){return t.cambiaC(t.materia)}}},[e("b-form-group",{attrs:{label:"Tipo: "},scopedSlots:t._u([{key:"default",fn:function({ariaDescribedby:a}){return[e("b-form-radio",{attrs:{"aria-describedby":a,name:"some-radios",value:"0"},model:{value:t.radioPdf,callback:function(e){t.radioPdf=e},expression:"radioPdf"}},[t._v("Libro")]),e("b-form-radio",{attrs:{"aria-describedby":a,name:"some-radios",value:"1"},model:{value:t.radioPdf,callback:function(e){t.radioPdf=e},expression:"radioPdf"}},[t._v("PDF")])]}}])})],1)]),e("br"),1==t.acceso?e("div",{staticClass:"estudiante"},[e("div",{staticClass:"carrusel row"},t._l(t.datosPaginados,(function(a){return e("div",{key:a.id,staticClass:"listado col-6 col-lg-3 col-md-4 col-xl-3",attrs:{align:"center"}},[null==a.documento?e("div",[e("div",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-lg",modifiers:{"modal-lg":!0}}],staticClass:"icon-container-2",style:{backgroundImage:"url("+a.urlPortada+")",backgroundSize:"cover"},on:{click:function(e){return t.obtenerLibro(a.id,a.titulo,a.nombre,t.editoriales[[a.idEditorial]-1].nombreEditorial,a.edicion,a.urlPortada)}}},[2==t.acceso?e("div",[e("div",{staticClass:"btn-libro-1"},[e("div",{staticClass:"btn-libro",attrs:{align:"center"},on:{click:function(e){return t.Enviar(a.id)}}},[t._v(" ✍🏻 ")])]),e("div",{staticClass:"btn-circle-2"},[e("div",{staticClass:"btn-circle",on:{click:function(e){return t.eliminar(a)}}},[t._v(" ❌ ")])])]):t._e()])]):e("div",[e("div",{staticClass:"icon-container-2",style:{backgroundImage:"url("+a.urlPortada+")",backgroundSize:"cover"},on:{click:function(e){return t.redireccionaarPdf(a.documento)}}},[2==t.acceso?e("div",[e("div",{staticClass:"btn-libro-1"},[e("div",{staticClass:"btn-libro",attrs:{align:"center"},on:{click:function(e){return t.Enviar(a.id)}}},[t._v(" ✍🏻 ")])]),e("div",{staticClass:"btn-circle-2"},[e("div",{staticClass:"btn-circle",on:{click:function(e){return t.eliminar(a)}}},[t._v(" ❌ ")])])]):t._e()])]),e("div",{staticClass:"titulo"},[t._v(t._s(a.titulo))]),e("div",{staticClass:"autor"},[e("img",{attrs:{src:"https://img.icons8.com/ios-filled/18/000000/guest-male--v1.png"}}),t._v(" "+t._s(a.nombre)+" "),t._m(0,!0)])])})),0)]):t._e(),2==t.acceso?e("div",{staticClass:"estudiante"},[e("div",{staticClass:"d-none d-sm-none d-md-block table-responsive table-sm small border"},[e("table",{staticClass:"table text-center table-striped",attrs:{id:""}},[t._m(1),e("tbody",t._l(t.datosPaginados,(function(a){return e("tr",{key:a.id},[e("td",[t._v(t._s(a.titulo))]),e("td",[t._v(t._s(a.nombre))]),e("td",[t._v(t._s(t.editoriales[[a.idEditorial]-1].nombreEditorial)+" ")]),e("td",[t._v(t._s(a.edicion))]),e("td",[t._v(t._s(a.codigo))]),e("td",[t._v(t._s(a.copias))]),e("td",[t._v(t._s(a.copiasDisponibles))]),e("td",[e("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":""}},[null!=a.documento?e("div",[e("button",{staticClass:"btn btn-info",on:{click:function(e){return t.redireccionaarPdf(a.documento)}}},[t._v(" Ver PDF ")])]):e("div",[e("button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-lg",modifiers:{"modal-lg":!0}}],staticClass:"btn btn-info",on:{click:function(e){return t.obtenerLibro(a.id,a.titulo,a.nombre,t.editoriales[[a.idEditorial]-1].nombreEditorial,a.edicion,a.urlPortada)}}},[t._v(" 📚 ")])]),e("button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-center",modifiers:{"modal-center":!0}}],staticClass:"btn btn-success",on:{click:function(e){return t.Enviar(a.id)}}},[t._v(" ✍🏻 ")]),e("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return t.eliminar(a)}}},[t._v(" 𝗫 ")])])])])})),0)])])]):t._e(),e("nav",{attrs:{"aria-label":"Page navigation example"}},[e("ul",{staticClass:"pagination",attrs:{align:"center"}},[e("li",{staticClass:"page-item",on:{click:function(e){return t.paginaPrevia()}}},[e("a",{staticClass:"page-link",attrs:{href:"#"}},[t._v("Previous")])]),t._l(t.totalPaginas(),(function(a){return e("li",{key:a,staticClass:"page-item",class:t.activo(a)},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return t.ObtenerDatosPag(a)}}},[t._v(t._s(a))])])})),e("li",{staticClass:"page-item",on:{click:function(e){return t.paginaSiguiente()}}},[e("a",{staticClass:"page-link",attrs:{href:"#"}},[t._v("Next")])])],2)]),e("b-modal",{attrs:{id:"modal-lg",size:"lg",centered:"",title:"Solicitud de prestamo","hide-footer":""}},[e("modalPrestamo",{attrs:{Libro:this.prestamolibro}})],1),2==t.acceso?e("div",{staticClass:"estudiante",staticStyle:{display:"none"}},[e("div",{staticClass:"d-none d-sm-none d-md-block table-responsive table-sm small"},[e("table",{staticClass:"table",attrs:{id:"tablaLibros"}},[t._m(2),e("tbody",t._l(t.dataToExport,(function(a,o){return e("tr",{key:a.id},[e("td",[t._v(t._s(o+1))]),e("td",[t._v(t._s(a.titulo))]),e("td",[t._v(t._s(a.nombre))]),e("td",[t._v(t._s(t.editoriales[[a.idEditorial]-1].nombreEditorial)+" ")]),e("td",[t._v(t._s(a.edicion))]),e("td",[t._v(t._s(a.codigo))]),e("td",[t._v(t._s(a.copias))]),e("td",[t._v(t._s(a.copiasDisponibles))])])})),0)])])]):t._e(),2==t.acceso?e("div",{staticClass:"estudiante"},[e("button",{on:{click:function(e){return t.exportExcel()}}},[t._v("Export table to excel xls")]),e("button",{on:{click:function(e){return t.exportPdf()}}},[t._v("Export table pdf")])]):t._e()],1)},k=[function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"font-size":"100%"}},[e("div",{staticClass:"editorial",staticStyle:{"font-size":"100%"}})])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("TITULO")]),e("th",[t._v("AUTOR")]),e("th",[t._v("EDITORIAL")]),e("th",[t._v("EDICION")]),e("th",[t._v("CODIGO")]),e("th",[t._v("COPIAS")]),e("th",[t._v("DISPONIBLES")]),e("th",[t._v("ACCION")])])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("ID")]),e("th",[t._v("TITULO")]),e("th",[t._v("AUTOR")]),e("th",[t._v("EDITORIAL")]),e("th",[t._v("EDICION")]),e("th",[t._v("CODIGO")]),e("th",[t._v("COPIAS")]),e("th",[t._v("DISPONIBLES")])])])}],L=a(6154),N=a(1164),D=(a(3579),function(){var t=this,e=t._self._c;return e("div",{staticClass:"row modalCompleto"},[e("img",{staticClass:"col-6",attrs:{src:""+t.Libro.urlPortada}}),e("div",{staticClass:"col-6"},[e("div",[e("label",[t._v("Libro solicitado: "+t._s(t.Libro.nombreLibro)+". "),e("br"),t._v(" Autor: "+t._s(t.Libro.autor)+". "),e("br"),t._v("Editorial: "+t._s(t.Libro.editorial)+"."),e("br"),t._v(" Edición: "+t._s(t.Libro.edicion))])]),e("hr"),e("div",{staticClass:"form-group"},[0==t.idAdmin||null==t.idAdmin||void 0==t.idAdmin?e("div",[e("div",[e("label",{attrs:{for:""}},[t._v("Nombre Completo: "+t._s(t.usuario.nombre)+" "+t._s(t.usuario.apellidoP)+" "+t._s(t.usuario.apellidoM))])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-6"},[e("label",{attrs:{for:""}},[t._v("Codigo de alumno")]),e("input",{staticClass:"form-control",attrs:{type:"text",name:"codigoUsuario",id:"","aria-describedby":"helpId",placeholder:"",readonly:""},domProps:{value:t.usuario.cod_alum}})]),e("div",{staticClass:"col-6"},[e("label",{attrs:{for:""}},[t._v("Ci/Pasaporte")]),e("input",{staticClass:"form-control",attrs:{type:"password",name:"codigoUsuario",id:"","aria-describedby":"helpId",placeholder:"",readonly:""},domProps:{value:t.usuario.ci_pasaporte}})])]),e("br"),e("div",[e("label",{attrs:{for:""}},[t._v("Cantidad")]),e("input",{staticClass:"form-control",attrs:{type:"number",name:"codigoUsuario",id:"","aria-describedby":"helpId",placeholder:""},domProps:{value:1}})])]):e("div",[e("div",[e("label",{attrs:{for:""}},[t._v("Nombre Completo: "+t._s(t.nombre)+" "+t._s(t.apellidoP)+" "+t._s(t.apellidoM))])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("label",{attrs:{for:""}},[t._v("Codigo de alumno")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.cod_alum,expression:"cod_alum"}],staticClass:"form-control",attrs:{type:"text",name:"codigoUsuario",id:"","aria-describedby":"helpId",placeholder:""},domProps:{value:t.cod_alum},on:{keyup:function(e){return t.buscarAlumno()},input:function(e){e.target.composing||(t.cod_alum=e.target.value)}}})])]),e("br"),e("div",[e("label",{attrs:{for:""}},[t._v("Cantidad")]),e("input",{staticClass:"form-control",attrs:{type:"number",name:"codigoUsuario",id:"","aria-describedby":"helpId",placeholder:""},domProps:{value:1}})])]),e("div",[e("label",{attrs:{for:""}},[t._v("Fecha para recoger el Libro")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.fechas.inicio,expression:"fechas.inicio"}],staticClass:"form-control",attrs:{type:"date","aria-describedby":"helpId",placeholder:"",required:""},domProps:{value:t.fechas.inicio},on:{input:function(e){e.target.composing||t.$set(t.fechas,"inicio",e.target.value)}}})]),e("div",[e("label",{attrs:{for:""}},[t._v("Fecha para entregar libro")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.fechas.fin,expression:"fechas.fin"}],staticClass:"form-control",attrs:{type:"date","aria-describedby":"helpId",placeholder:"",required:""},domProps:{value:t.fechas.fin},on:{input:function(e){e.target.composing||t.$set(t.fechas,"fin",e.target.value)}}})]),e("div",[e("label",{attrs:{for:""}},[t._v("Numero de whatsapp")]),e("br"),e("input",{directives:[{name:"model",rawName:"v-model",value:t.telefono,expression:"telefono"}],staticClass:"col-12",attrs:{type:"number","aria-describedby":"helpId",placeholder:"Notificara la confirmacion de la solicitud"},domProps:{value:t.telefono},on:{input:function(e){e.target.composing||(t.telefono=e.target.value)}}})]),e("br")]),t.idAdmin>0?e("div",[e("button",{staticClass:"col-12",style:{backgroundColor:t.colorBoton},attrs:{id:"solicitar",disabled:t.desabilitado},on:{click:function(e){return t.VerificarAlumno(t.Libro.id)}}},[t._v(t._s(t.botonTexto))])]):e("div",[e("button",{staticClass:"col-12 btn-primary",style:{backgroundColor:t.colorBoton},attrs:{id:"solicitar",disabled:t.desabilitado},on:{click:function(e){return t.VerificarLogin(t.Libro.id)}}},[t._v(t._s(t.botonTexto))])])])])}),O=[],U=a(6265),F=a.n(U);const j="http://192.168.0.113:8081/api",T="http://192.168.0.113:8082/api";var z={data(){return{colorBoton:"#56CCFF",botonTexto:"Solicitar Libro",desabilitado:!1,idAdmin:localStorage.getItem("id"),usuario:{cod_alum:localStorage.getItem("cod_alum"),nombre:localStorage.getItem("nombre"),apellidoP:localStorage.getItem("ap_paterno"),apellidoM:localStorage.getItem("ap_materno"),ci_pasaporte:localStorage.getItem("ci_pasaporte")},cod_alum:"",nombre:"",apellidoP:"",apellidoM:"",fechas:{inicio:"",fin:""},telefono:null}},props:{Libro:{}},methods:{prestamo(t){fetch(T+"/libros/"+t).then((t=>t.json())).then((e=>{e.copiasDisponibles>0?F().post(T+"/prestamos/",{idEmpleado:parseInt(localStorage.getItem("id")),codigoUsuario:localStorage.getItem("cod_alum"),idLibro:t,cantidad:1,fechaPrestamo:this.fechas.inicio,fechaDevolucion:this.fechas.fin,observacion:"null",estado:1,activo:1,telefono:this.telefono,idSubsede:localStorage.getItem("idSubsede")}).then((function(t){console.log(t)}),this.botonTexto="Solicitud enviada",this.colorBoton="#00D12F").catch((function(t){console.log(t)})):alert("No hay copias disponibles")})).catch(console.log)},VerificarLogin(t){fetch(j+"/alumno/"+localStorage.getItem("cod_alum")+"/"+localStorage.getItem("ci_pasaporte")).then((t=>t.json())).then((e=>{if(""!=e){var a=(new Date).getTime();console.log(a);var o=new Date(this.fechas.inicio).getTime(),i=new Date(this.fechas.fin).getTime();console.log(o);var r=(i-o)/864e5;o>=a?r<15&&r>=0?(this.desabilitado=!0,this.botonTexto="Solicitando Libro",this.prestamo(t)):alert("El tiempo del préstamo debe ser entre 1 y 15 días"):alert("La fecha debe ser mayor o igual a la fecha actual")}})).catch((function(){localStorage.setItem("acceso",0),localStorage.setItem("cod_alum",""),localStorage.setItem("ci_pasaporte",""),localStorage.setItem("nombre",""),localStorage.setItem("ap_paterno",""),localStorage.setItem("ap_materno",""),localStorage.setItem("sede",""),localStorage.setItem("id",0),location.reload(),this.$router.push("/")}))},VerificarAlumno(t){this.elemento=document.getElementById("solicitar"),fetch(j+"/alumno/"+this.cod_alum).then((t=>t.json())).then((e=>{if(""!=e){var a=(new Date).getTime();console.log(a);var o=new Date(this.fechas.inicio).getTime(),i=new Date(this.fechas.fin).getTime();console.log(o);var r=(i-o)/864e5;o>=a?r<15&&r>=0?(this.desabilitado=!0,this.botonTexto="Solicitando Libro",this.prestamo(t)):alert("El tiempo del préstamo debe ser entre 1 y 15 días"):alert("La fecha debe ser mayor o igual a la fecha actual")}})).catch((function(){alert("Existen datos incorrectos")}))},buscarAlumno(){fetch(j+"/alumno/"+this.cod_alum).then((t=>t.json())).then((t=>{this.nombre=t.nombre,this.apellidop=t.ap_paterno,this.apellidoM=t.ap_materno,localStorage.setItem("cod_alum",t.cod_alum)})).catch(this.nombre="Usuario no encontrado",this.apellidop="",this.apellidoM="",localStorage.setItem("cod_alum","")).catch(console.clear)}}},$=z,W=(0,n.Z)($,D,O,!1,null,null,null),M=W.exports;const B="http://192.168.0.113:8082/api";var q={name:"ListarLibro",components:{modalPrestamo:M},data(){return{dataToExport:[],prestamolibro:{id:0,nombreLibro:"",autor:"",editorial:"",edicion:"",urlPortada:""},subsede:localStorage.getItem("idSubsede"),totalLibros:[],libros:[],autor:[],carreras:[],materia:1,nombreLibro:"",nombreAutor:1,editoriales:[],elementosPorPagina:12,datosPaginados:[],paginaActual:1,acceso:localStorage.getItem("acceso"),radioPdf:0}},created:function(){this.consultarAutor(),this.consultarEditorial(),this.consultarCarreras(),this.consultarLibros()},mounted(){this.ObtenerDatosPag(1)},methods:{redireccionaarPdf(t){var e=document.createElement("a");e.target="_blank",e.href="http://192.168.0.113:8082/storage/documentos/"+t,e.click()},consultarLibros(){fetch(B+"/librosSubsede/"+this.subsede).then((t=>t.json())).then((t=>{if(this.libros=[],"undefined"===typeof t[0].success){t.sort(((t,e)=>t.titulo.toUpperCase()==e.titulo.toUpperCase()?0:t.titulo.toUpperCase()>e.titulo.toUpperCase()?1:t.titulo.toUpperCase()<e.titulo.toUpperCase()?-1:void 0)),this.libros=t;for(let t=0;t<this.libros.length;t++)for(let a=0;a<this.autor.length;a++)if(this.autor[a].id==this.libros[t].idAutor){var e=this.autor[a].nombre;this.libros[t].nombre=e}this.filtrarlibros(),this.filtrarArchivos()}})).catch(console.log)},filtrarArchivos(){this.dataToExport=[];for(let t=0;t<this.libros.length;t++)(this.libros[t].idCarrera===this.materia&&1===this.libros[t].activo&&null!=this.libros[t].documento&&1==this.radioPdf||this.libros[t].idCarrera===this.materia&&1===this.libros[t].activo&&null==this.libros[t].documento&&0==this.radioPdf)&&(this.dataToExport=this.dataToExport.concat(this.libros[t]))},filtrarlibros(){this.totalLibros=[];for(let t=0;t<this.libros.length;t++)(this.libros[t].idCarrera===this.materia&&1===this.libros[t].activo&&(this.libros[t].titulo.toUpperCase().includes(this.nombreLibro.toUpperCase())||this.libros[t].nombre.toUpperCase().includes(this.nombreLibro.toUpperCase()))&&null!=this.libros[t].documento&&1==this.radioPdf||this.libros[t].idCarrera===this.materia&&1===this.libros[t].activo&&(this.libros[t].titulo.toUpperCase().includes(this.nombreLibro.toUpperCase())||this.libros[t].nombre.toUpperCase().includes(this.nombreLibro.toUpperCase()))&&null==this.libros[t].documento&&0==this.radioPdf)&&(this.totalLibros=this.totalLibros.concat(this.libros[t]),this.ObtenerDatosPag(1));0===this.totalLibros.length&&this.paginaPrevia()},consultarAutor(){fetch(B+"/autor/").then((t=>t.json())).then((t=>{this.autor=t})).catch(console.log)},consultarEditorial(){fetch(B+"/editoriales/").then((t=>t.json())).then((t=>{"undefined"===typeof t[0].success&&(this.editoriales=t)})).catch(console.log)},Enviar(t){this.$emit("recibiendo",t),ot.editar()},eliminar(t){F().put(B+"/libros/"+t.id,{titulo:t.titulo,copias:t.copias,copiasDisponibles:t.copiasDisponibles,categoria:t.categoria,edicion:t.edicion,codigo:t.codigo,idAutor:parseInt(t.idAutor),idEmpleado:t.idEmpleado,idEditorial:parseInt(t.idEditorial),idCarrera:parseInt(t.idCarrera),urlPortada:t.urlPortada,observacion:t.observacion,documento:t.documento,activo:0}).then((function(t){location.reload()})).catch((function(t){console.log(t)}))},obtenerLibro(t,e,a,o,i,r){this.prestamolibro={id:t,nombreLibro:e,autor:a,editorial:o,edicion:i,urlPortada:r}},consultarCarreras(){fetch(B+"/carreras").then((t=>t.json())).then((t=>{this.carreras=[],"undefined"===typeof t[0].success&&(this.carreras=t)})).catch(console.log)},totalPaginas(){return Math.ceil(this.totalLibros.length/this.elementosPorPagina)},ObtenerDatosPag(t){this.paginaActual=t,this.datosPaginados=[];let e=t*this.elementosPorPagina-this.elementosPorPagina,a=t*this.elementosPorPagina;this.datosPaginados=this.totalLibros.slice(e,a)},paginaPrevia(){this.paginaActual>1&&this.paginaActual--,this.ObtenerDatosPag(this.paginaActual)},paginaSiguiente(){this.paginaActual<this.totalPaginas()&&this.paginaActual++,this.ObtenerDatosPag(this.paginaActual)},activo(t){return t===this.paginaActual?"active":""},precionadoBoton(t){console.log(t)},cambiaC(t){this.materia=t,this.filtrarlibros(),this.filtrarArchivos()},exportExcel(){var t=document.getElementById("tablaLibros"),e=t.outerHTML,a=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=utf-8"});L(a,"Libros.xls")},exportPdf(){var t=new N.jsPDF("p","pt"),e=document.getElementById("tablaLibros"),a=t.autoTableHtmlToJson(e);t.autoTable(a.columns,a.data,{theme:"grid",styles:{overflow:"linebreak",fontSize:8,rowHeight:20,font:"helvetica",fontStyle:"normal",lineWidth:.1,lineColor:[0,0,0],fillColor:[255,255,255],textColor:[0,0,0],halign:"left",valign:"middle",columnStyles:{0:{columnWidth:"auto"},1:{columnWidth:"auto"},2:{columnWidth:"auto"},3:{columnWidth:"auto"},4:{columnWidth:"auto"},5:{columnWidth:"auto"},6:{columnWidth:"auto"},7:{columnWidth:"auto"},8:{columnWidth:"auto"},9:{columnWidth:"auto"},10:{columnWidth:"auto"},11:{columnWidth:"auto"},12:{columnWidth:"auto"},13:{columnWidth:"auto"},14:{columnWidth:"auto"},15:{columnWidth:"auto"},16:{columnWidth:"auto"},17:{columnWidth:"auto"},18:{columnWidth:"auto"},19:{columnWidth:"auto"},20:{columnWidth:"auto"},21:{columnWidth:"auto"},22:{columnWidth:"auto"},23:{columnWidth:"auto"},24:{columnWidth:"auto"},25:{columnWidth:"auto"},26:{columnWidth:"auto"},27:{columnWidth:"auto"},28:{columnWidth:"auto"},29:{columnWidth:"auto"},30:{columnWidth:"auto"}}},margin:{top:80,left:20,right:20,bottom:20}}),t.save("Libros.pdf")}}},Z=q,R=(0,n.Z)(Z,w,k,!1,null,null,null),H=R.exports,V=function(){var t=this,e=t._self._c;return e("div",{ref:"accionEditar",staticClass:"container row"},[e("form",{staticClass:"col-sm-12",on:{submit:function(e){return e.preventDefault(),t.agregarLibro.apply(null,arguments)}}},[e("div",{staticClass:"row align-items-center"},[e("div",{staticClass:"form-group col-sm"},[e("label",{attrs:{for:"titulo"}},[t._v("Titulo")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.libro.titulo,expression:"libro.titulo"}],staticClass:"form-control",attrs:{required:"",type:"text",name:"titulo",id:"titulo",placeholder:"Titulo del libro","aria-describedby":"titulo"},domProps:{value:t.libro.titulo},on:{input:function(e){e.target.composing||t.$set(t.libro,"titulo",e.target.value)}}})]),e("div",{staticClass:"form-group col-sm"},[e("label",{attrs:{for:"autor"}},[t._v("Autor")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.libro.idAutor,expression:"libro.idAutor"}],staticClass:"form-select",attrs:{required:"","aria-label":"Default select example",id:"autor"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.libro,"idAutor",e.target.multiple?a:a[0])},function(e){return t.obterAutor()}]}},t._l(t.autor,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(" "+t._s(a.nombre)+" ")])})),0)]),e("div",{staticClass:"form-group col-sm"},[e("label",{attrs:{for:""}},[t._v("Carrera")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.libro.idCarrera,expression:"libro.idCarrera"}],staticClass:"form-select",attrs:{required:"",name:"carrera",id:"carrera"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.libro,"idCarrera",e.target.multiple?a:a[0])}}},t._l(t.carreras,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(" "+t._s(a.nombreCarrera)+" ")])})),0)])]),e("div",{staticClass:"row align-items-center"},[e("div",{staticClass:"form-group col-sm"},[e("label",{attrs:{for:"editorial"}},[t._v("Editorial")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.libro.idEditorial,expression:"libro.idEditorial"}],staticClass:"form-select",attrs:{required:"","aria-label":"Default select example"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.libro,"idEditorial",e.target.multiple?a:a[0])}}},t._l(t.editoriales,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(" "+t._s(a.nombreEditorial)+" ")])})),0)]),e("div",{staticClass:"form-group col-sm"},[e("label",{attrs:{for:"edicion"}},[t._v("Edicion")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.libro.edicion,expression:"libro.edicion"}],staticClass:"form-control",attrs:{required:"",type:"number",name:"edicion",id:"edicion",placeholder:"edicion del libro","aria-describedby":"edicion"},domProps:{value:t.libro.edicion},on:{input:function(e){e.target.composing||t.$set(t.libro,"edicion",e.target.value)}}})]),e("div",{staticClass:"form-group col-sm"},[e("label",{attrs:{for:"categoria"}},[t._v("Categoria")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.libro.categoria,expression:"libro.categoria"}],staticClass:"form-control",attrs:{required:"",type:"text",name:"categoria",id:"categoria",placeholder:"categoria del libro","aria-describedby":"categoria"},domProps:{value:t.libro.categoria},on:{input:function(e){e.target.composing||t.$set(t.libro,"categoria",e.target.value)}}})])]),e("div",{staticClass:"row align-items-center"},[e("div",{staticClass:"col-sm"},[e("label",{attrs:{for:"codigo"}},[t._v("Código")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.libro.codigo,expression:"libro.codigo"}],staticClass:"form-control",attrs:{required:"",type:"text",name:"codigo",id:"codigo",placeholder:"codigo del libro","aria-describedby":"codigo"},domProps:{value:t.libro.codigo},on:{input:function(e){e.target.composing||t.$set(t.libro,"codigo",e.target.value)}}})]),e("div",{staticClass:"col-sm"},[e("label",{attrs:{for:"copias"}},[t._v("Cópias")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.libro.copias,expression:"libro.copias"}],staticClass:"form-control",attrs:{required:"",type:"number",name:"copias",id:"copias",placeholder:"cantidad de copias","aria-describedby":"copias"},domProps:{value:t.libro.copias},on:{input:function(e){e.target.composing||t.$set(t.libro,"copias",e.target.value)}}})]),e("div",{staticClass:"col-sm"},[e("label",{attrs:{for:"copias"}},[t._v("Cópias disponibles")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.libro.copiasDisponibles,expression:"libro.copiasDisponibles"}],staticClass:"form-control",attrs:{required:"",type:"number",name:"copias",id:"copias",placeholder:"cantidad de copias","aria-describedby":"copias"},domProps:{value:t.libro.copiasDisponibles},on:{input:function(e){e.target.composing||t.$set(t.libro,"copiasDisponibles",e.target.value)}}})])]),e("div",{staticClass:"form-group"},[e("div",{staticClass:"col-sm"},[e("label",{attrs:{for:"copias"}},[t._v("Url portada")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.libro.urlPortada,expression:"libro.urlPortada"}],staticClass:"form-control",attrs:{required:"",type:"text",name:"copias",id:"url",placeholder:"Imagen portada","aria-describedby":"url"},domProps:{value:t.libro.urlPortada},on:{input:function(e){e.target.composing||t.$set(t.libro,"urlPortada",e.target.value)}}})]),e("div",{staticClass:"col-sm"},[e("label",{attrs:{for:"pdf"}},[t._v("agraga un documento pdf")]),e("input",{attrs:{type:"file",name:"pdf",enctype:"multipart/form-data",accept:"application/pdf"},on:{change:t.buscarArchivo}})]),e("label",{attrs:{for:"observacion"}},[t._v("Observacion")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.libro.observacion,expression:"libro.observacion"}],staticClass:"form-control",attrs:{required:"",id:"observacion",rows:"4",placeholder:"Observacion del libro","aria-describedby":"observacion"},domProps:{value:t.libro.observacion},on:{input:function(e){e.target.composing||t.$set(t.libro,"observacion",e.target.value)}}})]),e("br"),e("div",{staticClass:"container row",attrs:{"raria-label":""}},[t.variable<0?e("a",{staticClass:"btn btn-success col-5",on:{click:function(e){return e.stopPropagation(),t.agregarLibro()}}},[t._v(" Agregar nuevo libro ")]):e("a",{staticClass:"btn btn-success col-5",on:{click:function(e){return e.stopPropagation(),t.actualizar()}}},[t._v(" Actualizar libro ")]),e("span",{staticClass:"col-2"}),t.variable<0?e("a",{staticClass:"btn btn-danger col-5",on:{click:function(e){return e.stopPropagation(),t.reset()}}},[t._v("Resetear Formulario")]):t._e(),e("a",{staticClass:"btn btn-danger col-5",on:{click:function(e){return e.stopPropagation(),t.volver()}}},[t._v("Cancelar edicion")])])])])},G=[];const J="http://192.168.0.113:8082/api";var X={data(){return{nombreEditorial:"",pdf:"",carreras:[],autor:[],libro:{titulo:"",copias:"",copiasDisponibles:"",categoria:"",edicion:"",codigo:"",observacion:"",idAutor:1,idEmpleado:"",idSubsede:0,urlPortada:"",idCarrera:1,idEditorial:"",activo:1},nautor:{nombre:"",id:0},editoriales:[{nombreEditorial:""}],preNombre:""}},props:{variable:{type:Number,default:0}},beforeMount(){this.consultarEditorial(),this.consultarAutor(),this.consultarCarreras(),this.consultarLibro()},methods:{consultarLibro(){this.variable>0?fetch(J+"/libros/"+this.variable).then((t=>t.json())).then((t=>{this.libro=[],this.libro.id=t.id,this.libro.titulo=t.titulo,this.libro.copias=t.copias,this.libro.copiasDisponibles=t.copiasDisponibles,this.libro.categoria=t.categoria,this.libro.edicion=t.edicion,this.libro.codigo=t.codigo,this.libro.observacion=t.observacion,this.libro.idAutor=t.idAutor,this.libro.idEmpleado=t.idEmpleado,this.libro.idCarrera=t.idCarrera,this.libro.urlPortada=t.urlPortada,this.libro.idEditorial=t.idEditorial,this.libro.activo=t.activo,this.obterAutor()})).catch(console.log):(this.consultarEditorial(),this.consultarAutor(),this.consultarCarreras())},agregarLibro(){let t=new FormData;t.append("titulo",this.libro.titulo),t.append("copias",this.libro.copias),t.append("copiasDisponibles",this.libro.copiasDisponibles),t.append("categoria",this.libro.categoria),t.append("edicion",this.libro.edicion),t.append("codigo",this.libro.codigo),t.append("observacion",this.libro.observacion),t.append("idAutor",this.libro.idAutor),t.append("idEmpleado",localStorage.getItem("id")),t.append("idCarrera",this.libro.idCarrera),t.append("urlPortada",this.libro.urlPortada),t.append("idEditorial",this.libro.idEditorial),t.append("activo",this.libro.activo),t.append("documento",this.pdf),t.append("idSubsede",localStorage.getItem("idSubsede")),F().post(J+"/libros/",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){console.log(t),location.reload()})).catch((function(t){console.log(t)}))},actualizar(){F().put(J+"/libros/"+this.libro.id,{titulo:this.libro.titulo,copias:this.libro.copias,copiasDisponibles:this.libro.copiasDisponibles,categoria:this.libro.categoria,edicion:this.libro.edicion,codigo:this.libro.codigo,idAutor:parseInt(this.libro.idAutor),idEmpleado:this.libro.idEmpleado,idSubsede:localStorage.getItem("idSubsede"),idEditorial:parseInt(this.libro.idEditorial),idCarrera:parseInt(this.libro.idCarrera),urlPortada:this.libro.urlPortada,observacion:this.libro.observacion,activo:1}).then((function(t){console.log(Request),console.log(t),location.reload()})).catch((function(t){console.log(t)}))},consultarAutor(){fetch(J+"/autor/").then((t=>t.json())).then((t=>{"undefined"===typeof t[0].success&&(t.sort(((t,e)=>t.nombre.toUpperCase()==e.nombre.toUpperCase()?0:t.nombre.toUpperCase()>e.nombre.toUpperCase()?1:t.nombre.toUpperCase()<e.nombre.toUpperCase()?-1:void 0)),this.autor=t,this.libro.idAutor=this.autor[0].id,this.libro.idEditorial=this.editoriales[0].id)})).catch(console.log)},consultarCarreras(){fetch(J+"/carreras").then((t=>t.json())).then((t=>{this.carreras=[],"undefined"===typeof t[0].success&&(this.carreras=t)})).catch(console.log)},consultarEditorial(){fetch(J+"/editoriales/").then((t=>t.json())).then((t=>{"undefined"===typeof t[0].success&&(t.sort(((t,e)=>t.nombreEditorial.toUpperCase()==e.nombreEditorial.toUpperCase()?0:t.nombreEditorial.toUpperCase()>e.nombreEditorial.toUpperCase()?1:t.nombreEditorial.toUpperCase()<e.nombreEditorial.toUpperCase()?-1:void 0)),this.editoriales=t)})).catch(console.log)},reset(){Object.assign(this.$data,this.$options.data()),this.consultarEditorial(),this.consultarAutor(),this.consultarCarreras()},volver(){location.reload()},obterAutor(){this.preNombre=this.autor.find((t=>t.id==this.libro.idAutor)).nombre},Previa(){let t=0;while(t!=this.libro.idAutor)this.libro.idAutor==this.autor[t].id?(this.preNombre=this.autor[t].nombre,t=this.libro.idAutor):t++},buscarArchivo(t){this.pdf=t.target.files[0]}}},K=X,Q=(0,n.Z)(K,V,G,!1,null,null,null),Y=Q.exports,tt={name:"LibrosView",data(){return{valor:0,acceso:localStorage.getItem("acceso"),obtenerLibros:[]}},components:{ListarLibro:H,CrearLibro:Y},mounted:function(){0==localStorage.getItem("acceso")&&this.$router.push({name:"home"})},methods:{variableLibro(t){this.valor=t},listar(){return 0===this.valor?"active":""},crear(){return-1===this.valor?"active":""},editar(){return 1===this.valor?"active":""}}},et=tt,at=(0,n.Z)(et,x,I,!1,null,null,null),ot=at.exports,it=function(){var t=this,e=t._self._c;return 1==t.acceso?e("div",[e("Listarsolicitudes")],1):e("div",[e("ListarsolicitudesAdmin")],1)},rt=[],st=function(){var t=this,e=t._self._c;return e("div",{staticClass:"solicitud px-md-5 px-2"},[t._v(" Mis Solicitudes "),e("div",{staticClass:"form-group text-center"},[e("label",[t._v("Seleccione el estado del prestamo")]),e("br"),e("select",{directives:[{name:"model",rawName:"v-model",value:t.estado,expression:"estado"}],staticClass:"custom-select",attrs:{name:"",id:""},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.estado=e.target.multiple?a:a[0]},function(e){return t.filtrarSolicitudes()}]}},[e("option",{attrs:{value:"-1"}},[t._v("Todos los estados")]),e("option",{attrs:{value:"0"}},[t._v("Solicitud rechazada")]),e("option",{attrs:{value:"1"}},[t._v("Pendiente de respuesta")]),e("option",{attrs:{value:"2"}},[t._v("Solicitud aceptada")]),e("option",{attrs:{value:"3"}},[t._v("libro devuelto")]),e("option",{attrs:{value:"4"}},[t._v("Pendiente de devolucion")])])]),e("br"),e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table table-striped border text-center tableMb"},[t._m(0),e("tbody",t._l(t.datosPaginados,(function(a){return e("tr",{key:a.id,staticClass:"trMb"},[e("td",{attrs:{"data-titulo":"Libro solicitado: "}},[t._v(t._s(a.titulo))]),e("td",{attrs:{"data-titulo":"Cantidad: "}},[t._v(t._s(a.cantidad))]),e("td",{attrs:{"data-titulo":"Fecha de prestamo: "}},[t._v(t._s(a.fechaPrestamo))]),e("td",{attrs:{"data-titulo":"Fecha de devolución: "}},[t._v(t._s(a.fechaDevolucion))]),e("td",{attrs:{"data-titulo":"Estado:"}},[0==a.estado?e("p",{staticStyle:{background:"red"}},[t._v(" Solicitud rechazada ")]):t._e(),1==a.estado?e("p",[t._v("Pendiente de respuesta")]):t._e(),2==a.estado?e("p",{staticStyle:{background:"green"}},[t._v(" Solicitud aceptada ")]):t._e(),3==a.estado?e("p",[t._v("libro devuelto")]):t._e(),4==a.estado?e("p",[t._v("Pendiente de devolucion")]):t._e()]),1==a.estado||2==a.estado?e("td",{attrs:{"data-titulo":"Acción: "}},[e("a",{staticClass:"btn btn-primary",attrs:{role:"button"},on:{click:function(e){return t.eliminarSolicitud(a)}}},[t._v("Cancelar prestamo")])]):e("td",{attrs:{"data-titulo":"Acción: "}},[t._v("No hay accion disponible")])])})),0)])]),e("nav",{attrs:{"aria-label":"Page navigation example"}},[e("ul",{staticClass:"pagination",attrs:{align:"center"}},[e("li",{staticClass:"page-item",on:{click:function(e){return t.paginaPrevia()}}},[e("a",{staticClass:"page-link",attrs:{href:"#"}},[t._v("Previous")])]),t._l(t.totalPaginas(),(function(a){return e("li",{key:a,staticClass:"page-item",class:t.activo(a)},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return t.ObtenerDatosPag(a)}}},[t._v(t._s(a))])])})),e("li",{staticClass:"page-item",on:{click:function(e){return t.paginaSiguiente()}}},[e("a",{staticClass:"page-link",attrs:{href:"#"}},[t._v("Next")])])],2)])])},lt=[function(){var t=this,e=t._self._c;return e("thead",{staticClass:"thMb"},[e("tr",{staticClass:"trMb"},[e("th",[t._v("Libro solicitado")]),e("th",[t._v("Cantidad")]),e("th",[t._v("Fecha de prestamo")]),e("th",[t._v("Fecha de devolución")]),e("th",[t._v("estado")]),e("th",[t._v("Acción")])])])}];const nt="http://192.168.0.113:8082/api";var ct={data(){return{estado:-1,solicitudes:[],libros:[],preTitulo:{},usuario:{cod_alum:localStorage.getItem("cod_alum"),nombre:localStorage.getItem("nombre"),apellidoP:localStorage.getItem("ap_paterno"),apellidoM:localStorage.getItem("ap_materno"),ci_pasaporte:localStorage.getItem("ci_pasaporte")},solicitudesFiltradas:[],elementosPorPagina:8,datosPaginados:[],paginaActual:1}},mounted(){this.obtenersolicitudes()},methods:{obtenersolicitudes(){fetch(nt+"/prestamos/"+this.usuario.cod_alum).then((t=>t.json())).then((t=>{this.solicitudes=t.reverse()})).then(this.filtrarSolicitudes).catch(console.log)},filtrarSolicitudes(){if(-1==this.estado)this.solicitudesFiltradas=this.solicitudes,this.ObtenerDatosPag(1);else{this.solicitudesFiltradas=[];for(let t=0;t<this.solicitudes.length;t++)this.solicitudes[t].estado===parseInt(this.estado)&&(this.solicitudesFiltradas.push(this.solicitudes[t]),this.ObtenerDatosPag(1));0===this.solicitudesFiltradas.length&&this.paginaPrevia()}},totalPaginas(){return Math.ceil(this.solicitudesFiltradas.length/this.elementosPorPagina)},ObtenerDatosPag(t){this.paginaActual=t,this.datosPaginados=[];let e=t*this.elementosPorPagina-this.elementosPorPagina,a=t*this.elementosPorPagina;this.datosPaginados=this.solicitudesFiltradas.slice(e,a)},paginaPrevia(){this.paginaActual>1&&this.paginaActual--,this.ObtenerDatosPag(this.paginaActual)},paginaSiguiente(){this.paginaActual<this.totalPaginas()&&this.paginaActual++,this.ObtenerDatosPag(this.paginaActual)},activo(t){return t===this.paginaActual?"active":""},eliminarSolicitud(t){console.log(t),F().put(nt+"/prestamos/"+t.id,{idEmpleado:t.idEmpleado,codigoUsuario:t.codigoUsuario,idLibro:t.idLibro,idSubsede:t.idSubsede,cantidad:t.cantidad,fechaPrestamo:t.fechaPrestamo,fechaDevolucion:t.fechaDevolucion,observacion:"Prestamo cancelado por el alumno",estado:t.estado,activo:0,telefono:t.telefono}).then((function(t){console.log(t),location.reload()})).catch((function(t){console.log(t)}))}}},dt=ct,ut=(0,n.Z)(dt,st,lt,!1,null,null,null),mt=ut.exports,pt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"p-5"},[e("div",{staticClass:"form-group",attrs:{align:"center"}},[e("label",[t._v("Seleccione el estado del prestamo")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.estado,expression:"estado"}],staticClass:"custom-select",attrs:{name:"",id:""},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.estado=e.target.multiple?a:a[0]},function(e){return t.filtrarSolicitudes()}]}},[e("option",{attrs:{value:"-1"}},[t._v("Todos los estados")]),e("option",{attrs:{value:"0"}},[t._v("Solicitud rechazada")]),e("option",{attrs:{value:"1"}},[t._v("Pendiente de respuesta")]),e("option",{attrs:{value:"2"}},[t._v("Solicitud aceptada")]),e("option",{attrs:{value:"3"}},[t._v("libro devuelto")]),e("option",{attrs:{value:"4"}},[t._v("Pendiente de devolucion")]),e("option",{attrs:{value:"5"}},[t._v("Retrasado")])]),e("br"),e("label",[t._v("Seleccione el rango de fechas")]),e("br"),e("b-row",{attrs:{cols:"2"}},[e("b-col",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.fechaInicio,expression:"fechaInicio"}],staticClass:"form-control",attrs:{type:"date",name:"",id:""},domProps:{value:t.fechaInicio},on:{change:function(e){return t.filtrarSolicitudes()},input:function(e){e.target.composing||(t.fechaInicio=e.target.value)}}})]),e("b-col",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.fechaFin,expression:"fechaFin"}],staticClass:"form-control",attrs:{type:"date",name:"",id:""},domProps:{value:t.fechaFin},on:{change:function(e){return t.filtrarSolicitudes()},input:function(e){e.target.composing||(t.fechaFin=e.target.value)}}})])],1),e("br")],1),e("table",{staticClass:"table table-striped border text-center"},[t._m(0),e("tbody",t._l(t.datosPaginados,(function(a){return e("tr",{key:a.id},[e("td",[t._v(t._s(t.NombreSolicitate[a.id])+" ")]),e("td",[t._v(t._s(a.titulo))]),e("td",[t._v(t._s(a.cantidad))]),e("td",[t._v(t._s(a.fechaPrestamo))]),e("td",[t._v(t._s(a.fechaDevolucion))]),e("td",[0==a.estado?e("p",[t._v(" Solicitud rechazada ")]):t._e(),1==a.estado?e("p",[t._v("Pendiente de respuesta")]):t._e(),2==a.estado?e("p",[t._v(" Solicitud aceptada ")]):t._e(),3==a.estado?e("p",[t._v("libro devuelto")]):t._e(),4==a.estado?e("p",[t._v("Pendiente de devolucion")]):t._e(),5==a.estado?e("p",[t._v("Retrasado")]):t._e()]),e("td",[1==a.estado||2==a.estado?e("a",{staticClass:"btn btn-danger",attrs:{role:"button"},on:{click:function(e){return t.eliminarSolicitud(a,t.NombreSolicitate[a.id])}}},[t._v("👎🏻")]):t._e(),0==a.estado||1==a.estado?e("a",{staticClass:"btn btn-success",attrs:{role:"button"},on:{click:function(e){return t.aceptarSolicitud(a,t.NombreSolicitate[a.id])}}},[t._v(" 👍🏻 ")]):t._e(),2==a.estado?e("a",{staticClass:"btn btn-warning",attrs:{role:"button"},on:{click:function(e){return t.entregarLibro(a)}}},[t._v("📦")]):t._e(),4==a.estado||5==a.estado?e("a",{staticClass:"btn btn-info",attrs:{role:"button"},on:{click:function(e){return t.devolverLibro(a)}}},[t._v("🔙")]):t._e(),0!=a.estado?e("a",{staticClass:"btn btn-primary",attrs:{role:"button"},on:{click:function(e){return t.imprimirSolicitud(a,t.NombreSolicitate[a.id])}}},[t._v("🖨️")]):t._e()])])})),0)]),e("nav",{attrs:{"aria-label":"Page navigation example"}},[e("ul",{staticClass:"pagination",attrs:{align:"center"}},[e("li",{staticClass:"page-item",on:{click:function(e){return t.paginaPrevia()}}},[e("a",{staticClass:"page-link",attrs:{href:"#"}},[t._v("Previous")])]),t._l(t.totalPaginas(),(function(a){return e("li",{key:a,staticClass:"page-item",class:t.activo(a)},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return t.ObtenerDatosPag(a)}}},[t._v(t._s(a))])])})),e("li",{staticClass:"page-item",on:{click:function(e){return t.paginaSiguiente()}}},[e("a",{staticClass:"page-link",attrs:{href:"#"}},[t._v("Next")])])],2)]),e("table",{staticStyle:{display:"none"},attrs:{id:"solicitudesTabla"}},[t._m(1),e("tbody",t._l(t.solicitudesFiltradas,(function(a){return e("tr",{key:a.id},[e("td",[t._v(t._s(t.NombreSolicitate[a.id])+" ")]),e("td",[t._v(t._s(a.titulo))]),e("td",[t._v(t._s(a.cantidad))]),e("td",[t._v(t._s(a.fechaPrestamo))]),e("td",[t._v(t._s(a.fechaDevolucion))]),e("td",[0==a.estado?e("p",[t._v(" Solicitud rechazada ")]):t._e(),1==a.estado?e("p",[t._v("Pendiente de respuesta")]):t._e(),2==a.estado?e("p",[t._v(" Solicitud aceptada ")]):t._e(),3==a.estado?e("p",[t._v("libro devuelto")]):t._e(),4==a.estado?e("p",[t._v("Pendiente de devolucion")]):t._e()])])})),0)]),e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.imprimirSolicitudes()}}},[t._v(" Imprimir reportes 🖨️")])])},bt=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Solicitante")]),e("th",[t._v("Libro solicitado")]),e("th",[t._v("cantidad")]),e("th",[t._v("Fecha de prestamo")]),e("th",[t._v("Fecha de devolucion")]),e("th",[t._v("estado")]),e("th",[t._v("Acción")])])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Solicitante")]),e("th",[t._v("Libro solicitado")]),e("th",[t._v("cantidad")]),e("th",[t._v("Fecha de prestamo")]),e("th",[t._v("Fecha de devolucion")]),e("th",[t._v("estado")])])])}];const ht="http://192.168.0.113:8081/api",vt="http://192.168.0.113:8082/api";var gt={data(){return{fechaInicio:"",fechaFin:"",estado:-1,solicitudes:[],libros:[],preTitulo:{},solicitudesFiltradas:[],elementosPorPagina:8,datosPaginados:[],paginaActual:1,NombreSolicitate:[]}},mounted(){this.obtenersolicitudes()},methods:{imprimirSolicitud(t,e){var a=new N.jsPDF;a.setFontSize(20),a.text(20,20,"Solicitud de prestamo"),a.addImage,a.text(180,20,"UNO"),a.setFontSize(12),a.text(20,30,"Nombre: "+e),a.text(20,40,"Codigo de usuario: "+t.codigoUsuario),a.text(20,50,"Libro: "+t.titulo),a.text(20,60,"Cantidad: "+t.cantidad),a.text(20,70,"Fecha de prestamo: "+t.fechaPrestamo),a.text(20,80,"Fecha de devolucion: "+t.fechaDevolucion),a.text(20,100,"Firma del alumno:______________________"),a.text(0,140,"----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------"),a.setFontSize(20),a.text(20,170,"Solicitud de prestamo"),a.text(180,170,"UNO"),a.setFontSize(12),a.text(20,180,"Nombre: "+e),a.text(20,190,"Codigo de usuario: "+t.codigoUsuario),a.text(20,200,"Libro: "+t.titulo),a.text(20,210,"Cantidad: "+t.cantidad),a.text(20,220,"Fecha de prestamo: "+t.fechaPrestamo),a.text(20,230,"Fecha de devolucion: "+t.fechaDevolucion),a.text(20,250,"Firma del alumno:______________________"),a.save("solicitud.pdf")},obtenersolicitudes(){fetch(vt+"/prestamo/"+localStorage.getItem("idSubsede")).then((t=>t.json())).then((t=>{this.solicitudes=t.reverse()})).then((()=>{for(let t=0;t<this.solicitudes.length;t++)this.asignarNombre(this.solicitudes[t].codigoUsuario,this.solicitudes[t].id)})).catch(console.log)},asignarNombre(t,e){void 0==this.NombreSolicitate[e]&&fetch(ht+"/alumno/"+t).then((t=>t.json())).then((t=>{this.filtrarSolicitudes(),this.NombreSolicitate[e]=t.nombre+" "+t.ap_paterno+" "+t.ap_materno}))},filtrarSolicitudes(){if(-1==this.estado)console.log(this.fechaFin,this.fechaInicio),this.solicitudesFiltradas=this.solicitudes,this.ObtenerDatosPag(1);else{this.solicitudesFiltradas=[];for(let t=0;t<this.solicitudes.length;t++)""!=this.fechaInicio&&""!=this.fechaFin?this.solicitudes[t].estado===parseInt(this.estado)&&this.solicitudes[t].fechaPrestamo>=this.fechaInicio&&this.solicitudes[t].fechaPrestamo<=this.fechaFin&&(this.solicitudesFiltradas.push(this.solicitudes[t]),this.ObtenerDatosPag(1)):this.solicitudes[t].estado===parseInt(this.estado)&&(console.log(this.solicitudes[t].fechaPrestamo),this.solicitudesFiltradas.push(this.solicitudes[t]),this.ObtenerDatosPag(1));0===this.solicitudesFiltradas.length&&this.paginaPrevia()}},totalPaginas(){return Math.ceil(this.solicitudesFiltradas.length/this.elementosPorPagina)},ObtenerDatosPag(t){this.paginaActual=t,this.datosPaginados=[];let e=t*this.elementosPorPagina-this.elementosPorPagina,a=t*this.elementosPorPagina;this.datosPaginados=this.solicitudesFiltradas.slice(e,a)},paginaPrevia(){this.paginaActual>1&&this.paginaActual--,this.ObtenerDatosPag(this.paginaActual)},paginaSiguiente(){this.paginaActual<this.totalPaginas()&&this.paginaActual++,this.ObtenerDatosPag(this.paginaActual)},activo(t){return t===this.paginaActual?"active":""},eliminarSolicitud(t,e){var a;a=2==t.estado?1:0;try{F().put(vt+"/prestamos/"+t.id,{idEmpleado:t.idEmpleado,codigoUsuario:t.codigoUsuario,idLibro:t.idLibro,cantidad:t.cantidad,fechaPrestamo:t.fechaPrestamo,idSubsede:t.idSubsede,fechaDevolucion:t.fechaDevolucion,observacion:"Prestamo rechazado por el bibliotecario",estado:0,activo:1,telefono:t.telefono}).then((function(){fetch(vt+"/libros/"+t.idLibro).then((t=>t.json())).then((o=>{F().put(vt+"/libros/"+t.idLibro,{titulo:o.titulo,copias:o.copias,copiasDisponibles:o.copiasDisponibles+a,categoria:o.categoria,edicion:o.edicion,codigo:o.codigo,idAutor:parseInt(o.idAutor),idEmpleado:o.idEmpleado,idEditorial:parseInt(o.idEditorial),idCarrera:parseInt(o.idCarrera),urlPortada:o.urlPortada,observacion:o.observacion,activo:1}).then((function(){null!=t.telefono&&window.open("https://api.whatsapp.com/send?phone=591"+t.telefono+"&text=Hola "+e+", nos comunicamos desde la Universidad Nacional del Oriente sede "+localStorage.getItem("Subsede")+', para informarte que tu solicitus del libro "'+t.titulo+'" a sido rechazada, lamentamos este inconveniente y te pedimos que puedas pasar personalmente por la universidad a realizar la solicitud')})).then((function(){location.reload()})).catch((function(t){console.log(t)}))})).catch(console.log)}))}catch(o){console.log(o)}},aceptarSolicitud(t,e){try{F().put(vt+"/prestamos/"+t.id,{idEmpleado:t.idEmpleado,codigoUsuario:t.codigoUsuario,idLibro:t.idLibro,cantidad:t.cantidad,fechaPrestamo:t.fechaPrestamo,idSubsede:t.idSubsede,fechaDevolucion:t.fechaDevolucion,observacion:"Prestamo aceptado por el bibliotecario",estado:2,activo:1,telefono:t.telefono}).then((function(){fetch(vt+"/libros/"+t.idLibro).then((t=>t.json())).then((a=>{F().put(vt+"/libros/"+t.idLibro,{titulo:a.titulo,copias:a.copias,copiasDisponibles:a.copiasDisponibles-1,categoria:a.categoria,edicion:a.edicion,codigo:a.codigo,idAutor:parseInt(a.idAutor),idEmpleado:a.idEmpleado,idEditorial:parseInt(a.idEditorial),idCarrera:parseInt(a.idCarrera),urlPortada:a.urlPortada,observacion:a.observacion,activo:1}).then((function(){null!=t.telefono&&window.open("https://api.whatsapp.com/send?phone=591"+t.telefono+"&text=Hola%20"+e+",%20nos%20comunicamos%20de%20la%20Universidad%20Nacional%20del%20Oriente%20sede%20"+localStorage.getItem("Subsede")+',%20%20para%20informarte%20que%20tu%20solicitud%20por%20el%20libro%20"'+t.titulo+'"%20a%20sido%20aprobada,%20ya%20puedes%20pasar%20a%20recoger%20el%20libro.')})).then((function(){location.reload()})).catch((function(t){console.log(t)}))})).catch(console.log)}))}catch(a){console.log(a)}},devolverLibro(t){var e=0;3==t.estado&&(e=4),4!=t.estado&&5!=t.estado||(e=3),F().put(vt+"/prestamos/"+t.id,{idEmpleado:t.idEmpleado,codigoUsuario:t.codigoUsuario,idLibro:t.idLibro,cantidad:t.cantidad,idSubsede:t.idSubsede,fechaPrestamo:t.fechaPrestamo,fechaDevolucion:t.fechaDevolucion,observacion:"Libro devulto",estado:e,activo:1,telefono:t.telefono}).then((function(){3==e?fetch(vt+"/libros/"+t.idLibro).then((t=>t.json())).then((e=>{F().put(vt+"/libros/"+t.idLibro,{titulo:e.titulo,copias:e.copias,copiasDisponibles:e.copiasDisponibles+1,categoria:e.categoria,edicion:e.edicion,codigo:e.codigo,idAutor:parseInt(e.idAutor),idEmpleado:e.idEmpleado,idEditorial:parseInt(e.idEditorial),idCarrera:parseInt(e.idCarrera),urlPortada:e.urlPortada,observacion:e.observacion,activo:1}).then((function(){location.reload()})).catch((function(t){console.log(t)}))})).catch(console.log):location.reload()})).catch((function(t){console.log(t)}))},entregarLibro(t){try{var e=0;4==t.estado&&(e=2),2==t.estado&&(e=4),F().put(vt+"/prestamos/"+t.id,{idEmpleado:t.idEmpleado,codigoUsuario:t.codigoUsuario,idLibro:t.idLibro,cantidad:t.cantidad,idSubsede:t.idSubsede,fechaPrestamo:t.fechaPrestamo,fechaDevolucion:t.fechaDevolucion,observacion:"libro entregado por el bibliotecario",estado:e,activo:1,telefono:t.telefono}).then((function(){location.reload()}))}catch(a){console.log(a)}},imprimirSolicitudes(){var t=new N.jsPDF,e=document.getElementById("solicitudesTabla"),a=t.autoTableHtmlToJson(e);t.autoTable(a.columns,a.data,{theme:"grid",styles:{overflow:"linebreak",fontSize:10,rowHeight:20,font:"helvetica",fontStyle:"normal",lineWidth:.1,lineColor:[.5,.5,.5],fillColor:[255,255,255],textColor:0,halign:"left",valign:"middle",cellPadding:2,cellWidth:"auto",cellHeight:"auto",tableWidth:"auto",tableHeight:"auto",tablePadding:5,tableBorder:1,tableBorderColor:[0,0,0],tableBackgroundColor:[255,255,255],headerBorder:0,headerBorderColor:[0,0,0],headerBackgroundColor:[255,255,255],headerTextColor:0,headerCellPadding:5,headerCellWidth:"auto",headerCellHeight:"auto",headerFont:"helvetica",headerFontSize:10,headerFontStyle:"bold",headerAlign:"center",footerBorder:0,footerBorderColor:[0,0,0],footerBackgroundColor:[255,255,255],footerTextColor:0,footerCellPadding:5,footerCellWidth:"auto",footerCellHeight:"auto",footerFont:"helvetica",footerFontSize:10,footerFontStyle:"bold",footerAlign:"center",columnWidth:"auto",columnHeight:"auto",columnPadding:5,columnBorder:1,columnBorderColor:[0,0,0],columnBackgroundColor:[255,255,255],columnTextColor:0,columnAlign:"left"},margin:{top:10,bottom:10,left:10,right:10}}),t.save("solicitudes.pdf")}}},ft=gt,_t=(0,n.Z)(ft,pt,bt,!1,null,"d4acedc8",null),Ct=_t.exports,Pt={name:"solicitudesView",data(){return{valor:0,acceso:localStorage.getItem("acceso"),obtenerLibros:[]}},components:{Listarsolicitudes:mt,ListarsolicitudesAdmin:Ct},mounted:function(){0==localStorage.getItem("acceso")&&this.$router.push({name:"home"})},methods:{listar(){return 0===this.valor?"active":""},crear(){return-1===this.valor?"active":""},editar(){return 0!=this.valor&&-1!=this.valor?"active":""},variableLibro(t){this.valor=t}}},Et=Pt,St=(0,n.Z)(Et,it,rt,!1,null,null,null),At=St.exports,yt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container mx-auto mt-5"},[e("div",{staticClass:"card text-cente"},[e("div",{staticClass:"card-header"},[e("ul",{staticClass:"nav nav-tabs card-header-tabs"},[e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",class:t.listar(),attrs:{"aria-current":"true",href:"#"},on:{click:function(e){t.valor=0}}},[t._v("Listado")])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",class:t.crear(),attrs:{href:"#",name:"1"},on:{click:function(e){t.valor=-1}}},[t._v("Nuevo")])])])]),e("div",{staticClass:"card-body bg-white"},[e("ListarAutores",{directives:[{name:"show",rawName:"v-show",value:0==t.valor,expression:"valor == 0"}]}),t.valor<0?e("CrearAutores",{attrs:{variable:t.valor}}):t._e()],1)])])},xt=[],It=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row align-items-center"},[e("div",{staticClass:"col"},[e("div",{staticClass:"container align-items-center"},[e("div",{staticClass:"form-group text-center"},[e("label",{attrs:{for:""}},[t._v("Ingresa el nombre del autor")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.nombreAutor,expression:"nombreAutor"}],staticClass:"form-control text-center",attrs:{type:"text",placeholder:"Nombre del autor"},domProps:{value:t.nombreAutor},on:{keyup:function(e){return t.filtrarAutores()},input:function(e){e.target.composing||(t.nombreAutor=e.target.value)}}})]),e("br"),e("div",{staticClass:"d-none d-sm-none d-md-block table-responsive table-sm small"},[e("table",{staticClass:"table table-striped border text-center"},[t._m(0),e("tbody",t._l(t.datosPaginados,(function(a){return e("tr",{key:a.id},[e("td",[t._v(t._s(a.nombre))]),e("td",[e("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":""}},[e("button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-center",modifiers:{"modal-center":!0}}],staticClass:"btn btn-info btn-sm",on:{click:function(e){return t.obtenerAutor(a)}}},[t._v(" Editar ")]),e("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button"},on:{click:function(e){return t.eliminar(a)}}},[t._v(" Eliminar ")])])])])})),0)])])])]),e("nav",{attrs:{"aria-label":"Page navigation example"}},[e("ul",{staticClass:"pagination"},[e("li",{staticClass:"page-item",on:{click:function(e){return t.paginaPrevia()}}},[e("a",{staticClass:"page-link",attrs:{href:"#"}},[t._v("Previous")])]),t._l(t.totalPaginas(),(function(a){return e("li",{key:a,staticClass:"page-item",class:t.activo(a)},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return t.ObtenerDatosPag(a)}}},[t._v(t._s(a))])])})),e("li",{staticClass:"page-item",on:{click:function(e){return t.paginaSiguiente()}}},[e("a",{staticClass:"page-link",attrs:{href:"#"}},[t._v("Next")])])],2)]),e("b-modal",{attrs:{id:"modal-center",centered:"",title:"Modificar autor"}},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("nombre autor")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.autorEditar.nombre,expression:"autorEditar.nombre"}],staticClass:"form-control",attrs:{type:"text",name:"",id:"",placeholder:"autorEditar.nombre","aria-describedby":"helpId"},domProps:{value:t.autorEditar.nombre},on:{input:function(e){e.target.composing||t.$set(t.autorEditar,"nombre",e.target.value)}}}),e("button",{on:{click:function(e){return t.actualizar()}}})])])],1)},wt=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("NOMBRE")]),e("th",[t._v("ACCIONES")])])])}];const kt="http://192.168.0.113:8082/api";var Lt={name:"ListarAutores",data(){return{totalAutores:[],nombreAutor:"",autores:[],elementosPorPagina:10,datosPaginados:[],paginaActual:1,autorEditar:{nombre:"",id:0}}},created:function(){this.consultarAutores()},mounted(){this.ObtenerDatosPag(1)},methods:{consultarAutores(){fetch(kt+"/autor").then((t=>t.json())).then((t=>{this.libros=[],"undefined"===typeof t[0].success&&(t.sort(((t,e)=>t.nombre.toUpperCase()==e.nombre.toUpperCase()?0:t.nombre.toUpperCase()>e.nombre.toUpperCase()?1:t.nombre.toUpperCase()<e.nombre.toUpperCase()?-1:void 0)),this.autores=t,this.filtrarAutores())})).catch(console.log)},filtrarAutores(){this.totalAutores=[];for(let t=0;t<this.autores.length;t++)1===this.autores[t].activo&&this.autores[t].nombre.toUpperCase().includes(this.nombreAutor.toUpperCase())&&(this.totalAutores=this.totalAutores.concat(this.autores[t]),this.ObtenerDatosPag(1));0===this.totalAutores.length&&this.paginaPrevia()},eliminar(t){console.log(t),F().put(kt+"/autor/"+t.id,{nombre:t.nombre,idEmpleado:t.idEmpleado,activo:0}).then((function(t){console.log(t),location.reload()})).catch((function(t){console.log(t)}))},totalPaginas(){return Math.ceil(this.totalAutores.length/this.elementosPorPagina)},ObtenerDatosPag(t){this.paginaActual=t,this.datosPaginados=[];let e=t*this.elementosPorPagina-this.elementosPorPagina,a=t*this.elementosPorPagina;this.datosPaginados=this.totalAutores.slice(e,a)},paginaPrevia(){this.paginaActual>1&&this.paginaActual--,this.ObtenerDatosPag(this.paginaActual)},paginaSiguiente(){this.paginaActual<this.totalPaginas()&&this.paginaActual++,this.ObtenerDatosPag(this.paginaActual)},activo(t){return t===this.paginaActual?"active":""},obtenerAutor(t){this.autorEditar.nombre=t.nombre,this.autorEditar.id=t.id},actualizar(){F().put(kt+"/autor/"+this.autorEditar.id,{nombre:this.autorEditar.nombre.toUpperCase(),idEmpleado:parseInt(localStorage.getItem("id")),activo:1}).then((function(t){console.log(t),location.reload()})).then(alert("El autor se actualizo correctamente")).catch((function(t){console.log(t)}))}}},Nt=Lt,Dt=(0,n.Z)(Nt,It,wt,!1,null,null,null),Ot=Dt.exports,Ut=function(){var t=this,e=t._self._c;return e("div",{ref:"accionEditar",staticClass:"container row"},[e("form",{staticClass:"col",on:{submit:function(e){return e.preventDefault(),t.agregarAutor.apply(null,arguments)}}},[e("div",{staticClass:"row align-items-center"},[e("div",{staticClass:"form-group col-sm"},[e("label",{attrs:{for:"titulo"}},[t._v("nombre del autor")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.nombreAutor,expression:"nombreAutor"}],staticClass:"form-control",attrs:{required:"",type:"text",name:"nombre",id:"titulo",placeholder:"Nombre del autor","aria-describedby":"titulo"},domProps:{value:t.nombreAutor},on:{input:function(e){e.target.composing||(t.nombreAutor=e.target.value)}}})])]),e("br"),e("div",{staticClass:"container row justify-content-md-center",attrs:{"raria-label":""}},[t.variable<0?e("a",{staticClass:"btn btn-success col-3",on:{click:function(e){return e.stopPropagation(),t.agregarAutor()}}},[t._v(" Agregar nuevo autor ")]):t._e(),t.variable<0?e("a",{staticClass:"btn btn-danger col-3",on:{click:function(e){return e.stopPropagation(),t.reset()}}},[t._v("Resetear Formulario")]):t._e(),e("a",{staticClass:"btn btn-danger col-3",on:{click:function(e){return e.stopPropagation(),t.volver()}}},[t._v("Cancelar")])])])])},Ft=[];const jt="http://192.168.0.113:8082/api";var Tt={data(){return{nombreAutor:""}},props:{variable:{type:Number,default:0}},methods:{consultarAutor(){this.variable>0&&fetch(jt+"/autor/"+this.variable).then((t=>t.json())).then((t=>{this.nombreAutor=t.nombre})).catch(console.log)},agregarAutor(){F().post(jt+"/autor/",{nombre:this.nombreAutor.toUpperCase(),idEmpleado:parseInt(localStorage.getItem("id")),activo:1}).then((function(t){console.log(t),location.reload()})).then(alert("El autor se agrego correctamente")).catch((function(t){console.log(t)}))},reset(){Object.assign(this.$data,this.$options.data()),this.consultarEditorial(),this.consultarAutor(),this.consultarCarreras()},volver(){location.reload()},obterAutor(){this.preNombre=this.autor.find((t=>t.id==this.libro.idAutor)).nombre},Previa(){let t=0;while(t!=this.libro.idAutor)this.libro.idAutor==this.autor[t].id?(this.preNombre=this.autor[t].nombre,t=this.libro.idAutor):t++}}},zt=Tt,$t=(0,n.Z)(zt,Ut,Ft,!1,null,null,null),Wt=$t.exports,Mt={name:"AutoresView",data(){return{valor:0,name:0}},components:{ListarAutores:Ot,CrearAutores:Wt},mounted:function(){2!=localStorage.getItem("acceso")&&this.$router.push({name:"home"})},created:function(){this.valor=0},methods:{listar(){return 0===this.valor?"active":""},crear(){return-1===this.valor?"active":""}}},Bt=Mt,qt=(0,n.Z)(Bt,yt,xt,!1,null,null,null),Zt=qt.exports,Rt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container mx-auto mt-5"},[e("div",{staticClass:"card text-cente"},[e("div",{staticClass:"card-header"},[e("ul",{staticClass:"nav nav-tabs card-header-tabs"},[e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",class:t.listar(),attrs:{"aria-current":"true",href:"#"},on:{click:function(e){t.valor=0}}},[t._v("Listado")])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",class:t.crear(),attrs:{href:"#",name:"1"},on:{click:function(e){t.valor=-1}}},[t._v("Nuevo")])])])]),e("div",{staticClass:"card-body bg-white"},[e("ListarEditorial",{directives:[{name:"show",rawName:"v-show",value:0==t.valor,expression:"valor == 0"}]}),t.valor<0?e("CrearEditorial",{attrs:{variable:t.valor}}):t._e()],1)])])},Ht=[],Vt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row align-items-center"},[e("div",{staticClass:"col"},[e("div",{staticClass:"container align-items-center"},[e("div",{staticClass:"form-group text-center"},[e("label",{attrs:{for:""}},[t._v("Ingresa el nombre de la editorial")]),e("br"),e("input",{directives:[{name:"model",rawName:"v-model",value:t.nombreEditorial,expression:"nombreEditorial"}],staticClass:"form-control text-center",attrs:{type:"text",placeholder:"Nombre de la editorial"},domProps:{value:t.nombreEditorial},on:{keyup:function(e){return t.filtrarEditoriales()},input:function(e){e.target.composing||(t.nombreEditorial=e.target.value)}}})]),e("br"),e("div",{staticClass:"d-none d-sm-none d-md-block table-responsive"},[e("table",{staticClass:"table table-striped border text-center"},[t._m(0),e("tbody",t._l(t.datosPaginados,(function(a){return e("tr",{key:a.id},[e("td",[t._v(t._s(a.nombreEditorial))]),e("td",[e("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":""}},[e("button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-center",modifiers:{"modal-center":!0}}],staticClass:"btn btn-info",on:{click:function(e){return t.obtenerAutor(a)}}},[t._v(" Editar ")]),e("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return t.eliminar(a)}}},[t._v(" Eliminar ")])])])])})),0)])])])]),e("nav",{attrs:{"aria-label":"Page navigation example"}},[e("ul",{staticClass:"pagination"},[e("li",{staticClass:"page-item",on:{click:function(e){return t.paginaPrevia()}}},[e("a",{staticClass:"page-link",attrs:{href:"#"}},[t._v("Previous")])]),t._l(t.totalPaginas(),(function(a){return e("li",{key:a,staticClass:"page-item",class:t.activo(a)},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return t.ObtenerDatosPag(a)}}},[t._v(t._s(a))])])})),e("li",{staticClass:"page-item",on:{click:function(e){return t.paginaSiguiente()}}},[e("a",{staticClass:"page-link",attrs:{href:"#"}},[t._v("Next")])])],2)]),e("b-modal",{attrs:{id:"modal-center",centered:"",title:"Modificar autor"}},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("nombre de la editorial")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.editorialEditar.nombre,expression:"editorialEditar.nombre"}],staticClass:"form-control",attrs:{type:"text",placeholder:"editorialEditar.nombre","aria-describedby":"helpId"},domProps:{value:t.editorialEditar.nombre},on:{input:function(e){e.target.composing||t.$set(t.editorialEditar,"nombre",e.target.value)}}}),e("button",{on:{click:function(e){return t.actualizar()}}})])])],1)},Gt=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("NOMBRE")]),e("th",[t._v("ACCIONES")])])])}];const Jt="http://192.168.0.113:8082/api";var Xt={name:"ListarEditorial",data(){return{totalEditoriales:[],nombreEditorial:"",editoriales:[],elementosPorPagina:8,datosPaginados:[],paginaActual:1,editorialEditar:{nombre:"",id:0}}},created:function(){this.consultarEditoriales()},mounted(){this.ObtenerDatosPag(1)},methods:{consultarEditoriales(){fetch(Jt+"/editoriales").then((t=>t.json())).then((t=>{this.libros=[],"undefined"===typeof t[0].success&&(t.sort(((t,e)=>t.nombreEditorial.toUpperCase()==e.nombreEditorial.toUpperCase()?0:t.nombreEditorial.toUpperCase()>e.nombreEditorial.toUpperCase()?1:t.nombreEditorial.toUpperCase()<e.nombreEditorial.toUpperCase()?-1:void 0)),this.editoriales=t,this.filtrarEditoriales())})).catch(console.log)},filtrarEditoriales(){this.totalEditoriales=[];for(let t=0;t<this.editoriales.length;t++)1===this.editoriales[t].activo&&this.editoriales[t].nombreEditorial.toUpperCase().includes(this.nombreEditorial.toUpperCase())&&(this.totalEditoriales=this.totalEditoriales.concat(this.editoriales[t]),this.ObtenerDatosPag(1));0===this.totalEditoriales.length&&this.paginaPrevia()},eliminar(t){console.log(t),F().put(Jt+"/editoriales/"+t.id,{nombreEditorial:t.nombreEditorial,idEmpleado:t.idEmpleado,activo:0}).then((function(t){console.log(t),location.reload()})).catch((function(t){console.log(t)}))},totalPaginas(){return Math.ceil(this.totalEditoriales.length/this.elementosPorPagina)},ObtenerDatosPag(t){this.paginaActual=t,this.datosPaginados=[];let e=t*this.elementosPorPagina-this.elementosPorPagina,a=t*this.elementosPorPagina;this.datosPaginados=this.totalEditoriales.slice(e,a)},paginaPrevia(){this.paginaActual>1&&this.paginaActual--,this.ObtenerDatosPag(this.paginaActual)},paginaSiguiente(){this.paginaActual<this.totalPaginas()&&this.paginaActual++,this.ObtenerDatosPag(this.paginaActual)},activo(t){return t===this.paginaActual?"active":""},obtenerAutor(t){this.editorialEditar.nombre=t.nombreEditorial,this.editorialEditar.id=t.id},actualizar(){F().put(Jt+"/editoriales/"+this.editorialEditar.id,{nombreEditorial:this.editorialEditar.nombre,idEmpleado:parseInt(localStorage.getItem("id")),activo:1}).then((function(t){console.log(t),location.reload()})).then(alert("La editorial se actualizo correctamente")).catch((function(t){console.log(t)}))}}},Kt=Xt,Qt=(0,n.Z)(Kt,Vt,Gt,!1,null,null,null),Yt=Qt.exports,te=function(){var t=this,e=t._self._c;return e("div",{ref:"accionEditar",staticClass:"container row"},[e("form",{staticClass:"col",on:{submit:function(e){return e.preventDefault(),t.agregarEditorial.apply(null,arguments)}}},[e("div",{staticClass:"row align-items-center"},[e("div",{staticClass:"form-group col-sm"},[e("label",{attrs:{for:"titulo"}},[t._v("nombre del editorial")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.nombreEditorial,expression:"nombreEditorial"}],staticClass:"form-control",attrs:{required:"",type:"text",name:"nombre",id:"titulo",placeholder:"Nombre de la Editorail","aria-describedby":"titulo"},domProps:{value:t.nombreEditorial},on:{input:function(e){e.target.composing||(t.nombreEditorial=e.target.value)}}})])]),e("br"),e("div",{staticClass:"container row justify-content-md-center",attrs:{"raria-label":""}},[t.variable<0?e("a",{staticClass:"btn btn-success col-3",on:{click:function(e){return e.stopPropagation(),t.agregarEditorial()}}},[t._v(" Agregar ")]):t._e(),t.variable<0?e("a",{staticClass:"btn btn-danger col-3",on:{click:function(e){return e.stopPropagation(),t.reset()}}},[t._v("Limpiar")]):t._e(),e("a",{staticClass:"btn btn-danger col-3",on:{click:function(e){return e.stopPropagation(),t.volver()}}},[t._v("Cancelar")])])])])},ee=[];const ae="http://192.168.0.113:8082/api";var oe={data(){return{nombreEditorial:""}},props:{variable:{type:Number,default:0}},beforeMount(){},methods:{agregarEditorial(){console.log(this.nombreEditorial),F().post(ae+"/editoriales/",{nombreEditorial:this.nombreEditorial,idEmpleado:parseInt(localStorage.getItem("id")),activo:1}).then((function(t){console.log(t),location.reload()})).catch((function(t){console.log(t)}))},reset(){Object.assign(this.$data,this.$options.data()),this.consultarEditorial(),this.consultarCarreras()},volver(){location.reload()}}},ie=oe,re=(0,n.Z)(ie,te,ee,!1,null,null,null),se=re.exports,le={name:"EditorialesView",data(){return{valor:0,name:0}},components:{ListarEditorial:Yt,CrearEditorial:se},mounted:function(){2!=localStorage.getItem("acceso")&&this.$router.push({name:"home"})},created:function(){this.valor=0},methods:{listar(){return 0===this.valor?"active":""},crear(){return-1===this.valor?"active":""}}},ne=le,ce=(0,n.Z)(ne,Rt,Ht,!1,null,null,null),de=ce.exports,ue=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container mx-auto"},[e("div",{staticClass:"card text-cente"},[e("div",{staticClass:"card-header"},[e("ul",{staticClass:"nav nav-tabs card-header-tabs"},[e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",class:t.listar(),attrs:{"aria-current":"true",href:"#"},on:{click:function(e){t.valor=0}}},[t._v("Listado")])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",class:t.crear(),attrs:{href:"#",name:"1"},on:{click:function(e){t.valor=-1}}},[t._v("Nuevo")])])])]),e("div",{staticClass:"card-body bg-white"},[e("ListarAdmin",{directives:[{name:"show",rawName:"v-show",value:0==t.valor,expression:"valor == 0"}]}),t.valor<0?e("CrearAdmin",{attrs:{variable:t.valor}}):t._e()],1)])])},me=[],pe=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row align-items-center"},[e("div",{staticClass:"col"},[e("div",{staticClass:"container align-items-center"},[e("div",{staticClass:"form-group text-center"},[e("label",{attrs:{for:""}},[t._v("Ingresa el nombre del administrador")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.nombreEmpleado,expression:"nombreEmpleado"}],staticClass:"form-control text-center",attrs:{type:"text",placeholder:"Nombre del empleado"},domProps:{value:t.nombreEmpleado},on:{keyup:function(e){return t.filtrarAutores()},input:function(e){e.target.composing||(t.nombreEmpleado=e.target.value)}}})]),e("br"),e("div",{staticClass:"d-none d-sm-none d-md-block table-responsive table-sm small"},[e("table",{staticClass:"table table-striped border text-center"},[t._m(0),e("tbody",t._l(t.datosPaginados,(function(a){return e("tr",{key:a.id},[e("td",[t._v(t._s(a.nombre))]),e("td",[t._v(t._s(a.cargo))]),e("td",[t._v(t._s(t.NombreSubSede[a.id])+" ")]),e("td",[e("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":""}},[1==t.idAdmin||t.idAdmin==a.id?e("div",[e("button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-center",modifiers:{"modal-center":!0}}],staticClass:"btn btn-info",on:{click:function(e){return t.obtenerAdmin(a)}}},[t._v(" Editar ")])]):e("div",[t._v("No hay accion disponible")]),1==t.idAdmin?e("div",[e("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return t.eliminar(a)}}},[t._v(" Eliminar ")])]):t._e()])])])})),0)])])])]),e("nav",{attrs:{"aria-label":"Page navigation example"}},[e("ul",{staticClass:"pagination"},[e("li",{staticClass:"page-item",on:{click:function(e){return t.paginaPrevia()}}},[e("a",{staticClass:"page-link",attrs:{href:"#"}},[t._v("Previous")])]),t._l(t.totalPaginas(),(function(a){return e("li",{key:a,staticClass:"page-item",class:t.activo(a)},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return t.ObtenerDatosPag(a)}}},[t._v(t._s(a))])])})),e("li",{staticClass:"page-item",on:{click:function(e){return t.paginaSiguiente()}}},[e("a",{staticClass:"page-link",attrs:{href:"#"}},[t._v("Next")])])],2)]),e("b-modal",{attrs:{id:"modal-center",centered:"",title:"Modificar empleado"}},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("Nombre del Administrador")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.empleadoEditar.nombre,expression:"empleadoEditar.nombre"}],staticClass:"form-control",attrs:{type:"text",name:"",id:"nombre",placeholder:"empleadoEditar.nombre","aria-describedby":"helpId"},domProps:{value:t.empleadoEditar.nombre},on:{input:function(e){e.target.composing||t.$set(t.empleadoEditar,"nombre",e.target.value)}}}),e("label",{attrs:{for:""}},[t._v("Usuario del Administrador")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.empleadoEditar.usuario,expression:"empleadoEditar.usuario"}],staticClass:"form-control",attrs:{type:"text",name:"",id:"usuario",placeholder:"empleadoEditar.usuario","aria-describedby":"helpId"},domProps:{value:t.empleadoEditar.usuario},on:{input:function(e){e.target.composing||t.$set(t.empleadoEditar,"usuario",e.target.value)}}}),e("label",{attrs:{for:""}},[t._v("Cargo del Administrador")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.empleadoEditar.cargo,expression:"empleadoEditar.cargo"}],staticClass:"form-control",attrs:{type:"text",name:"",id:"cargo",placeholder:"empleadoEditar.cargo","aria-describedby":"helpId"},domProps:{value:t.empleadoEditar.cargo},on:{input:function(e){e.target.composing||t.$set(t.empleadoEditar,"cargo",e.target.value)}}}),e("label",{attrs:{for:""}},[t._v("Contraseña del Administrador")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.empleadoEditar.password,expression:"empleadoEditar.password"}],staticClass:"form-control",attrs:{type:"password",name:"password",id:"password",placeholder:"empleadoEditar.password","aria-describedby":"helpId"},domProps:{value:t.empleadoEditar.password},on:{input:function(e){e.target.composing||t.$set(t.empleadoEditar,"password",e.target.value)}}}),e("label",{attrs:{for:""}},[t._v("Repetir contraseña ")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.empleadoEditar.password2,expression:"empleadoEditar.password2"}],staticClass:"form-control",attrs:{type:"password",name:"password2",id:"password2",placeholder:"contraseña","aria-describedby":"helpId"},domProps:{value:t.empleadoEditar.password2},on:{input:function(e){e.target.composing||t.$set(t.empleadoEditar,"password2",e.target.value)}}}),e("button",{on:{click:function(e){return t.actualizar()}}},[t._v("Actualizar datos")])])])],1)},be=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("NOMBRE")]),e("th",[t._v("CARGO")]),e("th",[t._v("SUBSEDE")]),e("th",[t._v("ACCIONES")])])])}];const he="http://192.168.0.113:8081/api",ve="http://192.168.0.113:8082/api";var ge={name:"ListarEmpleados",data(){return{idAdmin:localStorage.getItem("id"),totalEmpleados:[],nombreEmpleado:"",empleados:[],elementosPorPagina:10,datosPaginados:[],paginaActual:1,empleadoEditar:{nombre:"",id:0,cargo:"",usuario:"",password:"",password2:"",idSubsede:""},NombreSubSede:[]}},created:function(){this.consultarAutores()},mounted(){this.ObtenerDatosPag(1)},methods:{consultarAutores(){fetch(ve+"/empleados").then((t=>t.json())).then((t=>{this.empleados=t})).then((()=>{for(let t=0;t<this.empleados.length;t++)this.asignarNombre(this.empleados[t].idSubsede,this.empleados[t].id)})).catch(console.log)},asignarNombre(t,e){void 0==this.NombreSubSede[e]&&fetch(he+"/subsede/"+t).then((t=>t.json())).then((t=>{this.filtrarEmpleados(),this.NombreSubSede[e]=""+t[0].subsede}))},filtrarEmpleados(){if(-1==this.estado)this.totalEmpleados=this.solicitudes,this.ObtenerDatosPag(1);else{this.totalEmpleados=[];for(let t=0;t<this.empleados.length;t++)1===this.empleados[t].activo&&this.empleados[t].nombre.toUpperCase().includes(this.nombreEmpleado.toUpperCase())&&(this.totalEmpleados=this.totalEmpleados.concat(this.empleados[t]),this.ObtenerDatosPag(1));0===this.totalEmpleados.length&&this.paginaPrevia()}},eliminar(t){F().put(ve+"/empleados/"+t.id,{nombre:t.nombre,idEmpleado:t.idEmpleado,activo:0,usuario:t.usuario,cargo:t.cargo,password:t.password,idSubsede:t.idSubsede}).then((function(t){console.log(t),location.reload()})).catch((function(t){console.log(t)}))},totalPaginas(){return Math.ceil(this.totalEmpleados.length/this.elementosPorPagina)},ObtenerDatosPag(t){this.paginaActual=t,this.datosPaginados=[];let e=t*this.elementosPorPagina-this.elementosPorPagina,a=t*this.elementosPorPagina;this.datosPaginados=this.totalEmpleados.slice(e,a)},paginaPrevia(){this.paginaActual>1&&this.paginaActual--,this.ObtenerDatosPag(this.paginaActual)},paginaSiguiente(){this.paginaActual<this.totalPaginas()&&this.paginaActual++,this.ObtenerDatosPag(this.paginaActual)},activo(t){return t===this.paginaActual?"active":""},obtenerAdmin(t){this.empleadoEditar.nombre=t.nombre,this.empleadoEditar.id=t.id,this.empleadoEditar.usuario=t.nombre,this.empleadoEditar.password=t.password,this.empleadoEditar.cargo=t.cargo,this.empleadoEditar.idSubsede=t.idSubsede},actualizar(){this.empleadoEditar.password==this.empleadoEditar.password2?F().put(ve+"/empleados/"+this.empleadoEditar.id,{nombre:this.empleadoEditar.nombre,idEmpleado:parseInt(localStorage.getItem("id")),activo:1,usuario:this.empleadoEditar.usuario,cargo:this.empleadoEditar.cargo,password:this.empleadoEditar.password,idSubsede:this.empleadoEditar.idSubsede}).then((function(t){console.log(t),location.reload()})).then(alert("El Administrador se actualizo correctamente")).catch((function(t){console.log(t)})):alert("Las contraseñas no coinciden")}}},fe=ge,_e=(0,n.Z)(fe,pe,be,!1,null,null,null),Ce=_e.exports,Pe=function(){var t=this,e=t._self._c;return e("div",{ref:"accionEditar",staticClass:"container row"},[e("form",{staticClass:"col",on:{submit:function(e){return e.preventDefault(),t.agregarAdmin.apply(null,arguments)}}},[e("div",{staticClass:"row align-items-center text-center"},[e("div",{staticClass:"form-group col-sm"},[e("label",{attrs:{for:"titulo"}},[t._v("Ingrese el nombre del administrador")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.nombreAdmin,expression:"nombreAdmin"}],staticClass:"form-control text-center",attrs:{required:"",type:"text",name:"nombre",id:"nombreAdmin",placeholder:"Nombre del administrador","aria-describedby":"nombreAdmin"},domProps:{value:t.nombreAdmin},on:{input:function(e){e.target.composing||(t.nombreAdmin=e.target.value)}}}),e("label",{attrs:{for:"titulo"}},[t._v("Ingrese su nuevo usuario")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.usuarioA,expression:"usuarioA"}],staticClass:"form-control text-center",attrs:{required:"",type:"text",name:"usuarioA",id:"usuarioA",placeholder:"usuario para iniciar sesión","aria-describedby":"usuarioA"},domProps:{value:t.usuarioA},on:{input:function(e){e.target.composing||(t.usuarioA=e.target.value)}}}),e("label",{attrs:{for:"titulo"}},[t._v("Ingrese la contraseña")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.contra1,expression:"contra1"}],staticClass:"form-control text-center",attrs:{required:"",type:"current-password",name:"contra1",id:"contra1",placeholder:"contraseña","aria-describedby":"contra1"},domProps:{value:t.contra1},on:{input:function(e){e.target.composing||(t.contra1=e.target.value)}}}),e("label",{attrs:{for:"titulo"}},[t._v("Ingrese otra vez la contraseña")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.contra2,expression:"contra2"}],staticClass:"form-control text-center",attrs:{required:"",type:"current-password",name:"contra2",id:"contra2",placeholder:"contraseña","aria-describedby":"contra2"},domProps:{value:t.contra2},on:{input:function(e){e.target.composing||(t.contra2=e.target.value)}}}),e("label",{attrs:{for:"titulo"}},[t._v("Ingrese el cargo del administrador")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.cargo,expression:"cargo"}],staticClass:"form-control text-center",attrs:{required:"",type:"text",name:"cargo",id:"cargo",placeholder:"cargo","aria-describedby":"cargo"},domProps:{value:t.cargo},on:{input:function(e){e.target.composing||(t.cargo=e.target.value)}}}),e("div",{staticClass:"form-group col text-center"},[e("label",[t._v("Selecciona una subsede")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.subSede,expression:"subSede"}],staticClass:"form-control text-center",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.subSede=e.target.multiple?a:a[0]}}},t._l(t.subsedes,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(" "+t._s(a.subsede)+" ")])})),0)])])]),e("br"),e("div",{staticClass:"container row",attrs:{"raria-label":""}},[t.variable<0?e("a",{staticClass:"btn btn-success col-5",on:{click:function(e){return e.stopPropagation(),t.agregarAdmin()}}},[t._v(" Agregar nuevo autor ")]):t._e(),e("span",{staticClass:"col-2"}),e("a",{staticClass:"btn btn-danger col-5",on:{click:function(e){return e.stopPropagation(),t.volver()}}},[t._v("Cancelar")])])])])},Ee=[];const Se="http://192.168.0.113:8081/api",Ae="http://192.168.0.113:8082/api";var ye={data(){return{idAdmin:localStorage.getItem("idSubsede"),nombreAdmin:"",subsedes:[],subSede:localStorage.getItem("idSubsede"),usuarioA:"",contra1:"",contra2:"",cargo:"",idAdminSubsede:{}}},props:{variable:{type:Number,default:0}},created:function(){this.consultarSubsedes()},methods:{agregarAdmin(){this.contra1==this.contra2?F().post(Ae+"/empleados/",{nombre:this.nombreAdmin,idEmpleado:parseInt(localStorage.getItem("id")),activo:1,usuario:this.usuarioA,cargo:this.cargo,password:this.contra1,idSubsede:this.subSede}).then((function(t){location.reload(),console.log(t)})).catch((function(t){console.log(t)})):alert("Las contraseñas no coinciden")},volver(){location.reload()},consultarSubsedes(){1==this.idAdmin?fetch(Se+"/subsedes").then((t=>t.json())).then((t=>{this.subsedes=[],"undefined"===typeof t[0].success&&(this.subsedes=t)})).catch(console.log):fetch(Se+"/subsede/"+this.idAdmin).then((t=>t.json())).then((t=>{this.subsedes=[],"undefined"===typeof t[0].success&&(this.subsedes=t)})).catch(console.log)}}},xe=ye,Ie=(0,n.Z)(xe,Pe,Ee,!1,null,null,null),we=Ie.exports,ke={name:"AdministradoresView",data(){return{valor:0,name:0}},components:{ListarAdmin:Ce,CrearAdmin:we},mounted:function(){2!=localStorage.getItem("acceso")&&this.$router.push({name:"home"})},created:function(){this.valor=0},methods:{listar(){return 0===this.valor?"active":""},crear(){return-1===this.valor?"active":""}}},Le=ke,Ne=(0,n.Z)(Le,ue,me,!1,null,null,null),De=Ne.exports;o["default"].use(u.ZP);const Oe=[{path:"/",name:"home",component:y},{path:"/editoriales",name:"editoriales",component:de},{path:"/administradores",name:"administradores",component:De},{path:"/about",name:"about",component:()=>a.e(443).then(a.bind(a,5399))},{path:"/libros",name:"libros",component:ot},{path:"/solicitudes",name:"librosolicitudess",component:At},{path:"/autores",name:"autores",component:Zt}],Ue=new u.ZP({routes:Oe});var Fe=Ue,je=a(5996),Te=a(9425);a(7024);o["default"].use(je.XG7),o["default"].use(Te.A7),o["default"].config.productionTip=!1,new o["default"]({router:Fe,render:t=>t(d)}).$mount("#app"),o["default"].config.devtools=!1},1809:function(t,e,a){t.exports=a.p+"img/image.21d720ba.webp"}},e={};function a(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={exports:{}};return t[o].call(r.exports,r,r.exports,a),r.exports}a.m=t,function(){var t=[];a.O=function(e,o,i,r){if(!o){var s=1/0;for(d=0;d<t.length;d++){o=t[d][0],i=t[d][1],r=t[d][2];for(var l=!0,n=0;n<o.length;n++)(!1&r||s>=r)&&Object.keys(a.O).every((function(t){return a.O[t](o[n])}))?o.splice(n--,1):(l=!1,r<s&&(s=r));if(l){t.splice(d--,1);var c=i();void 0!==c&&(e=c)}}return e}r=r||0;for(var d=t.length;d>0&&t[d-1][2]>r;d--)t[d]=t[d-1];t[d]=[o,i,r]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){var t,e=Object.getPrototypeOf?function(t){return Object.getPrototypeOf(t)}:function(t){return t.__proto__};a.t=function(o,i){if(1&i&&(o=this(o)),8&i)return o;if("object"===typeof o&&o){if(4&i&&o.__esModule)return o;if(16&i&&"function"===typeof o.then)return o}var r=Object.create(null);a.r(r);var s={};t=t||[null,e({}),e([]),e(e)];for(var l=2&i&&o;"object"==typeof l&&!~t.indexOf(l);l=e(l))Object.getOwnPropertyNames(l).forEach((function(t){s[t]=function(){return o[t]}}));return s["default"]=function(){return o},a.d(r,s),r}}(),function(){a.d=function(t,e){for(var o in e)a.o(e,o)&&!a.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){a.f={},a.e=function(t){return Promise.all(Object.keys(a.f).reduce((function(e,o){return a.f[o](t,e),e}),[]))}}(),function(){a.u=function(t){return"js/"+(443===t?"about":t)+"."+{269:"8f82b86a",443:"4db3678c",617:"20711e54",902:"3641de9c"}[t]+".js"}}(),function(){a.miniCssF=function(t){}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="bibliotecauno:";a.l=function(o,i,r,s){if(t[o])t[o].push(i);else{var l,n;if(void 0!==r)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==o||u.getAttribute("data-webpack")==e+r){l=u;break}}l||(n=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,a.nc&&l.setAttribute("nonce",a.nc),l.setAttribute("data-webpack",e+r),l.src=o),t[o]=[i];var m=function(e,a){l.onerror=l.onload=null,clearTimeout(p);var i=t[o];if(delete t[o],l.parentNode&&l.parentNode.removeChild(l),i&&i.forEach((function(t){return t(a)})),e)return e(a)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=m.bind(null,l.onerror),l.onload=m.bind(null,l.onload),n&&document.head.appendChild(l)}}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var t={143:0};a.f.j=function(e,o){var i=a.o(t,e)?t[e]:void 0;if(0!==i)if(i)o.push(i[2]);else{var r=new Promise((function(a,o){i=t[e]=[a,o]}));o.push(i[2]=r);var s=a.p+a.u(e),l=new Error,n=function(o){if(a.o(t,e)&&(i=t[e],0!==i&&(t[e]=void 0),i)){var r=o&&("load"===o.type?"missing":o.type),s=o&&o.target&&o.target.src;l.message="Loading chunk "+e+" failed.\n("+r+": "+s+")",l.name="ChunkLoadError",l.type=r,l.request=s,i[1](l)}};a.l(s,n,"chunk-"+e,e)}},a.O.j=function(e){return 0===t[e]};var e=function(e,o){var i,r,s=o[0],l=o[1],n=o[2],c=0;if(s.some((function(e){return 0!==t[e]}))){for(i in l)a.o(l,i)&&(a.m[i]=l[i]);if(n)var d=n(a)}for(e&&e(o);c<s.length;c++)r=s[c],a.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return a.O(d)},o=self["webpackChunkbibliotecauno"]=self["webpackChunkbibliotecauno"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=a.O(void 0,[998],(function(){return a(1248)}));o=a.O(o)})();
//# sourceMappingURL=app.d7c5aa4e.js.map